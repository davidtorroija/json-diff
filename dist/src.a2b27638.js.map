{"version":3,"sources":["src/json-ht.js","src/base.js","src/formatter.js","src/text-formatter.js","src/console.js","node_modules/jsondiffpatch/dist/jsondiffpatch.umd.js","src/index.js","node_modules/parcel-bundler/src/builtins/bundle-url.js","node_modules/parcel-bundler/src/builtins/css-loader.js","node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["left","data","right","i","isArray","Array","a","getObjectKeys","Object","keys","obj","names","property","prototype","hasOwnProperty","call","push","trimUnderscore","str","substr","slice","arrayKeyToSortNumber","key","parseInt","arrayKeyComparer","key1","key2","BaseFormatter","delta","context","prepareContext","recurse","finalize","buffer","out","deltaType","Error","err","toString","join","leftKey","movedFrom","isLast","useMoveOriginHere","leftValue","value","undefined","type","getDeltaType","nodeType","_t","nodeBegin","rootBegin","typeFormattter","typeFormattterNotFound","typeFormattterErrorFormatter","console","error","stack","nodeEnd","rootEnd","self","forEachDeltaKey","fn","arrayKeys","moveDestinations","name","includeMoveDestinations","sort","index","length","output","lines","split","l","line","lineOutput","pieces","location","exec","chr","pieceIndex","piecesLength","piece","pieceOutput","text","OPERATIONS","add","remove","replace","move","JSONFormatter","result","path","pushCurrentOp","op","val","currentPath","pushMoveOp","to","from","toPath","pop","formatDeltaChildren","last","arr","sortBy","pred","compareByIndexDesc","indexA","indexB","lastA","lastB","isNaN","opsByDescendingOrder","removeOps","b","splitA","splitB","partitionOps","fns","initArr","fill","map","item","position","indexOf","reduce","acc","isMoveOp","isRemoveOp","reorderOps","diff","moveOps","removedOps","restOps","removeOpsReverse","defaultInstance","format","log","escapeHtml","unsafe","pushAddOp","actions","added","deleted","movedestination","moved","unchanged","textDiffLine","parseInteger","NaN","number","Number","isInteger","ConsoleFormatter","indent","levels","indentLevel","indentPad","outLine","args","setIndex","JSON","stringify","parseTextDiff","formatValue","action","modifiedObj","old","new","formatTextDiffString","global","factory","exports","module","require","define","amd","jsondiffpatch","chalk","_typeof","Symbol","iterator","constructor","classCallCheck","instance","Constructor","TypeError","createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","protoProps","staticProps","get","object","receiver","Function","desc","getOwnPropertyDescriptor","parent","getPrototypeOf","getter","inherits","subClass","superClass","create","setPrototypeOf","__proto__","possibleConstructorReturn","ReferenceError","slicedToArray","sliceIterator","_arr","_n","_d","_e","_i","_s","next","done","toConsumableArray","arr2","Processor","options","selfOptions","pipes","_options","pipe","pipeArg","processor","process","input","nextPipe","lastPipe","lastContext","nextAfterChildren","hasResult","Pipe","filters","debug","filter","filterName","exiting","resultCheck","msg","append","_filters","apply","arguments","prepend","_filters2","unshift","list","f","after","params","splice","before","clear","shouldHaveResult","should","noResult","Context","setResult","exit","switchTo","child","childName","root","children","cloneRegExp","re","regexMatch","RegExp","clone","arg","Date","getTime","cloned","DiffContext","_Context","_this","cloneDiffValues","clone$$1","PatchContext","ReverseContext","isArray$1","diffFilter","trivialMatchesDiffFilter","leftType","rightType","leftIsArray","rightIsArray","patchFilter","trivialMatchesPatchFilter","nested","regexArgs","reverseFilter","trivialReferseFilter","collectChildrenDiffFilter","objectsDiffFilter","propertyFilter","patchFilter$1","nestedPatchFilter","collectChildrenPatchFilter","reverseFilter$1","nestedReverseFilter","collectChildrenReverseFilter","defaultMatch","array1","array2","index1","index2","lengthMatrix","match","len1","len2","x","y","matrix","Math","max","backtrack","sequence","indices1","indices2","subsequence","get$1","innerContext","lcs","ARRAY_MOVE","isArray$2","arrayIndexOf","array","arraysHaveMatchByRef","val1","val2","matchItems","value1","value2","objectHash","matchByPosition","hash1","hash2","hashCache1","hashCache2","diffFilter$1","arraysDiffFilter","matchContext","commonHead","commonTail","trimmed1","trimmed2","seq","removedItems","detectMove","arrays","includeValueOnMove","removedItemsLength","indexOnArray2","isMove","removeItemIndex1","compare","numerically","numericallyBy","patchFilter$2","toRemove","toInsert","toModify","indexDiff","removedValue","toInsertLength","insertion","toModifyLength","modification","collectChildrenPatchFilter$1","reverseFilter$2","arraysReverseFilter","newName","reverseArrayDeltaIndex","itemDelta","reverseIndex","deltaIndex","deltaItem","moveFromIndex","moveToIndex","deleteIndex","collectChildrenReverseFilter$1","diffFilter$2","datesDiffFilter","createCommonjsModule","diffMatchPatch","diff_match_patch","Diff_Timeout","Diff_EditCost","Match_Threshold","Match_Distance","Patch_DeleteThreshold","Patch_Margin","Match_MaxBits","DIFF_DELETE","DIFF_INSERT","DIFF_EQUAL","diff_main","text1","text2","opt_checklines","opt_deadline","MAX_VALUE","deadline","checklines","commonlength","diff_commonPrefix","commonprefix","substring","diff_commonSuffix","commonsuffix","diffs","diff_compute_","diff_cleanupMerge","longtext","shorttext","hm","diff_halfMatch_","text1_a","text1_b","text2_a","text2_b","mid_common","diffs_a","diffs_b","concat","diff_lineMode_","diff_bisect_","diff_linesToChars_","chars1","chars2","linearray","lineArray","diff_charsToLines_","diff_cleanupSemantic","pointer","count_delete","count_insert","text_delete","text_insert","j","text1_length","text2_length","max_d","ceil","v_offset","v_length","v1","v2","front","k1start","k1end","k2start","k2end","d","k1","k1_offset","x1","y1","charAt","k2_offset","x2","diff_bisectSplit_","k2","y2","text1a","text2a","text1b","text2b","diffsb","lineHash","diff_linesToCharsMunge_","chars","lineStart","lineEnd","lineArrayLength","String","fromCharCode","charCodeAt","pointermin","pointermax","min","pointermid","pointerstart","floor","pointerend","diff_commonOverlap_","text_length","best","pattern","found","dmp","diff_halfMatchI_","seed","best_common","best_longtext_a","best_longtext_b","best_shorttext_a","best_shorttext_b","prefixLength","suffixLength","hm1","hm2","changes","equalities","equalitiesLength","lastequality","length_insertions1","length_deletions1","length_insertions2","length_deletions2","diff_cleanupSemanticLossless","deletion","overlap_length1","overlap_length2","diff_cleanupSemanticScore_","one","two","char1","char2","nonAlphaNumeric1","nonAlphaNumericRegex_","nonAlphaNumeric2","whitespace1","whitespaceRegex_","whitespace2","lineBreak1","linebreakRegex_","lineBreak2","blankLine1","blanklineEndRegex_","blankLine2","blanklineStartRegex_","equality1","edit","equality2","commonOffset","commonString","bestEquality1","bestEdit","bestEquality2","bestScore","score","diff_cleanupEfficiency","pre_ins","pre_del","post_ins","post_del","diff_xIndex","loc","last_chars1","last_chars2","diff_prettyHtml","html","pattern_amp","pattern_lt","pattern_gt","pattern_para","diff_text1","diff_text2","diff_levenshtein","levenshtein","insertions","deletions","diff_toDelta","encodeURI","diff_fromDelta","diffsLength","tokens","param","decodeURI","ex","n","match_main","match_bitap_","s","match_alphabet_","match_bitapScore_","e","accuracy","proximity","abs","score_threshold","best_loc","lastIndexOf","matchmask","bin_min","bin_mid","bin_max","last_rd","start","finish","rd","charMatch","patch_addContext_","patch","start2","length1","padding","prefix","suffix","start1","length2","patch_make","opt_b","opt_c","patches","patch_obj","patchDiffLength","char_count1","char_count2","prepatch_text","postpatch_text","diff_type","diff_text","patch_deepCopy","patchesCopy","patchCopy","patch_apply","nullPadding","patch_addPadding","patch_splitMax","results","expected_loc","start_loc","end_loc","mod","paddingLength","extraLength","patch_size","bigpatch","precontext","empty","shift","postcontext","patch_toText","patch_fromText","textline","textPointer","patchHeader","m","sign","coords1","coords2","TEXT_DIFF","DEFAULT_MIN_LENGTH","cachedDiffPatch","getDiffMatchPatch","required","diff_match_patch_not_found","txt1","txt2","_patch","_error","textPatchFailed","diffFilter$3","textsDiffFilter","minLength","textDiff","diffMatchPatch$$1","patchFilter$3","textsPatchFilter","textDeltaReverse","lineTmp","header","headerRegex","lineHeader","reverseFilter$3","textsReverseFilter","DiffPatcher","_processor","reverse","unpatch","isArray$3","_buffer","_ref","base","freeze","default","HtmlFormatter","_BaseFormatter","htmlEscape","nodeClass","hasArrows","adjustArrows","format_unchanged","format_movedestination","format_node","format_added","format_modified","format_deleted","format_moved","format_textdiff","replacements","jsondiffpatchHtmlFormatterAdjustArrows","nodeArg","node","document","getElementText","textContent","innerText","eachByQuery","el","query","elems","querySelectorAll","eachChildren","_ref2","_ref3","parentNode","style","arrowParent","svg","display","destination","querySelector","container","destinationElem","getAttribute","distance","offsetTop","setAttribute","top","curve","round","showUnchanged","show","delay","body","classes","showing","hiding","visible","hidden","classList","setTimeout","intervalId","setInterval","clearInterval","hideUnchanged","AnnotatedFormatter","row","json","htmlNote","wrapPropertyName","deltaAnnotations","formatLegend","modified","textdiff","formatAnyChange","annotator","defaultInstance$1","format$1","annotated","_ref4","_partitionOps","_partitionOps2","defaultInstance$2","format$2","jsonpatch","chalkColor","_len","_key","colors","_len2","_key2","color","pushColor","popColor","defaultInstance$3","format$3","log$1","console$1","dateReviver","parts","UTC","defaultInstance$4","clone$1","formatters","getElementById","innerHTML","window","includes","formatter","jsonFormatter","eval","resultArr","textFormatter","select","li","createElement","span","appendChild","createTextNode","insertBefore","childNodes","bundleURL","getBundleURLCached","getBundleURL","matches","getBaseURL","url","bundle","updateLink","link","newLink","cloneNode","onload","href","now","nextSibling","cssTimeout","reloadCSS","links","OVERLAY_ID","OldModule","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","dispose","checkedAssets","assetsToAccept","isParcelRequire","WebSocket","hostname","protocol","ws","onmessage","event","parse","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","parcelRequire","id","every","generated","js","hmrApply","v","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","message","overlay","createErrorOverlay","stackTrace","getParents","modules","parents","k","dep","deps","cached","cache","some","cb"],"mappings":"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","file":"src.a2b27638.js","sourceRoot":"..","sourcesContent":["const left = {\n  data: {}\n};\n\nconst right = {\n  data: {\n    i: 2\n  }\n};\n\nexport { left, right };\n","const isArray =\n  typeof Array.isArray === \"function\" ? Array.isArray : a => a instanceof Array;\n\nconst getObjectKeys =\n  typeof Object.keys === \"function\"\n    ? obj => Object.keys(obj)\n    : obj => {\n        const names = [];\n        for (let property in obj) {\n          if (Object.prototype.hasOwnProperty.call(obj, property)) {\n            names.push(property);\n          }\n        }\n        return names;\n      };\n\nconst trimUnderscore = str => {\n  if (str.substr(0, 1) === \"_\") {\n    return str.slice(1);\n  }\n  return str;\n};\n\nconst arrayKeyToSortNumber = key => {\n  if (key === \"_t\") {\n    return -1;\n  } else {\n    if (key.substr(0, 1) === \"_\") {\n      return parseInt(key.slice(1), 10);\n    } else {\n      return parseInt(key, 10) + 0.1;\n    }\n  }\n};\n\nconst arrayKeyComparer = (key1, key2) =>\n  arrayKeyToSortNumber(key1) - arrayKeyToSortNumber(key2);\n\nclass BaseFormatter {\n  format(delta, left) {\n    const context = {};\n    this.prepareContext(context);\n    this.recurse(context, delta, left);\n    return this.finalize(context);\n  }\n\n  prepareContext(context) {\n    context.buffer = [];\n    context.out = function(...args) {\n      this.buffer.push(...args);\n    };\n  }\n\n  typeFormattterNotFound(context, deltaType) {\n    throw new Error(`cannot format delta type: ${deltaType}`);\n  }\n\n  typeFormattterErrorFormatter(context, err) {\n    return err.toString();\n  }\n\n  finalize({ buffer }) {\n    if (isArray(buffer)) {\n      return buffer.join(\"\");\n    }\n  }\n\n  recurse(context, delta, left, key, leftKey, movedFrom, isLast) {\n    const useMoveOriginHere = delta && movedFrom;\n    const leftValue = useMoveOriginHere ? movedFrom.value : left;\n\n    if (typeof delta === \"undefined\" && typeof key === \"undefined\") {\n      return undefined;\n    }\n\n    const type = this.getDeltaType(delta, movedFrom);\n    const nodeType =\n      type === \"node\" ? (delta._t === \"a\" ? \"array\" : \"object\") : \"\";\n\n    if (typeof key !== \"undefined\") {\n      this.nodeBegin(context, key, leftKey, type, nodeType, isLast);\n    } else {\n      this.rootBegin(context, type, nodeType);\n    }\n\n    let typeFormattter;\n    try {\n      typeFormattter =\n        this[`format_${type}`] || this.typeFormattterNotFound(context, type);\n      typeFormattter.call(\n        this,\n        context,\n        delta,\n        leftValue,\n        key,\n        leftKey,\n        movedFrom\n      );\n    } catch (err) {\n      this.typeFormattterErrorFormatter(\n        context,\n        err,\n        delta,\n        leftValue,\n        key,\n        leftKey,\n        movedFrom\n      );\n      if (typeof console !== \"undefined\" && console.error) {\n        console.error(err.stack);\n      }\n    }\n\n    if (typeof key !== \"undefined\") {\n      this.nodeEnd(context, key, leftKey, type, nodeType, isLast);\n    } else {\n      this.rootEnd(context, type, nodeType);\n    }\n  }\n\n  formatDeltaChildren(context, delta, left) {\n    const self = this;\n    this.forEachDeltaKey(delta, left, (key, leftKey, movedFrom, isLast) => {\n      self.recurse(\n        context,\n        delta[key],\n        left ? left[leftKey] : undefined,\n        key,\n        leftKey,\n        movedFrom,\n        isLast\n      );\n    });\n  }\n\n  forEachDeltaKey(delta, left, fn) {\n    const keys = getObjectKeys(delta);\n    const arrayKeys = delta._t === \"a\";\n    const moveDestinations = {};\n    let name;\n    if (typeof left !== \"undefined\") {\n      for (name in left) {\n        if (Object.prototype.hasOwnProperty.call(left, name)) {\n          if (\n            typeof delta[name] === \"undefined\" &&\n            (!arrayKeys || typeof delta[`_${name}`] === \"undefined\")\n          ) {\n            keys.push(name);\n          }\n        }\n      }\n    }\n    // look for move destinations\n    for (name in delta) {\n      if (Object.prototype.hasOwnProperty.call(delta, name)) {\n        const value = delta[name];\n        if (isArray(value) && value[2] === 3) {\n          moveDestinations[value[1].toString()] = {\n            key: name,\n            value: left && left[parseInt(name.substr(1))]\n          };\n          if (this.includeMoveDestinations !== false) {\n            if (\n              typeof left === \"undefined\" &&\n              typeof delta[value[1]] === \"undefined\"\n            ) {\n              keys.push(value[1].toString());\n            }\n          }\n        }\n      }\n    }\n    if (arrayKeys) {\n      keys.sort(arrayKeyComparer);\n    } else {\n      keys.sort();\n    }\n    for (let index = 0, length = keys.length; index < length; index++) {\n      const key = keys[index];\n      if (arrayKeys && key === \"_t\") {\n        continue;\n      }\n      const leftKey = arrayKeys\n        ? typeof key === \"number\"\n          ? key\n          : parseInt(trimUnderscore(key), 10)\n        : key;\n      const isLast = index === length - 1;\n      fn(key, leftKey, moveDestinations[leftKey], isLast);\n    }\n  }\n\n  getDeltaType(delta, movedFrom) {\n    if (typeof delta === \"undefined\") {\n      if (typeof movedFrom !== \"undefined\") {\n        return \"movedestination\";\n      }\n      return \"unchanged\";\n    }\n    if (isArray(delta)) {\n      if (delta.length === 1) {\n        return \"added\";\n      }\n      if (delta.length === 2) {\n        return \"modified\";\n      }\n      if (delta.length === 3 && delta[2] === 0) {\n        return \"deleted\";\n      }\n      if (delta.length === 3 && delta[2] === 2) {\n        return \"textdiff\";\n      }\n      if (delta.length === 3 && delta[2] === 3) {\n        return \"moved\";\n      }\n    } else if (typeof delta === \"object\") {\n      return \"node\";\n    }\n    return \"unknown\";\n  }\n\n  parseTextDiff(value) {\n    const output = [];\n    const lines = value.split(\"\\n@@ \");\n    for (let i = 0, l = lines.length; i < l; i++) {\n      const line = lines[i];\n      const lineOutput = {\n        pieces: []\n      };\n      const location = /^(?:@@ )?[-+]?(\\d+),(\\d+)/.exec(line).slice(1);\n      lineOutput.location = {\n        line: location[0],\n        chr: location[1]\n      };\n      const pieces = line.split(\"\\n\").slice(1);\n      for (\n        let pieceIndex = 0, piecesLength = pieces.length;\n        pieceIndex < piecesLength;\n        pieceIndex++\n      ) {\n        const piece = pieces[pieceIndex];\n        if (!piece.length) {\n          continue;\n        }\n        const pieceOutput = {\n          type: \"context\"\n        };\n        if (piece.substr(0, 1) === \"+\") {\n          pieceOutput.type = \"added\";\n        } else if (piece.substr(0, 1) === \"-\") {\n          pieceOutput.type = \"deleted\";\n        }\n        pieceOutput.text = piece.slice(1);\n        lineOutput.pieces.push(pieceOutput);\n      }\n      output.push(lineOutput);\n    }\n    return output;\n  }\n}\n\nexport default BaseFormatter;\n","import BaseFormatter from \"./base.js\";\n\nconst OPERATIONS = {\n  add: \"add\",\n  remove: \"remove\",\n  replace: \"replace\",\n  move: \"move\"\n};\n\nclass JSONFormatter extends BaseFormatter {\n  constructor() {\n    super();\n    this.includeMoveDestinations = true;\n  }\n\n  prepareContext(context) {\n    super.prepareContext(context);\n    context.result = [];\n    context.path = [];\n    context.pushCurrentOp = function(obj) {\n      const { op, value } = obj;\n      const val = {\n        op,\n        path: this.currentPath()\n      };\n      if (typeof value !== \"undefined\") {\n        val.value = value;\n      }\n      this.result.push(val);\n    };\n\n    context.pushMoveOp = function(to) {\n      const from = this.currentPath();\n      this.result.push({\n        op: OPERATIONS.move,\n        from: from,\n        path: this.toPath(to)\n      });\n    };\n\n    context.currentPath = function() {\n      return `/${this.path.join(\"/\")}`;\n    };\n\n    context.toPath = function(toPath) {\n      const to = this.path.slice();\n      to[to.length - 1] = toPath;\n      return `/${to.join(\"/\")}`;\n    };\n  }\n\n  typeFormattterErrorFormatter(context, err) {\n    context.out(`[ERROR] ${err}`);\n  }\n\n  rootBegin() {}\n  rootEnd() {}\n\n  nodeBegin({ path }, key, leftKey) {\n    path.push(leftKey);\n  }\n\n  nodeEnd({ path }) {\n    path.pop();\n  }\n\n  /* jshint camelcase: false */\n  /* eslint-disable camelcase */\n\n  format_unchanged() {}\n\n  format_movedestination() {}\n\n  format_node(context, delta, left) {\n    this.formatDeltaChildren(context, delta, left);\n  }\n\n  format_added(context, delta) {\n    context.pushCurrentOp({ op: OPERATIONS.add, value: delta[0] });\n  }\n\n  format_modified(context, delta) {\n    context.pushCurrentOp({ op: OPERATIONS.replace, value: delta[1] });\n  }\n\n  format_deleted(context) {\n    context.pushCurrentOp({ op: OPERATIONS.remove });\n  }\n\n  format_moved(context, delta) {\n    const to = delta[1];\n    context.pushMoveOp(to);\n  }\n\n  format_textdiff() {\n    throw new Error(\"Not implemented\");\n  }\n\n  format(delta, left) {\n    let context = {};\n    this.prepareContext(context);\n    this.recurse(context, delta, left);\n    return context.result;\n  }\n}\n\n/* jshint camelcase: true */\n/* eslint-enable camelcase */\n\nexport default JSONFormatter;\n\nconst last = arr => arr[arr.length - 1];\n\nconst sortBy = (arr, pred) => {\n  arr.sort(pred);\n  return arr;\n};\n\nconst compareByIndexDesc = (indexA, indexB) => {\n  const lastA = parseInt(indexA, 10);\n  const lastB = parseInt(indexB, 10);\n  if (!(isNaN(lastA) || isNaN(lastB))) {\n    return lastB - lastA;\n  } else {\n    return 0;\n  }\n};\n\nconst opsByDescendingOrder = removeOps =>\n  sortBy(removeOps, (a, b) => {\n    const splitA = a.path.split(\"/\");\n    const splitB = b.path.split(\"/\");\n    if (splitA.length !== splitB.length) {\n      return splitA.length - splitB.length;\n    } else {\n      return compareByIndexDesc(last(splitA), last(splitB));\n    }\n  });\n\nexport const partitionOps = (arr, fns) => {\n  const initArr = Array(fns.length + 1)\n    .fill()\n    .map(() => []);\n  return arr\n    .map(item => {\n      let position = fns.map(fn => fn(item)).indexOf(true);\n      if (position < 0) {\n        position = fns.length;\n      }\n      return { item, position };\n    })\n    .reduce((acc, item) => {\n      acc[item.position].push(item.item);\n      return acc;\n    }, initArr);\n};\nconst isMoveOp = ({ op }) => op === \"move\";\nconst isRemoveOp = ({ op }) => op === \"remove\";\n\nconst reorderOps = diff => {\n  const [moveOps, removedOps, restOps] = partitionOps(diff, [\n    isMoveOp,\n    isRemoveOp\n  ]);\n  const removeOpsReverse = opsByDescendingOrder(removedOps);\n  return [...removeOpsReverse, ...moveOps, ...restOps];\n};\n\nlet defaultInstance;\n\nexport const format = (delta, left) => {\n  if (!defaultInstance) {\n    defaultInstance = new JSONFormatter();\n  }\n  return reorderOps(defaultInstance.format(delta, left));\n};\n\nexport const log = (delta, left) => {\n  console.log(format(delta, left));\n};\n","import BaseFormatter from \"./base.js\";\n\nconst OPERATIONS = {\n  add: \"added\",\n  remove: \"removed\",\n  replace: \"replaced\",\n  move: \"moved\"\n};\n\nfunction escapeHtml(unsafe) {\n  return unsafe\n    .replace(/&/g, \"&amp;\")\n    .replace(/</g, \"&lt;\")\n    .replace(/>/g, \"&gt;\")\n    .replace(/\"/g, \"&quot;\")\n    .replace(/'/g, \"&#039;\");\n}\n\nclass JSONFormatter extends BaseFormatter {\n  constructor() {\n    super();\n    this.includeMoveDestinations = true;\n  }\n\n  prepareContext(context) {\n    super.prepareContext(context);\n    context.result = [];\n    context.path = [];\n    context.pushCurrentOp = function(obj) {\n      const { op, value } = obj;\n      const val = {\n        op,\n        path: this.currentPath()\n      };\n      if (typeof value !== \"undefined\") {\n        val.value = value;\n      }\n      //console.log(\"this\", this.path);\n      this.result.push(\n        `Layer ${this.path[1]}, field \"${this.path[2]}\" ${op} with \"${value}\"`\n      );\n    };\n\n    context.pushAddOp = function(obj) {\n      const { op, value } = obj;\n      const val = {\n        op,\n        path: this.currentPath()\n      };\n      if (typeof value !== \"undefined\") {\n        val.value = value;\n      }\n      //console.log(\"this\", this.path);\n      this.result.push(`Layer ${this.path[1]} added`);\n    };\n\n    context.pushMoveOp = function(to) {\n      const from = this.currentPath();\n      this.result.push({\n        op: OPERATIONS.move,\n        from: from,\n        path: this.toPath(to)\n      });\n    };\n\n    context.currentPath = function() {\n      return `/${this.path.join(\"/\")}`;\n    };\n\n    context.toPath = function(toPath) {\n      const to = this.path.slice();\n      to[to.length - 1] = toPath;\n      return `/${to.join(\"/\")}`;\n    };\n  }\n\n  typeFormattterErrorFormatter(context, err) {\n    context.out(`[ERROR] ${err}`);\n  }\n\n  rootBegin() {}\n  rootEnd() {}\n\n  nodeBegin({ path }, key, leftKey) {\n    path.push(leftKey);\n  }\n\n  nodeEnd({ path }) {\n    path.pop();\n  }\n\n  /* jshint camelcase: false */\n  /* eslint-disable camelcase */\n\n  format_unchanged() {}\n\n  format_movedestination() {}\n\n  format_node(context, delta, left) {\n    this.formatDeltaChildren(context, delta, left);\n  }\n\n  format_added(context, delta) {\n    //.log(\"add\", context.path);\n    context.pushAddOp({ op: OPERATIONS.add, value: delta[0] });\n  }\n\n  format_modified(context, delta) {\n    context.pushCurrentOp({ op: OPERATIONS.replace, value: delta[1] });\n  }\n\n  format_deleted(context) {\n    context.pushCurrentOp({ op: OPERATIONS.remove });\n  }\n\n  format_moved(context, delta) {\n    const to = delta[1];\n    context.pushMoveOp(to);\n  }\n\n  format_textdiff() {\n    throw new Error(\"Not implemented\");\n  }\n\n  format(delta, left) {\n    let context = {};\n    this.prepareContext(context);\n    this.recurse(context, delta, left);\n    return context.result;\n  }\n}\n\n/* jshint camelcase: true */\n/* eslint-enable camelcase */\n\nexport default JSONFormatter;\n\nconst last = arr => arr[arr.length - 1];\n\nconst sortBy = (arr, pred) => {\n  arr.sort(pred);\n  return arr;\n};\n\nconst compareByIndexDesc = (indexA, indexB) => {\n  const lastA = parseInt(indexA, 10);\n  const lastB = parseInt(indexB, 10);\n  if (!(isNaN(lastA) || isNaN(lastB))) {\n    return lastB - lastA;\n  } else {\n    return 0;\n  }\n};\n\nconst opsByDescendingOrder = removeOps =>\n  sortBy(removeOps, (a, b) => {\n    const splitA = a.path.split(\"/\");\n    const splitB = b.path.split(\"/\");\n    if (splitA.length !== splitB.length) {\n      return splitA.length - splitB.length;\n    } else {\n      return compareByIndexDesc(last(splitA), last(splitB));\n    }\n  });\n\nexport const partitionOps = (arr, fns) => {\n  const initArr = Array(fns.length + 1)\n    .fill()\n    .map(() => []);\n  return arr\n    .map(item => {\n      let position = fns.map(fn => fn(item)).indexOf(true);\n      if (position < 0) {\n        position = fns.length;\n      }\n      return { item, position };\n    })\n    .reduce((acc, item) => {\n      acc[item.position].push(item.item);\n      return acc;\n    }, initArr);\n};\nconst isMoveOp = ({ op }) => op === \"move\";\nconst isRemoveOp = ({ op }) => op === \"remove\";\n\nconst reorderOps = diff => {\n  const [moveOps, removedOps, restOps] = partitionOps(diff, [\n    isMoveOp,\n    isRemoveOp\n  ]);\n  const removeOpsReverse = opsByDescendingOrder(removedOps);\n  return [...removeOpsReverse, ...moveOps, ...restOps];\n};\n\nlet defaultInstance;\n\nexport const format = (delta, left) => {\n  if (!defaultInstance) {\n    defaultInstance = new JSONFormatter();\n  }\n  return reorderOps(defaultInstance.format(delta, left));\n};\n\nexport const log = (delta, left) => {\n  console.log(format(delta, left));\n};\n","import BaseFormatter from \"./base.js\";\n\nlet actions = {\n  added: \"added\",\n  deleted: \"deleted\",\n  movedestination: \"move dest\",\n  moved: \"moved\",\n  unchanged: \"unchanged\",\n  error: \"error\",\n  textDiffLine: \"text changed\"\n};\n\nfunction parseInteger(value) {\n  if (value === \"\") return NaN;\n  const number = Number(value);\n  return Number.isInteger(number) ? number : NaN;\n}\nfunction isInteger(value) {\n  const result = parseInteger(value);\n  return !isNaN(result);\n}\n\nclass ConsoleFormatter extends BaseFormatter {\n  constructor() {\n    super();\n    this.includeMoveDestinations = false;\n  }\n\n  prepareContext(context) {\n    super.prepareContext(context);\n    context.index = [];\n    context.indent = function(levels) {\n      this.indentLevel =\n        (this.indentLevel || 0) + (typeof levels === \"undefined\" ? 1 : levels);\n      this.indentPad = new Array(this.indentLevel + 1).join(\"  \");\n      this.outLine();\n    };\n    context.outLine = function() {\n      this.buffer.push(`\\n${this.indentPad || \"\"}`);\n    };\n    context.out = function(...args) {\n      for (let i = 0, l = args.length; i < l; i++) {\n        let lines = args[i].split(\"\\n\");\n        let text = lines.join(`\\n${this.indentPad || \"\"}`);\n        this.buffer.push(text);\n      }\n    };\n    context.setIndex = function(index) {\n      this.index = index;\n    };\n  }\n\n  typeFormattterErrorFormatter(context, err) {\n    //context.pushColor(colors.error);\n    context.out(`[ERROR]${err}`);\n    //context.popColor();\n  }\n\n  formatValue(context, value) {\n    context.out(JSON.stringify(value, null, 2));\n  }\n\n  formatTextDiffString(context, value) {\n    let lines = this.parseTextDiff(value);\n    //console.log(\"lines\", lines);\n    context.indent();\n    for (let i = 0, l = lines.length; i < l; i++) {\n      let line = lines[i];\n      //context.pushColor(colors.textDiffLine);\n      context.out(`${line.location.line},${line.location.chr} `);\n      //context.popColor();2\n      let pieces = line.pieces;\n      for (\n        let pieceIndex = 0, piecesLength = pieces.length;\n        pieceIndex < piecesLength;\n        pieceIndex++\n      ) {\n        let piece = pieces[pieceIndex];\n        //context.pushColor(colors[piece.type]);\n        context.out(piece.text);\n        //context.popColor();\n      }\n      if (i < l - 1) {\n        context.outLine();\n      }\n    }\n    context.indent(-1);\n  }\n\n  rootBegin(context, type, nodeType) {\n    //context.pushColor(colors[type]);\n    //console.log(\"rootBegin \", type, nodeType);\n    if (type === \"node\") {\n      context.out(nodeType === \"array\" ? \"[\" : \"{\");\n      context.indent();\n    }\n  }\n\n  rootEnd(context, type, nodeType) {\n    if (type === \"node\") {\n      context.indent(-1);\n      context.out(nodeType === \"array\" ? \"]\" : \"}\");\n    }\n  }\n\n  nodeBegin(context, key, leftKey, type, nodeType) {\n    //context.pushColor(colors[type]);\n    let index = \"\";\n    if (!isInteger(leftKey)) {\n      context.setIndex(null);\n      context.out(`${leftKey}: `);\n    } else {\n      context.setIndex(leftKey * 1);\n    }\n\n    if (nodeType === \"object\" && context.index) {\n      index = `\\n  \"index\": ${context.index},`;\n    }\n\n    if (type === \"node\") {\n      context.out(nodeType === \"array\" ? \"[\" : \"{\" + index);\n      context.indent();\n    }\n    /*if (type === \"added\" && !nodeType) {\n      console.log(\"added\", index)\n      context.out(index)\n    }*/\n  }\n\n  nodeEnd(context, key, leftKey, type, nodeType, isLast) {\n    if (type === \"node\") {\n      context.indent(-1);\n      context.out(nodeType === \"array\" ? \"],\" : `}${isLast ? \"\" : \",\"}`);\n    }\n    if (!isLast) {\n      context.outLine();\n    }\n    //context.popColor();\n  }\n\n  /* jshint camelcase: false */\n  /* eslint-disable camelcase */\n\n  format_unchanged(context, delta, left) {\n    if (typeof left === \"undefined\") {\n      return;\n    }\n    console.log(\"unchanged\", delta);\n    this.formatValue(context, left);\n  }\n\n  format_movedestination(context, delta, left) {\n    if (typeof left === \"undefined\") {\n      return;\n    }\n    this.formatValue(context, left);\n  }\n\n  format_node(context, delta, left) {\n    // recurse\n    this.formatDeltaChildren(context, delta, left);\n  }\n\n  format_added(context, delta, a) {\n    console.log(\"added1\", delta, context, a, delta[0] === \"object\");\n    if (typeof delta[0] === \"object\") {\n      delta[0].action = \"added\";\n      if (context.index) {\n        delta[0].index = context.index;\n      }\n    }\n    this.formatValue(context, delta[0]);\n    context.out(\",\");\n  }\n\n  format_modified(context, delta) {\n    //context.pushColor(colors.deleted);\n    //console.log(delta);\n\n    //context.out(`{\n    //  \"action\": \"modified\",\n    //  \"old\": `);\n\n    const modifiedObj = {\n      action: \"modified\",\n      old: delta[0],\n      new: delta[1]\n    };\n    this.formatValue(context, modifiedObj);\n    context.out(\",\");\n    //context.popColor();\n    //context.out(`,\n    //  \"new\": `);\n    //context.pushColor(colors.added);\n    //this.formatValue(context, delta[1]);\n    //context.out(`\n    //},`);\n  }\n\n  format_deleted(context, delta) {\n    //delta[0].action = \"deleted\";\n    this.formatValue(context, delta[0]);\n  }\n\n  format_moved(context, delta) {\n    //console.log(\"moved\", delta);\n    context.out(`==> ${delta[1]}`);\n  }\n\n  format_textdiff(context, delta) {\n    console.log(\"text\", delta);\n    this.formatTextDiffString(context, delta[0]);\n  }\n\n  format(delta, left) {\n    let context = {};\n    this.prepareContext(context);\n    this.recurse(context, delta, left);\n    //return eval(context.buffer.join(\"\"));\n    return context.buffer.join(\"\");\n  }\n}\n\n/* eslint-enable camelcase */\n\n/* jshint camelcase: true */\n\nexport default ConsoleFormatter;\n\nlet defaultInstance;\n\nexport const format = (delta, left) => {\n  if (!defaultInstance) {\n    defaultInstance = new ConsoleFormatter();\n  }\n  //console.log(\"result\", pepe);\n  return defaultInstance.format(delta, left);\n};\n\nexport function log(delta, left) {\n  console.log(format(delta, left));\n}\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('./empty')) :\n\ttypeof define === 'function' && define.amd ? define(['exports', './empty'], factory) :\n\t(factory((global.jsondiffpatch = {}),global.chalk));\n}(this, (function (exports,chalk) { 'use strict';\n\nchalk = chalk && chalk.hasOwnProperty('default') ? chalk['default'] : chalk;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n\n\n\n\n\nvar get = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n\n\n\n\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar toConsumableArray = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n};\n\nvar Processor = function () {\n  function Processor(options) {\n    classCallCheck(this, Processor);\n\n    this.selfOptions = options || {};\n    this.pipes = {};\n  }\n\n  createClass(Processor, [{\n    key: 'options',\n    value: function options(_options) {\n      if (_options) {\n        this.selfOptions = _options;\n      }\n      return this.selfOptions;\n    }\n  }, {\n    key: 'pipe',\n    value: function pipe(name, pipeArg) {\n      var pipe = pipeArg;\n      if (typeof name === 'string') {\n        if (typeof pipe === 'undefined') {\n          return this.pipes[name];\n        } else {\n          this.pipes[name] = pipe;\n        }\n      }\n      if (name && name.name) {\n        pipe = name;\n        if (pipe.processor === this) {\n          return pipe;\n        }\n        this.pipes[pipe.name] = pipe;\n      }\n      pipe.processor = this;\n      return pipe;\n    }\n  }, {\n    key: 'process',\n    value: function process(input, pipe) {\n      var context = input;\n      context.options = this.options();\n      var nextPipe = pipe || input.pipe || 'default';\n      var lastPipe = void 0;\n      var lastContext = void 0;\n      while (nextPipe) {\n        if (typeof context.nextAfterChildren !== 'undefined') {\n          // children processed and coming back to parent\n          context.next = context.nextAfterChildren;\n          context.nextAfterChildren = null;\n        }\n\n        if (typeof nextPipe === 'string') {\n          nextPipe = this.pipe(nextPipe);\n        }\n        nextPipe.process(context);\n        lastContext = context;\n        lastPipe = nextPipe;\n        nextPipe = null;\n        if (context) {\n          if (context.next) {\n            context = context.next;\n            nextPipe = lastContext.nextPipe || context.pipe || lastPipe;\n          }\n        }\n      }\n      return context.hasResult ? context.result : undefined;\n    }\n  }]);\n  return Processor;\n}();\n\nvar Pipe = function () {\n  function Pipe(name) {\n    classCallCheck(this, Pipe);\n\n    this.name = name;\n    this.filters = [];\n  }\n\n  createClass(Pipe, [{\n    key: 'process',\n    value: function process(input) {\n      if (!this.processor) {\n        throw new Error('add this pipe to a processor before using it');\n      }\n      var debug = this.debug;\n      var length = this.filters.length;\n      var context = input;\n      for (var index = 0; index < length; index++) {\n        var filter = this.filters[index];\n        if (debug) {\n          this.log('filter: ' + filter.filterName);\n        }\n        filter(context);\n        if ((typeof context === 'undefined' ? 'undefined' : _typeof(context)) === 'object' && context.exiting) {\n          context.exiting = false;\n          break;\n        }\n      }\n      if (!context.next && this.resultCheck) {\n        this.resultCheck(context);\n      }\n    }\n  }, {\n    key: 'log',\n    value: function log(msg) {\n      console.log('[jsondiffpatch] ' + this.name + ' pipe, ' + msg);\n    }\n  }, {\n    key: 'append',\n    value: function append() {\n      var _filters;\n\n      (_filters = this.filters).push.apply(_filters, arguments);\n      return this;\n    }\n  }, {\n    key: 'prepend',\n    value: function prepend() {\n      var _filters2;\n\n      (_filters2 = this.filters).unshift.apply(_filters2, arguments);\n      return this;\n    }\n  }, {\n    key: 'indexOf',\n    value: function indexOf(filterName) {\n      if (!filterName) {\n        throw new Error('a filter name is required');\n      }\n      for (var index = 0; index < this.filters.length; index++) {\n        var filter = this.filters[index];\n        if (filter.filterName === filterName) {\n          return index;\n        }\n      }\n      throw new Error('filter not found: ' + filterName);\n    }\n  }, {\n    key: 'list',\n    value: function list() {\n      return this.filters.map(function (f) {\n        return f.filterName;\n      });\n    }\n  }, {\n    key: 'after',\n    value: function after(filterName) {\n      var index = this.indexOf(filterName);\n      var params = Array.prototype.slice.call(arguments, 1);\n      if (!params.length) {\n        throw new Error('a filter is required');\n      }\n      params.unshift(index + 1, 0);\n      Array.prototype.splice.apply(this.filters, params);\n      return this;\n    }\n  }, {\n    key: 'before',\n    value: function before(filterName) {\n      var index = this.indexOf(filterName);\n      var params = Array.prototype.slice.call(arguments, 1);\n      if (!params.length) {\n        throw new Error('a filter is required');\n      }\n      params.unshift(index, 0);\n      Array.prototype.splice.apply(this.filters, params);\n      return this;\n    }\n  }, {\n    key: 'replace',\n    value: function replace(filterName) {\n      var index = this.indexOf(filterName);\n      var params = Array.prototype.slice.call(arguments, 1);\n      if (!params.length) {\n        throw new Error('a filter is required');\n      }\n      params.unshift(index, 1);\n      Array.prototype.splice.apply(this.filters, params);\n      return this;\n    }\n  }, {\n    key: 'remove',\n    value: function remove(filterName) {\n      var index = this.indexOf(filterName);\n      this.filters.splice(index, 1);\n      return this;\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      this.filters.length = 0;\n      return this;\n    }\n  }, {\n    key: 'shouldHaveResult',\n    value: function shouldHaveResult(should) {\n      if (should === false) {\n        this.resultCheck = null;\n        return;\n      }\n      if (this.resultCheck) {\n        return;\n      }\n      var pipe = this;\n      this.resultCheck = function (context) {\n        if (!context.hasResult) {\n          console.log(context);\n          var error = new Error(pipe.name + ' failed');\n          error.noResult = true;\n          throw error;\n        }\n      };\n      return this;\n    }\n  }]);\n  return Pipe;\n}();\n\nvar Context = function () {\n  function Context() {\n    classCallCheck(this, Context);\n  }\n\n  createClass(Context, [{\n    key: 'setResult',\n    value: function setResult(result) {\n      this.result = result;\n      this.hasResult = true;\n      return this;\n    }\n  }, {\n    key: 'exit',\n    value: function exit() {\n      this.exiting = true;\n      return this;\n    }\n  }, {\n    key: 'switchTo',\n    value: function switchTo(next, pipe) {\n      if (typeof next === 'string' || next instanceof Pipe) {\n        this.nextPipe = next;\n      } else {\n        this.next = next;\n        if (pipe) {\n          this.nextPipe = pipe;\n        }\n      }\n      return this;\n    }\n  }, {\n    key: 'push',\n    value: function push(child, name) {\n      child.parent = this;\n      if (typeof name !== 'undefined') {\n        child.childName = name;\n      }\n      child.root = this.root || this;\n      child.options = child.options || this.options;\n      if (!this.children) {\n        this.children = [child];\n        this.nextAfterChildren = this.next || null;\n        this.next = child;\n      } else {\n        this.children[this.children.length - 1].next = child;\n        this.children.push(child);\n      }\n      child.next = this;\n      return this;\n    }\n  }]);\n  return Context;\n}();\n\nvar isArray = typeof Array.isArray === 'function' ? Array.isArray : function (a) {\n  return a instanceof Array;\n};\n\nfunction cloneRegExp(re) {\n  var regexMatch = /^\\/(.*)\\/([gimyu]*)$/.exec(re.toString());\n  return new RegExp(regexMatch[1], regexMatch[2]);\n}\n\nfunction clone(arg) {\n  if ((typeof arg === 'undefined' ? 'undefined' : _typeof(arg)) !== 'object') {\n    return arg;\n  }\n  if (arg === null) {\n    return null;\n  }\n  if (isArray(arg)) {\n    return arg.map(clone);\n  }\n  if (arg instanceof Date) {\n    return new Date(arg.getTime());\n  }\n  if (arg instanceof RegExp) {\n    return cloneRegExp(arg);\n  }\n  var cloned = {};\n  for (var name in arg) {\n    if (Object.prototype.hasOwnProperty.call(arg, name)) {\n      cloned[name] = clone(arg[name]);\n    }\n  }\n  return cloned;\n}\n\nvar DiffContext = function (_Context) {\n  inherits(DiffContext, _Context);\n\n  function DiffContext(left, right) {\n    classCallCheck(this, DiffContext);\n\n    var _this = possibleConstructorReturn(this, (DiffContext.__proto__ || Object.getPrototypeOf(DiffContext)).call(this));\n\n    _this.left = left;\n    _this.right = right;\n    _this.pipe = 'diff';\n    return _this;\n  }\n\n  createClass(DiffContext, [{\n    key: 'setResult',\n    value: function setResult(result) {\n      if (this.options.cloneDiffValues && (typeof result === 'undefined' ? 'undefined' : _typeof(result)) === 'object') {\n        var clone$$1 = typeof this.options.cloneDiffValues === 'function' ? this.options.cloneDiffValues : clone;\n        if (_typeof(result[0]) === 'object') {\n          result[0] = clone$$1(result[0]);\n        }\n        if (_typeof(result[1]) === 'object') {\n          result[1] = clone$$1(result[1]);\n        }\n      }\n      return Context.prototype.setResult.apply(this, arguments);\n    }\n  }]);\n  return DiffContext;\n}(Context);\n\nvar PatchContext = function (_Context) {\n  inherits(PatchContext, _Context);\n\n  function PatchContext(left, delta) {\n    classCallCheck(this, PatchContext);\n\n    var _this = possibleConstructorReturn(this, (PatchContext.__proto__ || Object.getPrototypeOf(PatchContext)).call(this));\n\n    _this.left = left;\n    _this.delta = delta;\n    _this.pipe = 'patch';\n    return _this;\n  }\n\n  return PatchContext;\n}(Context);\n\nvar ReverseContext = function (_Context) {\n  inherits(ReverseContext, _Context);\n\n  function ReverseContext(delta) {\n    classCallCheck(this, ReverseContext);\n\n    var _this = possibleConstructorReturn(this, (ReverseContext.__proto__ || Object.getPrototypeOf(ReverseContext)).call(this));\n\n    _this.delta = delta;\n    _this.pipe = 'reverse';\n    return _this;\n  }\n\n  return ReverseContext;\n}(Context);\n\nvar isArray$1 = typeof Array.isArray === 'function' ? Array.isArray : function (a) {\n  return a instanceof Array;\n};\n\nvar diffFilter = function trivialMatchesDiffFilter(context) {\n  if (context.left === context.right) {\n    context.setResult(undefined).exit();\n    return;\n  }\n  if (typeof context.left === 'undefined') {\n    if (typeof context.right === 'function') {\n      throw new Error('functions are not supported');\n    }\n    context.setResult([context.right]).exit();\n    return;\n  }\n  if (typeof context.right === 'undefined') {\n    context.setResult([context.left, 0, 0]).exit();\n    return;\n  }\n  if (typeof context.left === 'function' || typeof context.right === 'function') {\n    throw new Error('functions are not supported');\n  }\n  context.leftType = context.left === null ? 'null' : _typeof(context.left);\n  context.rightType = context.right === null ? 'null' : _typeof(context.right);\n  if (context.leftType !== context.rightType) {\n    context.setResult([context.left, context.right]).exit();\n    return;\n  }\n  if (context.leftType === 'boolean' || context.leftType === 'number') {\n    context.setResult([context.left, context.right]).exit();\n    return;\n  }\n  if (context.leftType === 'object') {\n    context.leftIsArray = isArray$1(context.left);\n  }\n  if (context.rightType === 'object') {\n    context.rightIsArray = isArray$1(context.right);\n  }\n  if (context.leftIsArray !== context.rightIsArray) {\n    context.setResult([context.left, context.right]).exit();\n    return;\n  }\n\n  if (context.left instanceof RegExp) {\n    if (context.right instanceof RegExp) {\n      context.setResult([context.left.toString(), context.right.toString()]).exit();\n    } else {\n      context.setResult([context.left, context.right]).exit();\n    }\n  }\n};\ndiffFilter.filterName = 'trivial';\n\nvar patchFilter = function trivialMatchesPatchFilter(context) {\n  if (typeof context.delta === 'undefined') {\n    context.setResult(context.left).exit();\n    return;\n  }\n  context.nested = !isArray$1(context.delta);\n  if (context.nested) {\n    return;\n  }\n  if (context.delta.length === 1) {\n    context.setResult(context.delta[0]).exit();\n    return;\n  }\n  if (context.delta.length === 2) {\n    if (context.left instanceof RegExp) {\n      var regexArgs = /^\\/(.*)\\/([gimyu]+)$/.exec(context.delta[1]);\n      if (regexArgs) {\n        context.setResult(new RegExp(regexArgs[1], regexArgs[2])).exit();\n        return;\n      }\n    }\n    context.setResult(context.delta[1]).exit();\n    return;\n  }\n  if (context.delta.length === 3 && context.delta[2] === 0) {\n    context.setResult(undefined).exit();\n  }\n};\npatchFilter.filterName = 'trivial';\n\nvar reverseFilter = function trivialReferseFilter(context) {\n  if (typeof context.delta === 'undefined') {\n    context.setResult(context.delta).exit();\n    return;\n  }\n  context.nested = !isArray$1(context.delta);\n  if (context.nested) {\n    return;\n  }\n  if (context.delta.length === 1) {\n    context.setResult([context.delta[0], 0, 0]).exit();\n    return;\n  }\n  if (context.delta.length === 2) {\n    context.setResult([context.delta[1], context.delta[0]]).exit();\n    return;\n  }\n  if (context.delta.length === 3 && context.delta[2] === 0) {\n    context.setResult([context.delta[0]]).exit();\n  }\n};\nreverseFilter.filterName = 'trivial';\n\nfunction collectChildrenDiffFilter(context) {\n  if (!context || !context.children) {\n    return;\n  }\n  var length = context.children.length;\n  var child = void 0;\n  var result = context.result;\n  for (var index = 0; index < length; index++) {\n    child = context.children[index];\n    if (typeof child.result === 'undefined') {\n      continue;\n    }\n    result = result || {};\n    result[child.childName] = child.result;\n  }\n  if (result && context.leftIsArray) {\n    result._t = 'a';\n  }\n  context.setResult(result).exit();\n}\ncollectChildrenDiffFilter.filterName = 'collectChildren';\n\nfunction objectsDiffFilter(context) {\n  if (context.leftIsArray || context.leftType !== 'object') {\n    return;\n  }\n\n  var name = void 0;\n  var child = void 0;\n  var propertyFilter = context.options.propertyFilter;\n  for (name in context.left) {\n    if (!Object.prototype.hasOwnProperty.call(context.left, name)) {\n      continue;\n    }\n    if (propertyFilter && !propertyFilter(name, context)) {\n      continue;\n    }\n    child = new DiffContext(context.left[name], context.right[name]);\n    context.push(child, name);\n  }\n  for (name in context.right) {\n    if (!Object.prototype.hasOwnProperty.call(context.right, name)) {\n      continue;\n    }\n    if (propertyFilter && !propertyFilter(name, context)) {\n      continue;\n    }\n    if (typeof context.left[name] === 'undefined') {\n      child = new DiffContext(undefined, context.right[name]);\n      context.push(child, name);\n    }\n  }\n\n  if (!context.children || context.children.length === 0) {\n    context.setResult(undefined).exit();\n    return;\n  }\n  context.exit();\n}\nobjectsDiffFilter.filterName = 'objects';\n\nvar patchFilter$1 = function nestedPatchFilter(context) {\n  if (!context.nested) {\n    return;\n  }\n  if (context.delta._t) {\n    return;\n  }\n  var name = void 0;\n  var child = void 0;\n  for (name in context.delta) {\n    child = new PatchContext(context.left[name], context.delta[name]);\n    context.push(child, name);\n  }\n  context.exit();\n};\npatchFilter$1.filterName = 'objects';\n\nvar collectChildrenPatchFilter = function collectChildrenPatchFilter(context) {\n  if (!context || !context.children) {\n    return;\n  }\n  if (context.delta._t) {\n    return;\n  }\n  var length = context.children.length;\n  var child = void 0;\n  for (var index = 0; index < length; index++) {\n    child = context.children[index];\n    if (Object.prototype.hasOwnProperty.call(context.left, child.childName) && child.result === undefined) {\n      delete context.left[child.childName];\n    } else if (context.left[child.childName] !== child.result) {\n      context.left[child.childName] = child.result;\n    }\n  }\n  context.setResult(context.left).exit();\n};\ncollectChildrenPatchFilter.filterName = 'collectChildren';\n\nvar reverseFilter$1 = function nestedReverseFilter(context) {\n  if (!context.nested) {\n    return;\n  }\n  if (context.delta._t) {\n    return;\n  }\n  var name = void 0;\n  var child = void 0;\n  for (name in context.delta) {\n    child = new ReverseContext(context.delta[name]);\n    context.push(child, name);\n  }\n  context.exit();\n};\nreverseFilter$1.filterName = 'objects';\n\nfunction collectChildrenReverseFilter(context) {\n  if (!context || !context.children) {\n    return;\n  }\n  if (context.delta._t) {\n    return;\n  }\n  var length = context.children.length;\n  var child = void 0;\n  var delta = {};\n  for (var index = 0; index < length; index++) {\n    child = context.children[index];\n    if (delta[child.childName] !== child.result) {\n      delta[child.childName] = child.result;\n    }\n  }\n  context.setResult(delta).exit();\n}\ncollectChildrenReverseFilter.filterName = 'collectChildren';\n\n/*\n\nLCS implementation that supports arrays or strings\n\nreference: http://en.wikipedia.org/wiki/Longest_common_subsequence_problem\n\n*/\n\nvar defaultMatch = function defaultMatch(array1, array2, index1, index2) {\n  return array1[index1] === array2[index2];\n};\n\nvar lengthMatrix = function lengthMatrix(array1, array2, match, context) {\n  var len1 = array1.length;\n  var len2 = array2.length;\n  var x = void 0,\n      y = void 0;\n\n  // initialize empty matrix of len1+1 x len2+1\n  var matrix = [len1 + 1];\n  for (x = 0; x < len1 + 1; x++) {\n    matrix[x] = [len2 + 1];\n    for (y = 0; y < len2 + 1; y++) {\n      matrix[x][y] = 0;\n    }\n  }\n  matrix.match = match;\n  // save sequence lengths for each coordinate\n  for (x = 1; x < len1 + 1; x++) {\n    for (y = 1; y < len2 + 1; y++) {\n      if (match(array1, array2, x - 1, y - 1, context)) {\n        matrix[x][y] = matrix[x - 1][y - 1] + 1;\n      } else {\n        matrix[x][y] = Math.max(matrix[x - 1][y], matrix[x][y - 1]);\n      }\n    }\n  }\n  return matrix;\n};\n\nvar backtrack = function backtrack(matrix, array1, array2, index1, index2, context) {\n  if (index1 === 0 || index2 === 0) {\n    return {\n      sequence: [],\n      indices1: [],\n      indices2: []\n    };\n  }\n\n  if (matrix.match(array1, array2, index1 - 1, index2 - 1, context)) {\n    var subsequence = backtrack(matrix, array1, array2, index1 - 1, index2 - 1, context);\n    subsequence.sequence.push(array1[index1 - 1]);\n    subsequence.indices1.push(index1 - 1);\n    subsequence.indices2.push(index2 - 1);\n    return subsequence;\n  }\n\n  if (matrix[index1][index2 - 1] > matrix[index1 - 1][index2]) {\n    return backtrack(matrix, array1, array2, index1, index2 - 1, context);\n  } else {\n    return backtrack(matrix, array1, array2, index1 - 1, index2, context);\n  }\n};\n\nvar get$1 = function get(array1, array2, match, context) {\n  var innerContext = context || {};\n  var matrix = lengthMatrix(array1, array2, match || defaultMatch, innerContext);\n  var result = backtrack(matrix, array1, array2, array1.length, array2.length, innerContext);\n  if (typeof array1 === 'string' && typeof array2 === 'string') {\n    result.sequence = result.sequence.join('');\n  }\n  return result;\n};\n\nvar lcs = {\n  get: get$1\n};\n\nvar ARRAY_MOVE = 3;\n\nvar isArray$2 = typeof Array.isArray === 'function' ? Array.isArray : function (a) {\n  return a instanceof Array;\n};\n\nvar arrayIndexOf = typeof Array.prototype.indexOf === 'function' ? function (array, item) {\n  return array.indexOf(item);\n} : function (array, item) {\n  var length = array.length;\n  for (var i = 0; i < length; i++) {\n    if (array[i] === item) {\n      return i;\n    }\n  }\n  return -1;\n};\n\nfunction arraysHaveMatchByRef(array1, array2, len1, len2) {\n  for (var index1 = 0; index1 < len1; index1++) {\n    var val1 = array1[index1];\n    for (var index2 = 0; index2 < len2; index2++) {\n      var val2 = array2[index2];\n      if (index1 !== index2 && val1 === val2) {\n        return true;\n      }\n    }\n  }\n}\n\nfunction matchItems(array1, array2, index1, index2, context) {\n  var value1 = array1[index1];\n  var value2 = array2[index2];\n  if (value1 === value2) {\n    return true;\n  }\n  if ((typeof value1 === 'undefined' ? 'undefined' : _typeof(value1)) !== 'object' || (typeof value2 === 'undefined' ? 'undefined' : _typeof(value2)) !== 'object') {\n    return false;\n  }\n  var objectHash = context.objectHash;\n  if (!objectHash) {\n    // no way to match objects was provided, try match by position\n    return context.matchByPosition && index1 === index2;\n  }\n  var hash1 = void 0;\n  var hash2 = void 0;\n  if (typeof index1 === 'number') {\n    context.hashCache1 = context.hashCache1 || [];\n    hash1 = context.hashCache1[index1];\n    if (typeof hash1 === 'undefined') {\n      context.hashCache1[index1] = hash1 = objectHash(value1, index1);\n    }\n  } else {\n    hash1 = objectHash(value1);\n  }\n  if (typeof hash1 === 'undefined') {\n    return false;\n  }\n  if (typeof index2 === 'number') {\n    context.hashCache2 = context.hashCache2 || [];\n    hash2 = context.hashCache2[index2];\n    if (typeof hash2 === 'undefined') {\n      context.hashCache2[index2] = hash2 = objectHash(value2, index2);\n    }\n  } else {\n    hash2 = objectHash(value2);\n  }\n  if (typeof hash2 === 'undefined') {\n    return false;\n  }\n  return hash1 === hash2;\n}\n\nvar diffFilter$1 = function arraysDiffFilter(context) {\n  if (!context.leftIsArray) {\n    return;\n  }\n\n  var matchContext = {\n    objectHash: context.options && context.options.objectHash,\n    matchByPosition: context.options && context.options.matchByPosition\n  };\n  var commonHead = 0;\n  var commonTail = 0;\n  var index = void 0;\n  var index1 = void 0;\n  var index2 = void 0;\n  var array1 = context.left;\n  var array2 = context.right;\n  var len1 = array1.length;\n  var len2 = array2.length;\n\n  var child = void 0;\n\n  if (len1 > 0 && len2 > 0 && !matchContext.objectHash && typeof matchContext.matchByPosition !== 'boolean') {\n    matchContext.matchByPosition = !arraysHaveMatchByRef(array1, array2, len1, len2);\n  }\n\n  // separate common head\n  while (commonHead < len1 && commonHead < len2 && matchItems(array1, array2, commonHead, commonHead, matchContext)) {\n    index = commonHead;\n    child = new DiffContext(context.left[index], context.right[index]);\n    context.push(child, index);\n    commonHead++;\n  }\n  // separate common tail\n  while (commonTail + commonHead < len1 && commonTail + commonHead < len2 && matchItems(array1, array2, len1 - 1 - commonTail, len2 - 1 - commonTail, matchContext)) {\n    index1 = len1 - 1 - commonTail;\n    index2 = len2 - 1 - commonTail;\n    child = new DiffContext(context.left[index1], context.right[index2]);\n    context.push(child, index2);\n    commonTail++;\n  }\n  var result = void 0;\n  if (commonHead + commonTail === len1) {\n    if (len1 === len2) {\n      // arrays are identical\n      context.setResult(undefined).exit();\n      return;\n    }\n    // trivial case, a block (1 or more consecutive items) was added\n    result = result || {\n      _t: 'a'\n    };\n    for (index = commonHead; index < len2 - commonTail; index++) {\n      result[index] = [array2[index]];\n    }\n    context.setResult(result).exit();\n    return;\n  }\n  if (commonHead + commonTail === len2) {\n    // trivial case, a block (1 or more consecutive items) was removed\n    result = result || {\n      _t: 'a'\n    };\n    for (index = commonHead; index < len1 - commonTail; index++) {\n      result['_' + index] = [array1[index], 0, 0];\n    }\n    context.setResult(result).exit();\n    return;\n  }\n  // reset hash cache\n  delete matchContext.hashCache1;\n  delete matchContext.hashCache2;\n\n  // diff is not trivial, find the LCS (Longest Common Subsequence)\n  var trimmed1 = array1.slice(commonHead, len1 - commonTail);\n  var trimmed2 = array2.slice(commonHead, len2 - commonTail);\n  var seq = lcs.get(trimmed1, trimmed2, matchItems, matchContext);\n  var removedItems = [];\n  result = result || {\n    _t: 'a'\n  };\n  for (index = commonHead; index < len1 - commonTail; index++) {\n    if (arrayIndexOf(seq.indices1, index - commonHead) < 0) {\n      // removed\n      result['_' + index] = [array1[index], 0, 0];\n      removedItems.push(index);\n    }\n  }\n\n  var detectMove = true;\n  if (context.options && context.options.arrays && context.options.arrays.detectMove === false) {\n    detectMove = false;\n  }\n  var includeValueOnMove = false;\n  if (context.options && context.options.arrays && context.options.arrays.includeValueOnMove) {\n    includeValueOnMove = true;\n  }\n\n  var removedItemsLength = removedItems.length;\n  for (index = commonHead; index < len2 - commonTail; index++) {\n    var indexOnArray2 = arrayIndexOf(seq.indices2, index - commonHead);\n    if (indexOnArray2 < 0) {\n      // added, try to match with a removed item and register as position move\n      var isMove = false;\n      if (detectMove && removedItemsLength > 0) {\n        for (var removeItemIndex1 = 0; removeItemIndex1 < removedItemsLength; removeItemIndex1++) {\n          index1 = removedItems[removeItemIndex1];\n          if (matchItems(trimmed1, trimmed2, index1 - commonHead, index - commonHead, matchContext)) {\n            // store position move as: [originalValue, newPosition, ARRAY_MOVE]\n            result['_' + index1].splice(1, 2, index, ARRAY_MOVE);\n            if (!includeValueOnMove) {\n              // don't include moved value on diff, to save bytes\n              result['_' + index1][0] = '';\n            }\n\n            index2 = index;\n            child = new DiffContext(context.left[index1], context.right[index2]);\n            context.push(child, index2);\n            removedItems.splice(removeItemIndex1, 1);\n            isMove = true;\n            break;\n          }\n        }\n      }\n      if (!isMove) {\n        // added\n        result[index] = [array2[index]];\n      }\n    } else {\n      // match, do inner diff\n      index1 = seq.indices1[indexOnArray2] + commonHead;\n      index2 = seq.indices2[indexOnArray2] + commonHead;\n      child = new DiffContext(context.left[index1], context.right[index2]);\n      context.push(child, index2);\n    }\n  }\n\n  context.setResult(result).exit();\n};\ndiffFilter$1.filterName = 'arrays';\n\nvar compare = {\n  numerically: function numerically(a, b) {\n    return a - b;\n  },\n  numericallyBy: function numericallyBy(name) {\n    return function (a, b) {\n      return a[name] - b[name];\n    };\n  }\n};\n\nvar patchFilter$2 = function nestedPatchFilter(context) {\n  if (!context.nested) {\n    return;\n  }\n  if (context.delta._t !== 'a') {\n    return;\n  }\n  var index = void 0;\n  var index1 = void 0;\n\n  var delta = context.delta;\n  var array = context.left;\n\n  // first, separate removals, insertions and modifications\n  var toRemove = [];\n  var toInsert = [];\n  var toModify = [];\n  for (index in delta) {\n    if (index !== '_t') {\n      if (index[0] === '_') {\n        // removed item from original array\n        if (delta[index][2] === 0 || delta[index][2] === ARRAY_MOVE) {\n          toRemove.push(parseInt(index.slice(1), 10));\n        } else {\n          throw new Error('only removal or move can be applied at original array indices,' + (' invalid diff type: ' + delta[index][2]));\n        }\n      } else {\n        if (delta[index].length === 1) {\n          // added item at new array\n          toInsert.push({\n            index: parseInt(index, 10),\n            value: delta[index][0]\n          });\n        } else {\n          // modified item at new array\n          toModify.push({\n            index: parseInt(index, 10),\n            delta: delta[index]\n          });\n        }\n      }\n    }\n  }\n\n  // remove items, in reverse order to avoid sawing our own floor\n  toRemove = toRemove.sort(compare.numerically);\n  for (index = toRemove.length - 1; index >= 0; index--) {\n    index1 = toRemove[index];\n    var indexDiff = delta['_' + index1];\n    var removedValue = array.splice(index1, 1)[0];\n    if (indexDiff[2] === ARRAY_MOVE) {\n      // reinsert later\n      toInsert.push({\n        index: indexDiff[1],\n        value: removedValue\n      });\n    }\n  }\n\n  // insert items, in reverse order to avoid moving our own floor\n  toInsert = toInsert.sort(compare.numericallyBy('index'));\n  var toInsertLength = toInsert.length;\n  for (index = 0; index < toInsertLength; index++) {\n    var insertion = toInsert[index];\n    array.splice(insertion.index, 0, insertion.value);\n  }\n\n  // apply modifications\n  var toModifyLength = toModify.length;\n  var child = void 0;\n  if (toModifyLength > 0) {\n    for (index = 0; index < toModifyLength; index++) {\n      var modification = toModify[index];\n      child = new PatchContext(context.left[modification.index], modification.delta);\n      context.push(child, modification.index);\n    }\n  }\n\n  if (!context.children) {\n    context.setResult(context.left).exit();\n    return;\n  }\n  context.exit();\n};\npatchFilter$2.filterName = 'arrays';\n\nvar collectChildrenPatchFilter$1 = function collectChildrenPatchFilter(context) {\n  if (!context || !context.children) {\n    return;\n  }\n  if (context.delta._t !== 'a') {\n    return;\n  }\n  var length = context.children.length;\n  var child = void 0;\n  for (var index = 0; index < length; index++) {\n    child = context.children[index];\n    context.left[child.childName] = child.result;\n  }\n  context.setResult(context.left).exit();\n};\ncollectChildrenPatchFilter$1.filterName = 'arraysCollectChildren';\n\nvar reverseFilter$2 = function arraysReverseFilter(context) {\n  if (!context.nested) {\n    if (context.delta[2] === ARRAY_MOVE) {\n      context.newName = '_' + context.delta[1];\n      context.setResult([context.delta[0], parseInt(context.childName.substr(1), 10), ARRAY_MOVE]).exit();\n    }\n    return;\n  }\n  if (context.delta._t !== 'a') {\n    return;\n  }\n  var name = void 0;\n  var child = void 0;\n  for (name in context.delta) {\n    if (name === '_t') {\n      continue;\n    }\n    child = new ReverseContext(context.delta[name]);\n    context.push(child, name);\n  }\n  context.exit();\n};\nreverseFilter$2.filterName = 'arrays';\n\nvar reverseArrayDeltaIndex = function reverseArrayDeltaIndex(delta, index, itemDelta) {\n  if (typeof index === 'string' && index[0] === '_') {\n    return parseInt(index.substr(1), 10);\n  } else if (isArray$2(itemDelta) && itemDelta[2] === 0) {\n    return '_' + index;\n  }\n\n  var reverseIndex = +index;\n  for (var deltaIndex in delta) {\n    var deltaItem = delta[deltaIndex];\n    if (isArray$2(deltaItem)) {\n      if (deltaItem[2] === ARRAY_MOVE) {\n        var moveFromIndex = parseInt(deltaIndex.substr(1), 10);\n        var moveToIndex = deltaItem[1];\n        if (moveToIndex === +index) {\n          return moveFromIndex;\n        }\n        if (moveFromIndex <= reverseIndex && moveToIndex > reverseIndex) {\n          reverseIndex++;\n        } else if (moveFromIndex >= reverseIndex && moveToIndex < reverseIndex) {\n          reverseIndex--;\n        }\n      } else if (deltaItem[2] === 0) {\n        var deleteIndex = parseInt(deltaIndex.substr(1), 10);\n        if (deleteIndex <= reverseIndex) {\n          reverseIndex++;\n        }\n      } else if (deltaItem.length === 1 && deltaIndex <= reverseIndex) {\n        reverseIndex--;\n      }\n    }\n  }\n\n  return reverseIndex;\n};\n\nfunction collectChildrenReverseFilter$1(context) {\n  if (!context || !context.children) {\n    return;\n  }\n  if (context.delta._t !== 'a') {\n    return;\n  }\n  var length = context.children.length;\n  var child = void 0;\n  var delta = {\n    _t: 'a'\n  };\n\n  for (var index = 0; index < length; index++) {\n    child = context.children[index];\n    var name = child.newName;\n    if (typeof name === 'undefined') {\n      name = reverseArrayDeltaIndex(context.delta, child.childName, child.result);\n    }\n    if (delta[name] !== child.result) {\n      delta[name] = child.result;\n    }\n  }\n  context.setResult(delta).exit();\n}\ncollectChildrenReverseFilter$1.filterName = 'arraysCollectChildren';\n\nvar diffFilter$2 = function datesDiffFilter(context) {\n  if (context.left instanceof Date) {\n    if (context.right instanceof Date) {\n      if (context.left.getTime() !== context.right.getTime()) {\n        context.setResult([context.left, context.right]);\n      } else {\n        context.setResult(undefined);\n      }\n    } else {\n      context.setResult([context.left, context.right]);\n    }\n    context.exit();\n  } else if (context.right instanceof Date) {\n    context.setResult([context.left, context.right]).exit();\n  }\n};\ndiffFilter$2.filterName = 'dates';\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar diffMatchPatch = createCommonjsModule(function (module) {\nfunction diff_match_patch() {\r\n\r\n  // Defaults.\r\n  // Redefine these in your program to override the defaults.\r\n\r\n  // Number of seconds to map a diff before giving up (0 for infinity).\r\n  this.Diff_Timeout = 1.0;\r\n  // Cost of an empty edit operation in terms of edit characters.\r\n  this.Diff_EditCost = 4;\r\n  // At what point is no match declared (0.0 = perfection, 1.0 = very loose).\r\n  this.Match_Threshold = 0.5;\r\n  // How far to search for a match (0 = exact location, 1000+ = broad match).\r\n  // A match this many characters away from the expected location will add\r\n  // 1.0 to the score (0.0 is a perfect match).\r\n  this.Match_Distance = 1000;\r\n  // When deleting a large block of text (over ~64 characters), how close do\r\n  // the contents have to be to match the expected contents. (0.0 = perfection,\r\n  // 1.0 = very loose).  Note that Match_Threshold controls how closely the\r\n  // end points of a delete need to match.\r\n  this.Patch_DeleteThreshold = 0.5;\r\n  // Chunk size for context length.\r\n  this.Patch_Margin = 4;\r\n\r\n  // The number of bits in an int.\r\n  this.Match_MaxBits = 32;\r\n}\r\n\r\n\r\n//  DIFF FUNCTIONS\r\n\r\n\r\n/**\r\n * The data structure representing a diff is an array of tuples:\r\n * [[DIFF_DELETE, 'Hello'], [DIFF_INSERT, 'Goodbye'], [DIFF_EQUAL, ' world.']]\r\n * which means: delete 'Hello', add 'Goodbye' and keep ' world.'\r\n */\r\nvar DIFF_DELETE = -1;\r\nvar DIFF_INSERT = 1;\r\nvar DIFF_EQUAL = 0;\r\n\r\n/** @typedef {{0: number, 1: string}} */\r\ndiff_match_patch.prototype.diff_main = function(text1, text2, opt_checklines,\r\n    opt_deadline) {\r\n  // Set a deadline by which time the diff must be complete.\r\n  if (typeof opt_deadline == 'undefined') {\r\n    if (this.Diff_Timeout <= 0) {\r\n      opt_deadline = Number.MAX_VALUE;\r\n    } else {\r\n      opt_deadline = (new Date).getTime() + this.Diff_Timeout * 1000;\r\n    }\r\n  }\r\n  var deadline = opt_deadline;\r\n\r\n  // Check for null inputs.\r\n  if (text1 == null || text2 == null) {\r\n    throw new Error('Null input. (diff_main)');\r\n  }\r\n\r\n  // Check for equality (speedup).\r\n  if (text1 == text2) {\r\n    if (text1) {\r\n      return [[DIFF_EQUAL, text1]];\r\n    }\r\n    return [];\r\n  }\r\n\r\n  if (typeof opt_checklines == 'undefined') {\r\n    opt_checklines = true;\r\n  }\r\n  var checklines = opt_checklines;\r\n\r\n  // Trim off common prefix (speedup).\r\n  var commonlength = this.diff_commonPrefix(text1, text2);\r\n  var commonprefix = text1.substring(0, commonlength);\r\n  text1 = text1.substring(commonlength);\r\n  text2 = text2.substring(commonlength);\r\n\r\n  // Trim off common suffix (speedup).\r\n  commonlength = this.diff_commonSuffix(text1, text2);\r\n  var commonsuffix = text1.substring(text1.length - commonlength);\r\n  text1 = text1.substring(0, text1.length - commonlength);\r\n  text2 = text2.substring(0, text2.length - commonlength);\r\n\r\n  // Compute the diff on the middle block.\r\n  var diffs = this.diff_compute_(text1, text2, checklines, deadline);\r\n\r\n  // Restore the prefix and suffix.\r\n  if (commonprefix) {\r\n    diffs.unshift([DIFF_EQUAL, commonprefix]);\r\n  }\r\n  if (commonsuffix) {\r\n    diffs.push([DIFF_EQUAL, commonsuffix]);\r\n  }\r\n  this.diff_cleanupMerge(diffs);\r\n  return diffs;\r\n};\r\n\r\n\r\n/**\r\n * Find the differences between two texts.  Assumes that the texts do not\r\n * have any common prefix or suffix.\r\n * @param {string} text1 Old string to be diffed.\r\n * @param {string} text2 New string to be diffed.\r\n * @param {boolean} checklines Speedup flag.  If false, then don't run a\r\n *     line-level diff first to identify the changed areas.\r\n *     If true, then run a faster, slightly less optimal diff.\r\n * @param {number} deadline Time when the diff should be complete by.\r\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.diff_compute_ = function(text1, text2, checklines,\r\n    deadline) {\r\n  var diffs;\r\n\r\n  if (!text1) {\r\n    // Just add some text (speedup).\r\n    return [[DIFF_INSERT, text2]];\r\n  }\r\n\r\n  if (!text2) {\r\n    // Just delete some text (speedup).\r\n    return [[DIFF_DELETE, text1]];\r\n  }\r\n\r\n  var longtext = text1.length > text2.length ? text1 : text2;\r\n  var shorttext = text1.length > text2.length ? text2 : text1;\r\n  var i = longtext.indexOf(shorttext);\r\n  if (i != -1) {\r\n    // Shorter text is inside the longer text (speedup).\r\n    diffs = [[DIFF_INSERT, longtext.substring(0, i)],\r\n             [DIFF_EQUAL, shorttext],\r\n             [DIFF_INSERT, longtext.substring(i + shorttext.length)]];\r\n    // Swap insertions for deletions if diff is reversed.\r\n    if (text1.length > text2.length) {\r\n      diffs[0][0] = diffs[2][0] = DIFF_DELETE;\r\n    }\r\n    return diffs;\r\n  }\r\n\r\n  if (shorttext.length == 1) {\r\n    // Single character string.\r\n    // After the previous speedup, the character can't be an equality.\r\n    return [[DIFF_DELETE, text1], [DIFF_INSERT, text2]];\r\n  }\r\n\r\n  // Check to see if the problem can be split in two.\r\n  var hm = this.diff_halfMatch_(text1, text2);\r\n  if (hm) {\r\n    // A half-match was found, sort out the return data.\r\n    var text1_a = hm[0];\r\n    var text1_b = hm[1];\r\n    var text2_a = hm[2];\r\n    var text2_b = hm[3];\r\n    var mid_common = hm[4];\r\n    // Send both pairs off for separate processing.\r\n    var diffs_a = this.diff_main(text1_a, text2_a, checklines, deadline);\r\n    var diffs_b = this.diff_main(text1_b, text2_b, checklines, deadline);\r\n    // Merge the results.\r\n    return diffs_a.concat([[DIFF_EQUAL, mid_common]], diffs_b);\r\n  }\r\n\r\n  if (checklines && text1.length > 100 && text2.length > 100) {\r\n    return this.diff_lineMode_(text1, text2, deadline);\r\n  }\r\n\r\n  return this.diff_bisect_(text1, text2, deadline);\r\n};\r\n\r\n\r\n/**\r\n * Do a quick line-level diff on both strings, then rediff the parts for\r\n * greater accuracy.\r\n * This speedup can produce non-minimal diffs.\r\n * @param {string} text1 Old string to be diffed.\r\n * @param {string} text2 New string to be diffed.\r\n * @param {number} deadline Time when the diff should be complete by.\r\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.diff_lineMode_ = function(text1, text2, deadline) {\r\n  // Scan the text on a line-by-line basis first.\r\n  var a = this.diff_linesToChars_(text1, text2);\r\n  text1 = a.chars1;\r\n  text2 = a.chars2;\r\n  var linearray = a.lineArray;\r\n\r\n  var diffs = this.diff_main(text1, text2, false, deadline);\r\n\r\n  // Convert the diff back to original text.\r\n  this.diff_charsToLines_(diffs, linearray);\r\n  // Eliminate freak matches (e.g. blank lines)\r\n  this.diff_cleanupSemantic(diffs);\r\n\r\n  // Rediff any replacement blocks, this time character-by-character.\r\n  // Add a dummy entry at the end.\r\n  diffs.push([DIFF_EQUAL, '']);\r\n  var pointer = 0;\r\n  var count_delete = 0;\r\n  var count_insert = 0;\r\n  var text_delete = '';\r\n  var text_insert = '';\r\n  while (pointer < diffs.length) {\r\n    switch (diffs[pointer][0]) {\r\n      case DIFF_INSERT:\r\n        count_insert++;\r\n        text_insert += diffs[pointer][1];\r\n        break;\r\n      case DIFF_DELETE:\r\n        count_delete++;\r\n        text_delete += diffs[pointer][1];\r\n        break;\r\n      case DIFF_EQUAL:\r\n        // Upon reaching an equality, check for prior redundancies.\r\n        if (count_delete >= 1 && count_insert >= 1) {\r\n          // Delete the offending records and add the merged ones.\r\n          diffs.splice(pointer - count_delete - count_insert,\r\n                       count_delete + count_insert);\r\n          pointer = pointer - count_delete - count_insert;\r\n          var a = this.diff_main(text_delete, text_insert, false, deadline);\r\n          for (var j = a.length - 1; j >= 0; j--) {\r\n            diffs.splice(pointer, 0, a[j]);\r\n          }\r\n          pointer = pointer + a.length;\r\n        }\r\n        count_insert = 0;\r\n        count_delete = 0;\r\n        text_delete = '';\r\n        text_insert = '';\r\n        break;\r\n    }\r\n    pointer++;\r\n  }\r\n  diffs.pop();  // Remove the dummy entry at the end.\r\n\r\n  return diffs;\r\n};\r\n\r\n\r\n/**\r\n * Find the 'middle snake' of a diff, split the problem in two\r\n * and return the recursively constructed diff.\r\n * See Myers 1986 paper: An O(ND) Difference Algorithm and Its Variations.\r\n * @param {string} text1 Old string to be diffed.\r\n * @param {string} text2 New string to be diffed.\r\n * @param {number} deadline Time at which to bail if not yet complete.\r\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.diff_bisect_ = function(text1, text2, deadline) {\r\n  // Cache the text lengths to prevent multiple calls.\r\n  var text1_length = text1.length;\r\n  var text2_length = text2.length;\r\n  var max_d = Math.ceil((text1_length + text2_length) / 2);\r\n  var v_offset = max_d;\r\n  var v_length = 2 * max_d;\r\n  var v1 = new Array(v_length);\r\n  var v2 = new Array(v_length);\r\n  // Setting all elements to -1 is faster in Chrome & Firefox than mixing\r\n  // integers and undefined.\r\n  for (var x = 0; x < v_length; x++) {\r\n    v1[x] = -1;\r\n    v2[x] = -1;\r\n  }\r\n  v1[v_offset + 1] = 0;\r\n  v2[v_offset + 1] = 0;\r\n  var delta = text1_length - text2_length;\r\n  // If the total number of characters is odd, then the front path will collide\r\n  // with the reverse path.\r\n  var front = (delta % 2 != 0);\r\n  // Offsets for start and end of k loop.\r\n  // Prevents mapping of space beyond the grid.\r\n  var k1start = 0;\r\n  var k1end = 0;\r\n  var k2start = 0;\r\n  var k2end = 0;\r\n  for (var d = 0; d < max_d; d++) {\r\n    // Bail out if deadline is reached.\r\n    if ((new Date()).getTime() > deadline) {\r\n      break;\r\n    }\r\n\r\n    // Walk the front path one step.\r\n    for (var k1 = -d + k1start; k1 <= d - k1end; k1 += 2) {\r\n      var k1_offset = v_offset + k1;\r\n      var x1;\r\n      if (k1 == -d || (k1 != d && v1[k1_offset - 1] < v1[k1_offset + 1])) {\r\n        x1 = v1[k1_offset + 1];\r\n      } else {\r\n        x1 = v1[k1_offset - 1] + 1;\r\n      }\r\n      var y1 = x1 - k1;\r\n      while (x1 < text1_length && y1 < text2_length &&\r\n             text1.charAt(x1) == text2.charAt(y1)) {\r\n        x1++;\r\n        y1++;\r\n      }\r\n      v1[k1_offset] = x1;\r\n      if (x1 > text1_length) {\r\n        // Ran off the right of the graph.\r\n        k1end += 2;\r\n      } else if (y1 > text2_length) {\r\n        // Ran off the bottom of the graph.\r\n        k1start += 2;\r\n      } else if (front) {\r\n        var k2_offset = v_offset + delta - k1;\r\n        if (k2_offset >= 0 && k2_offset < v_length && v2[k2_offset] != -1) {\r\n          // Mirror x2 onto top-left coordinate system.\r\n          var x2 = text1_length - v2[k2_offset];\r\n          if (x1 >= x2) {\r\n            // Overlap detected.\r\n            return this.diff_bisectSplit_(text1, text2, x1, y1, deadline);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // Walk the reverse path one step.\r\n    for (var k2 = -d + k2start; k2 <= d - k2end; k2 += 2) {\r\n      var k2_offset = v_offset + k2;\r\n      var x2;\r\n      if (k2 == -d || (k2 != d && v2[k2_offset - 1] < v2[k2_offset + 1])) {\r\n        x2 = v2[k2_offset + 1];\r\n      } else {\r\n        x2 = v2[k2_offset - 1] + 1;\r\n      }\r\n      var y2 = x2 - k2;\r\n      while (x2 < text1_length && y2 < text2_length &&\r\n             text1.charAt(text1_length - x2 - 1) ==\r\n             text2.charAt(text2_length - y2 - 1)) {\r\n        x2++;\r\n        y2++;\r\n      }\r\n      v2[k2_offset] = x2;\r\n      if (x2 > text1_length) {\r\n        // Ran off the left of the graph.\r\n        k2end += 2;\r\n      } else if (y2 > text2_length) {\r\n        // Ran off the top of the graph.\r\n        k2start += 2;\r\n      } else if (!front) {\r\n        var k1_offset = v_offset + delta - k2;\r\n        if (k1_offset >= 0 && k1_offset < v_length && v1[k1_offset] != -1) {\r\n          var x1 = v1[k1_offset];\r\n          var y1 = v_offset + x1 - k1_offset;\r\n          // Mirror x2 onto top-left coordinate system.\r\n          x2 = text1_length - x2;\r\n          if (x1 >= x2) {\r\n            // Overlap detected.\r\n            return this.diff_bisectSplit_(text1, text2, x1, y1, deadline);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  // Diff took too long and hit the deadline or\r\n  // number of diffs equals number of characters, no commonality at all.\r\n  return [[DIFF_DELETE, text1], [DIFF_INSERT, text2]];\r\n};\r\n\r\n\r\n/**\r\n * Given the location of the 'middle snake', split the diff in two parts\r\n * and recurse.\r\n * @param {string} text1 Old string to be diffed.\r\n * @param {string} text2 New string to be diffed.\r\n * @param {number} x Index of split point in text1.\r\n * @param {number} y Index of split point in text2.\r\n * @param {number} deadline Time at which to bail if not yet complete.\r\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.diff_bisectSplit_ = function(text1, text2, x, y,\r\n    deadline) {\r\n  var text1a = text1.substring(0, x);\r\n  var text2a = text2.substring(0, y);\r\n  var text1b = text1.substring(x);\r\n  var text2b = text2.substring(y);\r\n\r\n  // Compute both diffs serially.\r\n  var diffs = this.diff_main(text1a, text2a, false, deadline);\r\n  var diffsb = this.diff_main(text1b, text2b, false, deadline);\r\n\r\n  return diffs.concat(diffsb);\r\n};\r\n\r\n\r\n/**\r\n * Split two texts into an array of strings.  Reduce the texts to a string of\r\n * hashes where each Unicode character represents one line.\r\n * @param {string} text1 First string.\r\n * @param {string} text2 Second string.\r\n * @return {{chars1: string, chars2: string, lineArray: !Array.<string>}}\r\n *     An object containing the encoded text1, the encoded text2 and\r\n *     the array of unique strings.\r\n *     The zeroth element of the array of unique strings is intentionally blank.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.diff_linesToChars_ = function(text1, text2) {\r\n  var lineArray = [];  // e.g. lineArray[4] == 'Hello\\n'\r\n  var lineHash = {};   // e.g. lineHash['Hello\\n'] == 4\r\n\r\n  // '\\x00' is a valid character, but various debuggers don't like it.\r\n  // So we'll insert a junk entry to avoid generating a null character.\r\n  lineArray[0] = '';\r\n\r\n  /**\r\n   * Split a text into an array of strings.  Reduce the texts to a string of\r\n   * hashes where each Unicode character represents one line.\r\n   * Modifies linearray and linehash through being a closure.\r\n   * @param {string} text String to encode.\r\n   * @return {string} Encoded string.\r\n   * @private\r\n   */\r\n  function diff_linesToCharsMunge_(text) {\r\n    var chars = '';\r\n    // Walk the text, pulling out a substring for each line.\r\n    // text.split('\\n') would would temporarily double our memory footprint.\r\n    // Modifying text would create many large strings to garbage collect.\r\n    var lineStart = 0;\r\n    var lineEnd = -1;\r\n    // Keeping our own length variable is faster than looking it up.\r\n    var lineArrayLength = lineArray.length;\r\n    while (lineEnd < text.length - 1) {\r\n      lineEnd = text.indexOf('\\n', lineStart);\r\n      if (lineEnd == -1) {\r\n        lineEnd = text.length - 1;\r\n      }\r\n      var line = text.substring(lineStart, lineEnd + 1);\r\n      lineStart = lineEnd + 1;\r\n\r\n      if (lineHash.hasOwnProperty ? lineHash.hasOwnProperty(line) :\r\n          (lineHash[line] !== undefined)) {\r\n        chars += String.fromCharCode(lineHash[line]);\r\n      } else {\r\n        chars += String.fromCharCode(lineArrayLength);\r\n        lineHash[line] = lineArrayLength;\r\n        lineArray[lineArrayLength++] = line;\r\n      }\r\n    }\r\n    return chars;\r\n  }\r\n\r\n  var chars1 = diff_linesToCharsMunge_(text1);\r\n  var chars2 = diff_linesToCharsMunge_(text2);\r\n  return {chars1: chars1, chars2: chars2, lineArray: lineArray};\r\n};\r\n\r\n\r\n/**\r\n * Rehydrate the text in a diff from a string of line hashes to real lines of\r\n * text.\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n * @param {!Array.<string>} lineArray Array of unique strings.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.diff_charsToLines_ = function(diffs, lineArray) {\r\n  for (var x = 0; x < diffs.length; x++) {\r\n    var chars = diffs[x][1];\r\n    var text = [];\r\n    for (var y = 0; y < chars.length; y++) {\r\n      text[y] = lineArray[chars.charCodeAt(y)];\r\n    }\r\n    diffs[x][1] = text.join('');\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * Determine the common prefix of two strings.\r\n * @param {string} text1 First string.\r\n * @param {string} text2 Second string.\r\n * @return {number} The number of characters common to the start of each\r\n *     string.\r\n */\r\ndiff_match_patch.prototype.diff_commonPrefix = function(text1, text2) {\r\n  // Quick check for common null cases.\r\n  if (!text1 || !text2 || text1.charAt(0) != text2.charAt(0)) {\r\n    return 0;\r\n  }\r\n  // Binary search.\r\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\r\n  var pointermin = 0;\r\n  var pointermax = Math.min(text1.length, text2.length);\r\n  var pointermid = pointermax;\r\n  var pointerstart = 0;\r\n  while (pointermin < pointermid) {\r\n    if (text1.substring(pointerstart, pointermid) ==\r\n        text2.substring(pointerstart, pointermid)) {\r\n      pointermin = pointermid;\r\n      pointerstart = pointermin;\r\n    } else {\r\n      pointermax = pointermid;\r\n    }\r\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\r\n  }\r\n  return pointermid;\r\n};\r\n\r\n\r\n/**\r\n * Determine the common suffix of two strings.\r\n * @param {string} text1 First string.\r\n * @param {string} text2 Second string.\r\n * @return {number} The number of characters common to the end of each string.\r\n */\r\ndiff_match_patch.prototype.diff_commonSuffix = function(text1, text2) {\r\n  // Quick check for common null cases.\r\n  if (!text1 || !text2 ||\r\n      text1.charAt(text1.length - 1) != text2.charAt(text2.length - 1)) {\r\n    return 0;\r\n  }\r\n  // Binary search.\r\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\r\n  var pointermin = 0;\r\n  var pointermax = Math.min(text1.length, text2.length);\r\n  var pointermid = pointermax;\r\n  var pointerend = 0;\r\n  while (pointermin < pointermid) {\r\n    if (text1.substring(text1.length - pointermid, text1.length - pointerend) ==\r\n        text2.substring(text2.length - pointermid, text2.length - pointerend)) {\r\n      pointermin = pointermid;\r\n      pointerend = pointermin;\r\n    } else {\r\n      pointermax = pointermid;\r\n    }\r\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\r\n  }\r\n  return pointermid;\r\n};\r\n\r\n\r\n/**\r\n * Determine if the suffix of one string is the prefix of another.\r\n * @param {string} text1 First string.\r\n * @param {string} text2 Second string.\r\n * @return {number} The number of characters common to the end of the first\r\n *     string and the start of the second string.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.diff_commonOverlap_ = function(text1, text2) {\r\n  // Cache the text lengths to prevent multiple calls.\r\n  var text1_length = text1.length;\r\n  var text2_length = text2.length;\r\n  // Eliminate the null case.\r\n  if (text1_length == 0 || text2_length == 0) {\r\n    return 0;\r\n  }\r\n  // Truncate the longer string.\r\n  if (text1_length > text2_length) {\r\n    text1 = text1.substring(text1_length - text2_length);\r\n  } else if (text1_length < text2_length) {\r\n    text2 = text2.substring(0, text1_length);\r\n  }\r\n  var text_length = Math.min(text1_length, text2_length);\r\n  // Quick check for the worst case.\r\n  if (text1 == text2) {\r\n    return text_length;\r\n  }\r\n\r\n  // Start by looking for a single character match\r\n  // and increase length until no match is found.\r\n  // Performance analysis: http://neil.fraser.name/news/2010/11/04/\r\n  var best = 0;\r\n  var length = 1;\r\n  while (true) {\r\n    var pattern = text1.substring(text_length - length);\r\n    var found = text2.indexOf(pattern);\r\n    if (found == -1) {\r\n      return best;\r\n    }\r\n    length += found;\r\n    if (found == 0 || text1.substring(text_length - length) ==\r\n        text2.substring(0, length)) {\r\n      best = length;\r\n      length++;\r\n    }\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * Do the two texts share a substring which is at least half the length of the\r\n * longer text?\r\n * This speedup can produce non-minimal diffs.\r\n * @param {string} text1 First string.\r\n * @param {string} text2 Second string.\r\n * @return {Array.<string>} Five element Array, containing the prefix of\r\n *     text1, the suffix of text1, the prefix of text2, the suffix of\r\n *     text2 and the common middle.  Or null if there was no match.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.diff_halfMatch_ = function(text1, text2) {\r\n  if (this.Diff_Timeout <= 0) {\r\n    // Don't risk returning a non-optimal diff if we have unlimited time.\r\n    return null;\r\n  }\r\n  var longtext = text1.length > text2.length ? text1 : text2;\r\n  var shorttext = text1.length > text2.length ? text2 : text1;\r\n  if (longtext.length < 4 || shorttext.length * 2 < longtext.length) {\r\n    return null;  // Pointless.\r\n  }\r\n  var dmp = this;  // 'this' becomes 'window' in a closure.\r\n\r\n  /**\r\n   * Does a substring of shorttext exist within longtext such that the substring\r\n   * is at least half the length of longtext?\r\n   * Closure, but does not reference any external variables.\r\n   * @param {string} longtext Longer string.\r\n   * @param {string} shorttext Shorter string.\r\n   * @param {number} i Start index of quarter length substring within longtext.\r\n   * @return {Array.<string>} Five element Array, containing the prefix of\r\n   *     longtext, the suffix of longtext, the prefix of shorttext, the suffix\r\n   *     of shorttext and the common middle.  Or null if there was no match.\r\n   * @private\r\n   */\r\n  function diff_halfMatchI_(longtext, shorttext, i) {\r\n    // Start with a 1/4 length substring at position i as a seed.\r\n    var seed = longtext.substring(i, i + Math.floor(longtext.length / 4));\r\n    var j = -1;\r\n    var best_common = '';\r\n    var best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b;\r\n    while ((j = shorttext.indexOf(seed, j + 1)) != -1) {\r\n      var prefixLength = dmp.diff_commonPrefix(longtext.substring(i),\r\n                                               shorttext.substring(j));\r\n      var suffixLength = dmp.diff_commonSuffix(longtext.substring(0, i),\r\n                                               shorttext.substring(0, j));\r\n      if (best_common.length < suffixLength + prefixLength) {\r\n        best_common = shorttext.substring(j - suffixLength, j) +\r\n            shorttext.substring(j, j + prefixLength);\r\n        best_longtext_a = longtext.substring(0, i - suffixLength);\r\n        best_longtext_b = longtext.substring(i + prefixLength);\r\n        best_shorttext_a = shorttext.substring(0, j - suffixLength);\r\n        best_shorttext_b = shorttext.substring(j + prefixLength);\r\n      }\r\n    }\r\n    if (best_common.length * 2 >= longtext.length) {\r\n      return [best_longtext_a, best_longtext_b,\r\n              best_shorttext_a, best_shorttext_b, best_common];\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  // First check if the second quarter is the seed for a half-match.\r\n  var hm1 = diff_halfMatchI_(longtext, shorttext,\r\n                             Math.ceil(longtext.length / 4));\r\n  // Check again based on the third quarter.\r\n  var hm2 = diff_halfMatchI_(longtext, shorttext,\r\n                             Math.ceil(longtext.length / 2));\r\n  var hm;\r\n  if (!hm1 && !hm2) {\r\n    return null;\r\n  } else if (!hm2) {\r\n    hm = hm1;\r\n  } else if (!hm1) {\r\n    hm = hm2;\r\n  } else {\r\n    // Both matched.  Select the longest.\r\n    hm = hm1[4].length > hm2[4].length ? hm1 : hm2;\r\n  }\r\n\r\n  // A half-match was found, sort out the return data.\r\n  var text1_a, text1_b, text2_a, text2_b;\r\n  if (text1.length > text2.length) {\r\n    text1_a = hm[0];\r\n    text1_b = hm[1];\r\n    text2_a = hm[2];\r\n    text2_b = hm[3];\r\n  } else {\r\n    text2_a = hm[0];\r\n    text2_b = hm[1];\r\n    text1_a = hm[2];\r\n    text1_b = hm[3];\r\n  }\r\n  var mid_common = hm[4];\r\n  return [text1_a, text1_b, text2_a, text2_b, mid_common];\r\n};\r\n\r\n\r\n/**\r\n * Reduce the number of edits by eliminating semantically trivial equalities.\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n */\r\ndiff_match_patch.prototype.diff_cleanupSemantic = function(diffs) {\r\n  var changes = false;\r\n  var equalities = [];  // Stack of indices where equalities are found.\r\n  var equalitiesLength = 0;  // Keeping our own length var is faster in JS.\r\n  /** @type {?string} */\r\n  var lastequality = null;\r\n  // Always equal to diffs[equalities[equalitiesLength - 1]][1]\r\n  var pointer = 0;  // Index of current position.\r\n  // Number of characters that changed prior to the equality.\r\n  var length_insertions1 = 0;\r\n  var length_deletions1 = 0;\r\n  // Number of characters that changed after the equality.\r\n  var length_insertions2 = 0;\r\n  var length_deletions2 = 0;\r\n  while (pointer < diffs.length) {\r\n    if (diffs[pointer][0] == DIFF_EQUAL) {  // Equality found.\r\n      equalities[equalitiesLength++] = pointer;\r\n      length_insertions1 = length_insertions2;\r\n      length_deletions1 = length_deletions2;\r\n      length_insertions2 = 0;\r\n      length_deletions2 = 0;\r\n      lastequality = diffs[pointer][1];\r\n    } else {  // An insertion or deletion.\r\n      if (diffs[pointer][0] == DIFF_INSERT) {\r\n        length_insertions2 += diffs[pointer][1].length;\r\n      } else {\r\n        length_deletions2 += diffs[pointer][1].length;\r\n      }\r\n      // Eliminate an equality that is smaller or equal to the edits on both\r\n      // sides of it.\r\n      if (lastequality && (lastequality.length <=\r\n          Math.max(length_insertions1, length_deletions1)) &&\r\n          (lastequality.length <= Math.max(length_insertions2,\r\n                                           length_deletions2))) {\r\n        // Duplicate record.\r\n        diffs.splice(equalities[equalitiesLength - 1], 0,\r\n                     [DIFF_DELETE, lastequality]);\r\n        // Change second copy to insert.\r\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT;\r\n        // Throw away the equality we just deleted.\r\n        equalitiesLength--;\r\n        // Throw away the previous equality (it needs to be reevaluated).\r\n        equalitiesLength--;\r\n        pointer = equalitiesLength > 0 ? equalities[equalitiesLength - 1] : -1;\r\n        length_insertions1 = 0;  // Reset the counters.\r\n        length_deletions1 = 0;\r\n        length_insertions2 = 0;\r\n        length_deletions2 = 0;\r\n        lastequality = null;\r\n        changes = true;\r\n      }\r\n    }\r\n    pointer++;\r\n  }\r\n\r\n  // Normalize the diff.\r\n  if (changes) {\r\n    this.diff_cleanupMerge(diffs);\r\n  }\r\n  this.diff_cleanupSemanticLossless(diffs);\r\n\r\n  // Find any overlaps between deletions and insertions.\r\n  // e.g: <del>abcxxx</del><ins>xxxdef</ins>\r\n  //   -> <del>abc</del>xxx<ins>def</ins>\r\n  // e.g: <del>xxxabc</del><ins>defxxx</ins>\r\n  //   -> <ins>def</ins>xxx<del>abc</del>\r\n  // Only extract an overlap if it is as big as the edit ahead or behind it.\r\n  pointer = 1;\r\n  while (pointer < diffs.length) {\r\n    if (diffs[pointer - 1][0] == DIFF_DELETE &&\r\n        diffs[pointer][0] == DIFF_INSERT) {\r\n      var deletion = diffs[pointer - 1][1];\r\n      var insertion = diffs[pointer][1];\r\n      var overlap_length1 = this.diff_commonOverlap_(deletion, insertion);\r\n      var overlap_length2 = this.diff_commonOverlap_(insertion, deletion);\r\n      if (overlap_length1 >= overlap_length2) {\r\n        if (overlap_length1 >= deletion.length / 2 ||\r\n            overlap_length1 >= insertion.length / 2) {\r\n          // Overlap found.  Insert an equality and trim the surrounding edits.\r\n          diffs.splice(pointer, 0,\r\n              [DIFF_EQUAL, insertion.substring(0, overlap_length1)]);\r\n          diffs[pointer - 1][1] =\r\n              deletion.substring(0, deletion.length - overlap_length1);\r\n          diffs[pointer + 1][1] = insertion.substring(overlap_length1);\r\n          pointer++;\r\n        }\r\n      } else {\r\n        if (overlap_length2 >= deletion.length / 2 ||\r\n            overlap_length2 >= insertion.length / 2) {\r\n          // Reverse overlap found.\r\n          // Insert an equality and swap and trim the surrounding edits.\r\n          diffs.splice(pointer, 0,\r\n              [DIFF_EQUAL, deletion.substring(0, overlap_length2)]);\r\n          diffs[pointer - 1][0] = DIFF_INSERT;\r\n          diffs[pointer - 1][1] =\r\n              insertion.substring(0, insertion.length - overlap_length2);\r\n          diffs[pointer + 1][0] = DIFF_DELETE;\r\n          diffs[pointer + 1][1] =\r\n              deletion.substring(overlap_length2);\r\n          pointer++;\r\n        }\r\n      }\r\n      pointer++;\r\n    }\r\n    pointer++;\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * Look for single edits surrounded on both sides by equalities\r\n * which can be shifted sideways to align the edit to a word boundary.\r\n * e.g: The c<ins>at c</ins>ame. -> The <ins>cat </ins>came.\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n */\r\ndiff_match_patch.prototype.diff_cleanupSemanticLossless = function(diffs) {\r\n  /**\r\n   * Given two strings, compute a score representing whether the internal\r\n   * boundary falls on logical boundaries.\r\n   * Scores range from 6 (best) to 0 (worst).\r\n   * Closure, but does not reference any external variables.\r\n   * @param {string} one First string.\r\n   * @param {string} two Second string.\r\n   * @return {number} The score.\r\n   * @private\r\n   */\r\n  function diff_cleanupSemanticScore_(one, two) {\r\n    if (!one || !two) {\r\n      // Edges are the best.\r\n      return 6;\r\n    }\r\n\r\n    // Each port of this function behaves slightly differently due to\r\n    // subtle differences in each language's definition of things like\r\n    // 'whitespace'.  Since this function's purpose is largely cosmetic,\r\n    // the choice has been made to use each language's native features\r\n    // rather than force total conformity.\r\n    var char1 = one.charAt(one.length - 1);\r\n    var char2 = two.charAt(0);\r\n    var nonAlphaNumeric1 = char1.match(diff_match_patch.nonAlphaNumericRegex_);\r\n    var nonAlphaNumeric2 = char2.match(diff_match_patch.nonAlphaNumericRegex_);\r\n    var whitespace1 = nonAlphaNumeric1 &&\r\n        char1.match(diff_match_patch.whitespaceRegex_);\r\n    var whitespace2 = nonAlphaNumeric2 &&\r\n        char2.match(diff_match_patch.whitespaceRegex_);\r\n    var lineBreak1 = whitespace1 &&\r\n        char1.match(diff_match_patch.linebreakRegex_);\r\n    var lineBreak2 = whitespace2 &&\r\n        char2.match(diff_match_patch.linebreakRegex_);\r\n    var blankLine1 = lineBreak1 &&\r\n        one.match(diff_match_patch.blanklineEndRegex_);\r\n    var blankLine2 = lineBreak2 &&\r\n        two.match(diff_match_patch.blanklineStartRegex_);\r\n\r\n    if (blankLine1 || blankLine2) {\r\n      // Five points for blank lines.\r\n      return 5;\r\n    } else if (lineBreak1 || lineBreak2) {\r\n      // Four points for line breaks.\r\n      return 4;\r\n    } else if (nonAlphaNumeric1 && !whitespace1 && whitespace2) {\r\n      // Three points for end of sentences.\r\n      return 3;\r\n    } else if (whitespace1 || whitespace2) {\r\n      // Two points for whitespace.\r\n      return 2;\r\n    } else if (nonAlphaNumeric1 || nonAlphaNumeric2) {\r\n      // One point for non-alphanumeric.\r\n      return 1;\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  var pointer = 1;\r\n  // Intentionally ignore the first and last element (don't need checking).\r\n  while (pointer < diffs.length - 1) {\r\n    if (diffs[pointer - 1][0] == DIFF_EQUAL &&\r\n        diffs[pointer + 1][0] == DIFF_EQUAL) {\r\n      // This is a single edit surrounded by equalities.\r\n      var equality1 = diffs[pointer - 1][1];\r\n      var edit = diffs[pointer][1];\r\n      var equality2 = diffs[pointer + 1][1];\r\n\r\n      // First, shift the edit as far left as possible.\r\n      var commonOffset = this.diff_commonSuffix(equality1, edit);\r\n      if (commonOffset) {\r\n        var commonString = edit.substring(edit.length - commonOffset);\r\n        equality1 = equality1.substring(0, equality1.length - commonOffset);\r\n        edit = commonString + edit.substring(0, edit.length - commonOffset);\r\n        equality2 = commonString + equality2;\r\n      }\r\n\r\n      // Second, step character by character right, looking for the best fit.\r\n      var bestEquality1 = equality1;\r\n      var bestEdit = edit;\r\n      var bestEquality2 = equality2;\r\n      var bestScore = diff_cleanupSemanticScore_(equality1, edit) +\r\n          diff_cleanupSemanticScore_(edit, equality2);\r\n      while (edit.charAt(0) === equality2.charAt(0)) {\r\n        equality1 += edit.charAt(0);\r\n        edit = edit.substring(1) + equality2.charAt(0);\r\n        equality2 = equality2.substring(1);\r\n        var score = diff_cleanupSemanticScore_(equality1, edit) +\r\n            diff_cleanupSemanticScore_(edit, equality2);\r\n        // The >= encourages trailing rather than leading whitespace on edits.\r\n        if (score >= bestScore) {\r\n          bestScore = score;\r\n          bestEquality1 = equality1;\r\n          bestEdit = edit;\r\n          bestEquality2 = equality2;\r\n        }\r\n      }\r\n\r\n      if (diffs[pointer - 1][1] != bestEquality1) {\r\n        // We have an improvement, save it back to the diff.\r\n        if (bestEquality1) {\r\n          diffs[pointer - 1][1] = bestEquality1;\r\n        } else {\r\n          diffs.splice(pointer - 1, 1);\r\n          pointer--;\r\n        }\r\n        diffs[pointer][1] = bestEdit;\r\n        if (bestEquality2) {\r\n          diffs[pointer + 1][1] = bestEquality2;\r\n        } else {\r\n          diffs.splice(pointer + 1, 1);\r\n          pointer--;\r\n        }\r\n      }\r\n    }\r\n    pointer++;\r\n  }\r\n};\r\n\r\n// Define some regex patterns for matching boundaries.\r\ndiff_match_patch.nonAlphaNumericRegex_ = /[^a-zA-Z0-9]/;\r\ndiff_match_patch.whitespaceRegex_ = /\\s/;\r\ndiff_match_patch.linebreakRegex_ = /[\\r\\n]/;\r\ndiff_match_patch.blanklineEndRegex_ = /\\n\\r?\\n$/;\r\ndiff_match_patch.blanklineStartRegex_ = /^\\r?\\n\\r?\\n/;\r\n\r\n/**\r\n * Reduce the number of edits by eliminating operationally trivial equalities.\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n */\r\ndiff_match_patch.prototype.diff_cleanupEfficiency = function(diffs) {\r\n  var changes = false;\r\n  var equalities = [];  // Stack of indices where equalities are found.\r\n  var equalitiesLength = 0;  // Keeping our own length var is faster in JS.\r\n  /** @type {?string} */\r\n  var lastequality = null;\r\n  // Always equal to diffs[equalities[equalitiesLength - 1]][1]\r\n  var pointer = 0;  // Index of current position.\r\n  // Is there an insertion operation before the last equality.\r\n  var pre_ins = false;\r\n  // Is there a deletion operation before the last equality.\r\n  var pre_del = false;\r\n  // Is there an insertion operation after the last equality.\r\n  var post_ins = false;\r\n  // Is there a deletion operation after the last equality.\r\n  var post_del = false;\r\n  while (pointer < diffs.length) {\r\n    if (diffs[pointer][0] == DIFF_EQUAL) {  // Equality found.\r\n      if (diffs[pointer][1].length < this.Diff_EditCost &&\r\n          (post_ins || post_del)) {\r\n        // Candidate found.\r\n        equalities[equalitiesLength++] = pointer;\r\n        pre_ins = post_ins;\r\n        pre_del = post_del;\r\n        lastequality = diffs[pointer][1];\r\n      } else {\r\n        // Not a candidate, and can never become one.\r\n        equalitiesLength = 0;\r\n        lastequality = null;\r\n      }\r\n      post_ins = post_del = false;\r\n    } else {  // An insertion or deletion.\r\n      if (diffs[pointer][0] == DIFF_DELETE) {\r\n        post_del = true;\r\n      } else {\r\n        post_ins = true;\r\n      }\r\n      /*\r\n       * Five types to be split:\r\n       * <ins>A</ins><del>B</del>XY<ins>C</ins><del>D</del>\r\n       * <ins>A</ins>X<ins>C</ins><del>D</del>\r\n       * <ins>A</ins><del>B</del>X<ins>C</ins>\r\n       * <ins>A</del>X<ins>C</ins><del>D</del>\r\n       * <ins>A</ins><del>B</del>X<del>C</del>\r\n       */\r\n      if (lastequality && ((pre_ins && pre_del && post_ins && post_del) ||\r\n                           ((lastequality.length < this.Diff_EditCost / 2) &&\r\n                            (pre_ins + pre_del + post_ins + post_del) == 3))) {\r\n        // Duplicate record.\r\n        diffs.splice(equalities[equalitiesLength - 1], 0,\r\n                     [DIFF_DELETE, lastequality]);\r\n        // Change second copy to insert.\r\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT;\r\n        equalitiesLength--;  // Throw away the equality we just deleted;\r\n        lastequality = null;\r\n        if (pre_ins && pre_del) {\r\n          // No changes made which could affect previous entry, keep going.\r\n          post_ins = post_del = true;\r\n          equalitiesLength = 0;\r\n        } else {\r\n          equalitiesLength--;  // Throw away the previous equality.\r\n          pointer = equalitiesLength > 0 ?\r\n              equalities[equalitiesLength - 1] : -1;\r\n          post_ins = post_del = false;\r\n        }\r\n        changes = true;\r\n      }\r\n    }\r\n    pointer++;\r\n  }\r\n\r\n  if (changes) {\r\n    this.diff_cleanupMerge(diffs);\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * Reorder and merge like edit sections.  Merge equalities.\r\n * Any edit section can move as long as it doesn't cross an equality.\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n */\r\ndiff_match_patch.prototype.diff_cleanupMerge = function(diffs) {\r\n  diffs.push([DIFF_EQUAL, '']);  // Add a dummy entry at the end.\r\n  var pointer = 0;\r\n  var count_delete = 0;\r\n  var count_insert = 0;\r\n  var text_delete = '';\r\n  var text_insert = '';\r\n  var commonlength;\r\n  while (pointer < diffs.length) {\r\n    switch (diffs[pointer][0]) {\r\n      case DIFF_INSERT:\r\n        count_insert++;\r\n        text_insert += diffs[pointer][1];\r\n        pointer++;\r\n        break;\r\n      case DIFF_DELETE:\r\n        count_delete++;\r\n        text_delete += diffs[pointer][1];\r\n        pointer++;\r\n        break;\r\n      case DIFF_EQUAL:\r\n        // Upon reaching an equality, check for prior redundancies.\r\n        if (count_delete + count_insert > 1) {\r\n          if (count_delete !== 0 && count_insert !== 0) {\r\n            // Factor out any common prefixies.\r\n            commonlength = this.diff_commonPrefix(text_insert, text_delete);\r\n            if (commonlength !== 0) {\r\n              if ((pointer - count_delete - count_insert) > 0 &&\r\n                  diffs[pointer - count_delete - count_insert - 1][0] ==\r\n                  DIFF_EQUAL) {\r\n                diffs[pointer - count_delete - count_insert - 1][1] +=\r\n                    text_insert.substring(0, commonlength);\r\n              } else {\r\n                diffs.splice(0, 0, [DIFF_EQUAL,\r\n                                    text_insert.substring(0, commonlength)]);\r\n                pointer++;\r\n              }\r\n              text_insert = text_insert.substring(commonlength);\r\n              text_delete = text_delete.substring(commonlength);\r\n            }\r\n            // Factor out any common suffixies.\r\n            commonlength = this.diff_commonSuffix(text_insert, text_delete);\r\n            if (commonlength !== 0) {\r\n              diffs[pointer][1] = text_insert.substring(text_insert.length -\r\n                  commonlength) + diffs[pointer][1];\r\n              text_insert = text_insert.substring(0, text_insert.length -\r\n                  commonlength);\r\n              text_delete = text_delete.substring(0, text_delete.length -\r\n                  commonlength);\r\n            }\r\n          }\r\n          // Delete the offending records and add the merged ones.\r\n          if (count_delete === 0) {\r\n            diffs.splice(pointer - count_insert,\r\n                count_delete + count_insert, [DIFF_INSERT, text_insert]);\r\n          } else if (count_insert === 0) {\r\n            diffs.splice(pointer - count_delete,\r\n                count_delete + count_insert, [DIFF_DELETE, text_delete]);\r\n          } else {\r\n            diffs.splice(pointer - count_delete - count_insert,\r\n                count_delete + count_insert, [DIFF_DELETE, text_delete],\r\n                [DIFF_INSERT, text_insert]);\r\n          }\r\n          pointer = pointer - count_delete - count_insert +\r\n                    (count_delete ? 1 : 0) + (count_insert ? 1 : 0) + 1;\r\n        } else if (pointer !== 0 && diffs[pointer - 1][0] == DIFF_EQUAL) {\r\n          // Merge this equality with the previous one.\r\n          diffs[pointer - 1][1] += diffs[pointer][1];\r\n          diffs.splice(pointer, 1);\r\n        } else {\r\n          pointer++;\r\n        }\r\n        count_insert = 0;\r\n        count_delete = 0;\r\n        text_delete = '';\r\n        text_insert = '';\r\n        break;\r\n    }\r\n  }\r\n  if (diffs[diffs.length - 1][1] === '') {\r\n    diffs.pop();  // Remove the dummy entry at the end.\r\n  }\r\n\r\n  // Second pass: look for single edits surrounded on both sides by equalities\r\n  // which can be shifted sideways to eliminate an equality.\r\n  // e.g: A<ins>BA</ins>C -> <ins>AB</ins>AC\r\n  var changes = false;\r\n  pointer = 1;\r\n  // Intentionally ignore the first and last element (don't need checking).\r\n  while (pointer < diffs.length - 1) {\r\n    if (diffs[pointer - 1][0] == DIFF_EQUAL &&\r\n        diffs[pointer + 1][0] == DIFF_EQUAL) {\r\n      // This is a single edit surrounded by equalities.\r\n      if (diffs[pointer][1].substring(diffs[pointer][1].length -\r\n          diffs[pointer - 1][1].length) == diffs[pointer - 1][1]) {\r\n        // Shift the edit over the previous equality.\r\n        diffs[pointer][1] = diffs[pointer - 1][1] +\r\n            diffs[pointer][1].substring(0, diffs[pointer][1].length -\r\n                                        diffs[pointer - 1][1].length);\r\n        diffs[pointer + 1][1] = diffs[pointer - 1][1] + diffs[pointer + 1][1];\r\n        diffs.splice(pointer - 1, 1);\r\n        changes = true;\r\n      } else if (diffs[pointer][1].substring(0, diffs[pointer + 1][1].length) ==\r\n          diffs[pointer + 1][1]) {\r\n        // Shift the edit over the next equality.\r\n        diffs[pointer - 1][1] += diffs[pointer + 1][1];\r\n        diffs[pointer][1] =\r\n            diffs[pointer][1].substring(diffs[pointer + 1][1].length) +\r\n            diffs[pointer + 1][1];\r\n        diffs.splice(pointer + 1, 1);\r\n        changes = true;\r\n      }\r\n    }\r\n    pointer++;\r\n  }\r\n  // If shifts were made, the diff needs reordering and another shift sweep.\r\n  if (changes) {\r\n    this.diff_cleanupMerge(diffs);\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * loc is a location in text1, compute and return the equivalent location in\r\n * text2.\r\n * e.g. 'The cat' vs 'The big cat', 1->1, 5->8\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n * @param {number} loc Location within text1.\r\n * @return {number} Location within text2.\r\n */\r\ndiff_match_patch.prototype.diff_xIndex = function(diffs, loc) {\r\n  var chars1 = 0;\r\n  var chars2 = 0;\r\n  var last_chars1 = 0;\r\n  var last_chars2 = 0;\r\n  var x;\r\n  for (x = 0; x < diffs.length; x++) {\r\n    if (diffs[x][0] !== DIFF_INSERT) {  // Equality or deletion.\r\n      chars1 += diffs[x][1].length;\r\n    }\r\n    if (diffs[x][0] !== DIFF_DELETE) {  // Equality or insertion.\r\n      chars2 += diffs[x][1].length;\r\n    }\r\n    if (chars1 > loc) {  // Overshot the location.\r\n      break;\r\n    }\r\n    last_chars1 = chars1;\r\n    last_chars2 = chars2;\r\n  }\r\n  // Was the location was deleted?\r\n  if (diffs.length != x && diffs[x][0] === DIFF_DELETE) {\r\n    return last_chars2;\r\n  }\r\n  // Add the remaining character length.\r\n  return last_chars2 + (loc - last_chars1);\r\n};\r\n\r\n\r\n/**\r\n * Convert a diff array into a pretty HTML report.\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n * @return {string} HTML representation.\r\n */\r\ndiff_match_patch.prototype.diff_prettyHtml = function(diffs) {\r\n  var html = [];\r\n  var pattern_amp = /&/g;\r\n  var pattern_lt = /</g;\r\n  var pattern_gt = />/g;\r\n  var pattern_para = /\\n/g;\r\n  for (var x = 0; x < diffs.length; x++) {\r\n    var op = diffs[x][0];    // Operation (insert, delete, equal)\r\n    var data = diffs[x][1];  // Text of change.\r\n    var text = data.replace(pattern_amp, '&amp;').replace(pattern_lt, '&lt;')\r\n        .replace(pattern_gt, '&gt;').replace(pattern_para, '&para;<br>');\r\n    switch (op) {\r\n      case DIFF_INSERT:\r\n        html[x] = '<ins style=\"background:#e6ffe6;\">' + text + '</ins>';\r\n        break;\r\n      case DIFF_DELETE:\r\n        html[x] = '<del style=\"background:#ffe6e6;\">' + text + '</del>';\r\n        break;\r\n      case DIFF_EQUAL:\r\n        html[x] = '<span>' + text + '</span>';\r\n        break;\r\n    }\r\n  }\r\n  return html.join('');\r\n};\r\n\r\n\r\n/**\r\n * Compute and return the source text (all equalities and deletions).\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n * @return {string} Source text.\r\n */\r\ndiff_match_patch.prototype.diff_text1 = function(diffs) {\r\n  var text = [];\r\n  for (var x = 0; x < diffs.length; x++) {\r\n    if (diffs[x][0] !== DIFF_INSERT) {\r\n      text[x] = diffs[x][1];\r\n    }\r\n  }\r\n  return text.join('');\r\n};\r\n\r\n\r\n/**\r\n * Compute and return the destination text (all equalities and insertions).\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n * @return {string} Destination text.\r\n */\r\ndiff_match_patch.prototype.diff_text2 = function(diffs) {\r\n  var text = [];\r\n  for (var x = 0; x < diffs.length; x++) {\r\n    if (diffs[x][0] !== DIFF_DELETE) {\r\n      text[x] = diffs[x][1];\r\n    }\r\n  }\r\n  return text.join('');\r\n};\r\n\r\n\r\n/**\r\n * Compute the Levenshtein distance; the number of inserted, deleted or\r\n * substituted characters.\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n * @return {number} Number of changes.\r\n */\r\ndiff_match_patch.prototype.diff_levenshtein = function(diffs) {\r\n  var levenshtein = 0;\r\n  var insertions = 0;\r\n  var deletions = 0;\r\n  for (var x = 0; x < diffs.length; x++) {\r\n    var op = diffs[x][0];\r\n    var data = diffs[x][1];\r\n    switch (op) {\r\n      case DIFF_INSERT:\r\n        insertions += data.length;\r\n        break;\r\n      case DIFF_DELETE:\r\n        deletions += data.length;\r\n        break;\r\n      case DIFF_EQUAL:\r\n        // A deletion and an insertion is one substitution.\r\n        levenshtein += Math.max(insertions, deletions);\r\n        insertions = 0;\r\n        deletions = 0;\r\n        break;\r\n    }\r\n  }\r\n  levenshtein += Math.max(insertions, deletions);\r\n  return levenshtein;\r\n};\r\n\r\n\r\n/**\r\n * Crush the diff into an encoded string which describes the operations\r\n * required to transform text1 into text2.\r\n * E.g. =3\\t-2\\t+ing  -> Keep 3 chars, delete 2 chars, insert 'ing'.\r\n * Operations are tab-separated.  Inserted text is escaped using %xx notation.\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n * @return {string} Delta text.\r\n */\r\ndiff_match_patch.prototype.diff_toDelta = function(diffs) {\r\n  var text = [];\r\n  for (var x = 0; x < diffs.length; x++) {\r\n    switch (diffs[x][0]) {\r\n      case DIFF_INSERT:\r\n        text[x] = '+' + encodeURI(diffs[x][1]);\r\n        break;\r\n      case DIFF_DELETE:\r\n        text[x] = '-' + diffs[x][1].length;\r\n        break;\r\n      case DIFF_EQUAL:\r\n        text[x] = '=' + diffs[x][1].length;\r\n        break;\r\n    }\r\n  }\r\n  return text.join('\\t').replace(/%20/g, ' ');\r\n};\r\n\r\n\r\n/**\r\n * Given the original text1, and an encoded string which describes the\r\n * operations required to transform text1 into text2, compute the full diff.\r\n * @param {string} text1 Source string for the diff.\r\n * @param {string} delta Delta text.\r\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\r\n * @throws {!Error} If invalid input.\r\n */\r\ndiff_match_patch.prototype.diff_fromDelta = function(text1, delta) {\r\n  var diffs = [];\r\n  var diffsLength = 0;  // Keeping our own length var is faster in JS.\r\n  var pointer = 0;  // Cursor in text1\r\n  var tokens = delta.split(/\\t/g);\r\n  for (var x = 0; x < tokens.length; x++) {\r\n    // Each token begins with a one character parameter which specifies the\r\n    // operation of this token (delete, insert, equality).\r\n    var param = tokens[x].substring(1);\r\n    switch (tokens[x].charAt(0)) {\r\n      case '+':\r\n        try {\r\n          diffs[diffsLength++] = [DIFF_INSERT, decodeURI(param)];\r\n        } catch (ex) {\r\n          // Malformed URI sequence.\r\n          throw new Error('Illegal escape in diff_fromDelta: ' + param);\r\n        }\r\n        break;\r\n      case '-':\r\n        // Fall through.\r\n      case '=':\r\n        var n = parseInt(param, 10);\r\n        if (isNaN(n) || n < 0) {\r\n          throw new Error('Invalid number in diff_fromDelta: ' + param);\r\n        }\r\n        var text = text1.substring(pointer, pointer += n);\r\n        if (tokens[x].charAt(0) == '=') {\r\n          diffs[diffsLength++] = [DIFF_EQUAL, text];\r\n        } else {\r\n          diffs[diffsLength++] = [DIFF_DELETE, text];\r\n        }\r\n        break;\r\n      default:\r\n        // Blank tokens are ok (from a trailing \\t).\r\n        // Anything else is an error.\r\n        if (tokens[x]) {\r\n          throw new Error('Invalid diff operation in diff_fromDelta: ' +\r\n                          tokens[x]);\r\n        }\r\n    }\r\n  }\r\n  if (pointer != text1.length) {\r\n    throw new Error('Delta length (' + pointer +\r\n        ') does not equal source text length (' + text1.length + ').');\r\n  }\r\n  return diffs;\r\n};\r\n\r\n\r\n//  MATCH FUNCTIONS\r\n\r\n\r\n/**\r\n * Locate the best instance of 'pattern' in 'text' near 'loc'.\r\n * @param {string} text The text to search.\r\n * @param {string} pattern The pattern to search for.\r\n * @param {number} loc The location to search around.\r\n * @return {number} Best match index or -1.\r\n */\r\ndiff_match_patch.prototype.match_main = function(text, pattern, loc) {\r\n  // Check for null inputs.\r\n  if (text == null || pattern == null || loc == null) {\r\n    throw new Error('Null input. (match_main)');\r\n  }\r\n\r\n  loc = Math.max(0, Math.min(loc, text.length));\r\n  if (text == pattern) {\r\n    // Shortcut (potentially not guaranteed by the algorithm)\r\n    return 0;\r\n  } else if (!text.length) {\r\n    // Nothing to match.\r\n    return -1;\r\n  } else if (text.substring(loc, loc + pattern.length) == pattern) {\r\n    // Perfect match at the perfect spot!  (Includes case of null pattern)\r\n    return loc;\r\n  } else {\r\n    // Do a fuzzy compare.\r\n    return this.match_bitap_(text, pattern, loc);\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * Locate the best instance of 'pattern' in 'text' near 'loc' using the\r\n * Bitap algorithm.\r\n * @param {string} text The text to search.\r\n * @param {string} pattern The pattern to search for.\r\n * @param {number} loc The location to search around.\r\n * @return {number} Best match index or -1.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.match_bitap_ = function(text, pattern, loc) {\r\n  if (pattern.length > this.Match_MaxBits) {\r\n    throw new Error('Pattern too long for this browser.');\r\n  }\r\n\r\n  // Initialise the alphabet.\r\n  var s = this.match_alphabet_(pattern);\r\n\r\n  var dmp = this;  // 'this' becomes 'window' in a closure.\r\n\r\n  /**\r\n   * Compute and return the score for a match with e errors and x location.\r\n   * Accesses loc and pattern through being a closure.\r\n   * @param {number} e Number of errors in match.\r\n   * @param {number} x Location of match.\r\n   * @return {number} Overall score for match (0.0 = good, 1.0 = bad).\r\n   * @private\r\n   */\r\n  function match_bitapScore_(e, x) {\r\n    var accuracy = e / pattern.length;\r\n    var proximity = Math.abs(loc - x);\r\n    if (!dmp.Match_Distance) {\r\n      // Dodge divide by zero error.\r\n      return proximity ? 1.0 : accuracy;\r\n    }\r\n    return accuracy + (proximity / dmp.Match_Distance);\r\n  }\r\n\r\n  // Highest score beyond which we give up.\r\n  var score_threshold = this.Match_Threshold;\r\n  // Is there a nearby exact match? (speedup)\r\n  var best_loc = text.indexOf(pattern, loc);\r\n  if (best_loc != -1) {\r\n    score_threshold = Math.min(match_bitapScore_(0, best_loc), score_threshold);\r\n    // What about in the other direction? (speedup)\r\n    best_loc = text.lastIndexOf(pattern, loc + pattern.length);\r\n    if (best_loc != -1) {\r\n      score_threshold =\r\n          Math.min(match_bitapScore_(0, best_loc), score_threshold);\r\n    }\r\n  }\r\n\r\n  // Initialise the bit arrays.\r\n  var matchmask = 1 << (pattern.length - 1);\r\n  best_loc = -1;\r\n\r\n  var bin_min, bin_mid;\r\n  var bin_max = pattern.length + text.length;\r\n  var last_rd;\r\n  for (var d = 0; d < pattern.length; d++) {\r\n    // Scan for the best match; each iteration allows for one more error.\r\n    // Run a binary search to determine how far from 'loc' we can stray at this\r\n    // error level.\r\n    bin_min = 0;\r\n    bin_mid = bin_max;\r\n    while (bin_min < bin_mid) {\r\n      if (match_bitapScore_(d, loc + bin_mid) <= score_threshold) {\r\n        bin_min = bin_mid;\r\n      } else {\r\n        bin_max = bin_mid;\r\n      }\r\n      bin_mid = Math.floor((bin_max - bin_min) / 2 + bin_min);\r\n    }\r\n    // Use the result from this iteration as the maximum for the next.\r\n    bin_max = bin_mid;\r\n    var start = Math.max(1, loc - bin_mid + 1);\r\n    var finish = Math.min(loc + bin_mid, text.length) + pattern.length;\r\n\r\n    var rd = Array(finish + 2);\r\n    rd[finish + 1] = (1 << d) - 1;\r\n    for (var j = finish; j >= start; j--) {\r\n      // The alphabet (s) is a sparse hash, so the following line generates\r\n      // warnings.\r\n      var charMatch = s[text.charAt(j - 1)];\r\n      if (d === 0) {  // First pass: exact match.\r\n        rd[j] = ((rd[j + 1] << 1) | 1) & charMatch;\r\n      } else {  // Subsequent passes: fuzzy match.\r\n        rd[j] = (((rd[j + 1] << 1) | 1) & charMatch) |\r\n                (((last_rd[j + 1] | last_rd[j]) << 1) | 1) |\r\n                last_rd[j + 1];\r\n      }\r\n      if (rd[j] & matchmask) {\r\n        var score = match_bitapScore_(d, j - 1);\r\n        // This match will almost certainly be better than any existing match.\r\n        // But check anyway.\r\n        if (score <= score_threshold) {\r\n          // Told you so.\r\n          score_threshold = score;\r\n          best_loc = j - 1;\r\n          if (best_loc > loc) {\r\n            // When passing loc, don't exceed our current distance from loc.\r\n            start = Math.max(1, 2 * loc - best_loc);\r\n          } else {\r\n            // Already passed loc, downhill from here on in.\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    // No hope for a (better) match at greater error levels.\r\n    if (match_bitapScore_(d + 1, loc) > score_threshold) {\r\n      break;\r\n    }\r\n    last_rd = rd;\r\n  }\r\n  return best_loc;\r\n};\r\n\r\n\r\n/**\r\n * Initialise the alphabet for the Bitap algorithm.\r\n * @param {string} pattern The text to encode.\r\n * @return {!Object} Hash of character locations.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.match_alphabet_ = function(pattern) {\r\n  var s = {};\r\n  for (var i = 0; i < pattern.length; i++) {\r\n    s[pattern.charAt(i)] = 0;\r\n  }\r\n  for (var i = 0; i < pattern.length; i++) {\r\n    s[pattern.charAt(i)] |= 1 << (pattern.length - i - 1);\r\n  }\r\n  return s;\r\n};\r\n\r\n\r\n//  PATCH FUNCTIONS\r\n\r\n\r\n/**\r\n * Increase the context until it is unique,\r\n * but don't let the pattern expand beyond Match_MaxBits.\r\n * @param {!diff_match_patch.patch_obj} patch The patch to grow.\r\n * @param {string} text Source text.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.patch_addContext_ = function(patch, text) {\r\n  if (text.length == 0) {\r\n    return;\r\n  }\r\n  var pattern = text.substring(patch.start2, patch.start2 + patch.length1);\r\n  var padding = 0;\r\n\r\n  // Look for the first and last matches of pattern in text.  If two different\r\n  // matches are found, increase the pattern length.\r\n  while (text.indexOf(pattern) != text.lastIndexOf(pattern) &&\r\n         pattern.length < this.Match_MaxBits - this.Patch_Margin -\r\n         this.Patch_Margin) {\r\n    padding += this.Patch_Margin;\r\n    pattern = text.substring(patch.start2 - padding,\r\n                             patch.start2 + patch.length1 + padding);\r\n  }\r\n  // Add one chunk for good luck.\r\n  padding += this.Patch_Margin;\r\n\r\n  // Add the prefix.\r\n  var prefix = text.substring(patch.start2 - padding, patch.start2);\r\n  if (prefix) {\r\n    patch.diffs.unshift([DIFF_EQUAL, prefix]);\r\n  }\r\n  // Add the suffix.\r\n  var suffix = text.substring(patch.start2 + patch.length1,\r\n                              patch.start2 + patch.length1 + padding);\r\n  if (suffix) {\r\n    patch.diffs.push([DIFF_EQUAL, suffix]);\r\n  }\r\n\r\n  // Roll back the start points.\r\n  patch.start1 -= prefix.length;\r\n  patch.start2 -= prefix.length;\r\n  // Extend the lengths.\r\n  patch.length1 += prefix.length + suffix.length;\r\n  patch.length2 += prefix.length + suffix.length;\r\n};\r\n\r\n\r\n/**\r\n * Compute a list of patches to turn text1 into text2.\r\n * Use diffs if provided, otherwise compute it ourselves.\r\n * There are four ways to call this function, depending on what data is\r\n * available to the caller:\r\n * Method 1:\r\n * a = text1, b = text2\r\n * Method 2:\r\n * a = diffs\r\n * Method 3 (optimal):\r\n * a = text1, b = diffs\r\n * Method 4 (deprecated, use method 3):\r\n * a = text1, b = text2, c = diffs\r\n *\r\n * @param {string|!Array.<!diff_match_patch.Diff>} a text1 (methods 1,3,4) or\r\n * Array of diff tuples for text1 to text2 (method 2).\r\n * @param {string|!Array.<!diff_match_patch.Diff>} opt_b text2 (methods 1,4) or\r\n * Array of diff tuples for text1 to text2 (method 3) or undefined (method 2).\r\n * @param {string|!Array.<!diff_match_patch.Diff>} opt_c Array of diff tuples\r\n * for text1 to text2 (method 4) or undefined (methods 1,2,3).\r\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\r\n */\r\ndiff_match_patch.prototype.patch_make = function(a, opt_b, opt_c) {\r\n  var text1, diffs;\r\n  if (typeof a == 'string' && typeof opt_b == 'string' &&\r\n      typeof opt_c == 'undefined') {\r\n    // Method 1: text1, text2\r\n    // Compute diffs from text1 and text2.\r\n    text1 = /** @type {string} */(a);\r\n    diffs = this.diff_main(text1, /** @type {string} */(opt_b), true);\r\n    if (diffs.length > 2) {\r\n      this.diff_cleanupSemantic(diffs);\r\n      this.diff_cleanupEfficiency(diffs);\r\n    }\r\n  } else if (a && typeof a == 'object' && typeof opt_b == 'undefined' &&\r\n      typeof opt_c == 'undefined') {\r\n    // Method 2: diffs\r\n    // Compute text1 from diffs.\r\n    diffs = /** @type {!Array.<!diff_match_patch.Diff>} */(a);\r\n    text1 = this.diff_text1(diffs);\r\n  } else if (typeof a == 'string' && opt_b && typeof opt_b == 'object' &&\r\n      typeof opt_c == 'undefined') {\r\n    // Method 3: text1, diffs\r\n    text1 = /** @type {string} */(a);\r\n    diffs = /** @type {!Array.<!diff_match_patch.Diff>} */(opt_b);\r\n  } else if (typeof a == 'string' && typeof opt_b == 'string' &&\r\n      opt_c && typeof opt_c == 'object') {\r\n    // Method 4: text1, text2, diffs\r\n    // text2 is not used.\r\n    text1 = /** @type {string} */(a);\r\n    diffs = /** @type {!Array.<!diff_match_patch.Diff>} */(opt_c);\r\n  } else {\r\n    throw new Error('Unknown call format to patch_make.');\r\n  }\r\n\r\n  if (diffs.length === 0) {\r\n    return [];  // Get rid of the null case.\r\n  }\r\n  var patches = [];\r\n  var patch = new diff_match_patch.patch_obj();\r\n  var patchDiffLength = 0;  // Keeping our own length var is faster in JS.\r\n  var char_count1 = 0;  // Number of characters into the text1 string.\r\n  var char_count2 = 0;  // Number of characters into the text2 string.\r\n  // Start with text1 (prepatch_text) and apply the diffs until we arrive at\r\n  // text2 (postpatch_text).  We recreate the patches one by one to determine\r\n  // context info.\r\n  var prepatch_text = text1;\r\n  var postpatch_text = text1;\r\n  for (var x = 0; x < diffs.length; x++) {\r\n    var diff_type = diffs[x][0];\r\n    var diff_text = diffs[x][1];\r\n\r\n    if (!patchDiffLength && diff_type !== DIFF_EQUAL) {\r\n      // A new patch starts here.\r\n      patch.start1 = char_count1;\r\n      patch.start2 = char_count2;\r\n    }\r\n\r\n    switch (diff_type) {\r\n      case DIFF_INSERT:\r\n        patch.diffs[patchDiffLength++] = diffs[x];\r\n        patch.length2 += diff_text.length;\r\n        postpatch_text = postpatch_text.substring(0, char_count2) + diff_text +\r\n                         postpatch_text.substring(char_count2);\r\n        break;\r\n      case DIFF_DELETE:\r\n        patch.length1 += diff_text.length;\r\n        patch.diffs[patchDiffLength++] = diffs[x];\r\n        postpatch_text = postpatch_text.substring(0, char_count2) +\r\n                         postpatch_text.substring(char_count2 +\r\n                             diff_text.length);\r\n        break;\r\n      case DIFF_EQUAL:\r\n        if (diff_text.length <= 2 * this.Patch_Margin &&\r\n            patchDiffLength && diffs.length != x + 1) {\r\n          // Small equality inside a patch.\r\n          patch.diffs[patchDiffLength++] = diffs[x];\r\n          patch.length1 += diff_text.length;\r\n          patch.length2 += diff_text.length;\r\n        } else if (diff_text.length >= 2 * this.Patch_Margin) {\r\n          // Time for a new patch.\r\n          if (patchDiffLength) {\r\n            this.patch_addContext_(patch, prepatch_text);\r\n            patches.push(patch);\r\n            patch = new diff_match_patch.patch_obj();\r\n            patchDiffLength = 0;\r\n            // Unlike Unidiff, our patch lists have a rolling context.\r\n            // http://code.google.com/p/google-diff-match-patch/wiki/Unidiff\r\n            // Update prepatch text & pos to reflect the application of the\r\n            // just completed patch.\r\n            prepatch_text = postpatch_text;\r\n            char_count1 = char_count2;\r\n          }\r\n        }\r\n        break;\r\n    }\r\n\r\n    // Update the current character count.\r\n    if (diff_type !== DIFF_INSERT) {\r\n      char_count1 += diff_text.length;\r\n    }\r\n    if (diff_type !== DIFF_DELETE) {\r\n      char_count2 += diff_text.length;\r\n    }\r\n  }\r\n  // Pick up the leftover patch if not empty.\r\n  if (patchDiffLength) {\r\n    this.patch_addContext_(patch, prepatch_text);\r\n    patches.push(patch);\r\n  }\r\n\r\n  return patches;\r\n};\r\n\r\n\r\n/**\r\n * Given an array of patches, return another array that is identical.\r\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\r\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\r\n */\r\ndiff_match_patch.prototype.patch_deepCopy = function(patches) {\r\n  // Making deep copies is hard in JavaScript.\r\n  var patchesCopy = [];\r\n  for (var x = 0; x < patches.length; x++) {\r\n    var patch = patches[x];\r\n    var patchCopy = new diff_match_patch.patch_obj();\r\n    patchCopy.diffs = [];\r\n    for (var y = 0; y < patch.diffs.length; y++) {\r\n      patchCopy.diffs[y] = patch.diffs[y].slice();\r\n    }\r\n    patchCopy.start1 = patch.start1;\r\n    patchCopy.start2 = patch.start2;\r\n    patchCopy.length1 = patch.length1;\r\n    patchCopy.length2 = patch.length2;\r\n    patchesCopy[x] = patchCopy;\r\n  }\r\n  return patchesCopy;\r\n};\r\n\r\n\r\n/**\r\n * Merge a set of patches onto the text.  Return a patched text, as well\r\n * as a list of true/false values indicating which patches were applied.\r\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\r\n * @param {string} text Old text.\r\n * @return {!Array.<string|!Array.<boolean>>} Two element Array, containing the\r\n *      new text and an array of boolean values.\r\n */\r\ndiff_match_patch.prototype.patch_apply = function(patches, text) {\r\n  if (patches.length == 0) {\r\n    return [text, []];\r\n  }\r\n\r\n  // Deep copy the patches so that no changes are made to originals.\r\n  patches = this.patch_deepCopy(patches);\r\n\r\n  var nullPadding = this.patch_addPadding(patches);\r\n  text = nullPadding + text + nullPadding;\r\n\r\n  this.patch_splitMax(patches);\r\n  // delta keeps track of the offset between the expected and actual location\r\n  // of the previous patch.  If there are patches expected at positions 10 and\r\n  // 20, but the first patch was found at 12, delta is 2 and the second patch\r\n  // has an effective expected position of 22.\r\n  var delta = 0;\r\n  var results = [];\r\n  for (var x = 0; x < patches.length; x++) {\r\n    var expected_loc = patches[x].start2 + delta;\r\n    var text1 = this.diff_text1(patches[x].diffs);\r\n    var start_loc;\r\n    var end_loc = -1;\r\n    if (text1.length > this.Match_MaxBits) {\r\n      // patch_splitMax will only provide an oversized pattern in the case of\r\n      // a monster delete.\r\n      start_loc = this.match_main(text, text1.substring(0, this.Match_MaxBits),\r\n                                  expected_loc);\r\n      if (start_loc != -1) {\r\n        end_loc = this.match_main(text,\r\n            text1.substring(text1.length - this.Match_MaxBits),\r\n            expected_loc + text1.length - this.Match_MaxBits);\r\n        if (end_loc == -1 || start_loc >= end_loc) {\r\n          // Can't find valid trailing context.  Drop this patch.\r\n          start_loc = -1;\r\n        }\r\n      }\r\n    } else {\r\n      start_loc = this.match_main(text, text1, expected_loc);\r\n    }\r\n    if (start_loc == -1) {\r\n      // No match found.  :(\r\n      results[x] = false;\r\n      // Subtract the delta for this failed patch from subsequent patches.\r\n      delta -= patches[x].length2 - patches[x].length1;\r\n    } else {\r\n      // Found a match.  :)\r\n      results[x] = true;\r\n      delta = start_loc - expected_loc;\r\n      var text2;\r\n      if (end_loc == -1) {\r\n        text2 = text.substring(start_loc, start_loc + text1.length);\r\n      } else {\r\n        text2 = text.substring(start_loc, end_loc + this.Match_MaxBits);\r\n      }\r\n      if (text1 == text2) {\r\n        // Perfect match, just shove the replacement text in.\r\n        text = text.substring(0, start_loc) +\r\n               this.diff_text2(patches[x].diffs) +\r\n               text.substring(start_loc + text1.length);\r\n      } else {\r\n        // Imperfect match.  Run a diff to get a framework of equivalent\r\n        // indices.\r\n        var diffs = this.diff_main(text1, text2, false);\r\n        if (text1.length > this.Match_MaxBits &&\r\n            this.diff_levenshtein(diffs) / text1.length >\r\n            this.Patch_DeleteThreshold) {\r\n          // The end points match, but the content is unacceptably bad.\r\n          results[x] = false;\r\n        } else {\r\n          this.diff_cleanupSemanticLossless(diffs);\r\n          var index1 = 0;\r\n          var index2;\r\n          for (var y = 0; y < patches[x].diffs.length; y++) {\r\n            var mod = patches[x].diffs[y];\r\n            if (mod[0] !== DIFF_EQUAL) {\r\n              index2 = this.diff_xIndex(diffs, index1);\r\n            }\r\n            if (mod[0] === DIFF_INSERT) {  // Insertion\r\n              text = text.substring(0, start_loc + index2) + mod[1] +\r\n                     text.substring(start_loc + index2);\r\n            } else if (mod[0] === DIFF_DELETE) {  // Deletion\r\n              text = text.substring(0, start_loc + index2) +\r\n                     text.substring(start_loc + this.diff_xIndex(diffs,\r\n                         index1 + mod[1].length));\r\n            }\r\n            if (mod[0] !== DIFF_DELETE) {\r\n              index1 += mod[1].length;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  // Strip the padding off.\r\n  text = text.substring(nullPadding.length, text.length - nullPadding.length);\r\n  return [text, results];\r\n};\r\n\r\n\r\n/**\r\n * Add some padding on text start and end so that edges can match something.\r\n * Intended to be called only from within patch_apply.\r\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\r\n * @return {string} The padding string added to each side.\r\n */\r\ndiff_match_patch.prototype.patch_addPadding = function(patches) {\r\n  var paddingLength = this.Patch_Margin;\r\n  var nullPadding = '';\r\n  for (var x = 1; x <= paddingLength; x++) {\r\n    nullPadding += String.fromCharCode(x);\r\n  }\r\n\r\n  // Bump all the patches forward.\r\n  for (var x = 0; x < patches.length; x++) {\r\n    patches[x].start1 += paddingLength;\r\n    patches[x].start2 += paddingLength;\r\n  }\r\n\r\n  // Add some padding on start of first diff.\r\n  var patch = patches[0];\r\n  var diffs = patch.diffs;\r\n  if (diffs.length == 0 || diffs[0][0] != DIFF_EQUAL) {\r\n    // Add nullPadding equality.\r\n    diffs.unshift([DIFF_EQUAL, nullPadding]);\r\n    patch.start1 -= paddingLength;  // Should be 0.\r\n    patch.start2 -= paddingLength;  // Should be 0.\r\n    patch.length1 += paddingLength;\r\n    patch.length2 += paddingLength;\r\n  } else if (paddingLength > diffs[0][1].length) {\r\n    // Grow first equality.\r\n    var extraLength = paddingLength - diffs[0][1].length;\r\n    diffs[0][1] = nullPadding.substring(diffs[0][1].length) + diffs[0][1];\r\n    patch.start1 -= extraLength;\r\n    patch.start2 -= extraLength;\r\n    patch.length1 += extraLength;\r\n    patch.length2 += extraLength;\r\n  }\r\n\r\n  // Add some padding on end of last diff.\r\n  patch = patches[patches.length - 1];\r\n  diffs = patch.diffs;\r\n  if (diffs.length == 0 || diffs[diffs.length - 1][0] != DIFF_EQUAL) {\r\n    // Add nullPadding equality.\r\n    diffs.push([DIFF_EQUAL, nullPadding]);\r\n    patch.length1 += paddingLength;\r\n    patch.length2 += paddingLength;\r\n  } else if (paddingLength > diffs[diffs.length - 1][1].length) {\r\n    // Grow last equality.\r\n    var extraLength = paddingLength - diffs[diffs.length - 1][1].length;\r\n    diffs[diffs.length - 1][1] += nullPadding.substring(0, extraLength);\r\n    patch.length1 += extraLength;\r\n    patch.length2 += extraLength;\r\n  }\r\n\r\n  return nullPadding;\r\n};\r\n\r\n\r\n/**\r\n * Look through the patches and break up any which are longer than the maximum\r\n * limit of the match algorithm.\r\n * Intended to be called only from within patch_apply.\r\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\r\n */\r\ndiff_match_patch.prototype.patch_splitMax = function(patches) {\r\n  var patch_size = this.Match_MaxBits;\r\n  for (var x = 0; x < patches.length; x++) {\r\n    if (patches[x].length1 <= patch_size) {\r\n      continue;\r\n    }\r\n    var bigpatch = patches[x];\r\n    // Remove the big old patch.\r\n    patches.splice(x--, 1);\r\n    var start1 = bigpatch.start1;\r\n    var start2 = bigpatch.start2;\r\n    var precontext = '';\r\n    while (bigpatch.diffs.length !== 0) {\r\n      // Create one of several smaller patches.\r\n      var patch = new diff_match_patch.patch_obj();\r\n      var empty = true;\r\n      patch.start1 = start1 - precontext.length;\r\n      patch.start2 = start2 - precontext.length;\r\n      if (precontext !== '') {\r\n        patch.length1 = patch.length2 = precontext.length;\r\n        patch.diffs.push([DIFF_EQUAL, precontext]);\r\n      }\r\n      while (bigpatch.diffs.length !== 0 &&\r\n             patch.length1 < patch_size - this.Patch_Margin) {\r\n        var diff_type = bigpatch.diffs[0][0];\r\n        var diff_text = bigpatch.diffs[0][1];\r\n        if (diff_type === DIFF_INSERT) {\r\n          // Insertions are harmless.\r\n          patch.length2 += diff_text.length;\r\n          start2 += diff_text.length;\r\n          patch.diffs.push(bigpatch.diffs.shift());\r\n          empty = false;\r\n        } else if (diff_type === DIFF_DELETE && patch.diffs.length == 1 &&\r\n                   patch.diffs[0][0] == DIFF_EQUAL &&\r\n                   diff_text.length > 2 * patch_size) {\r\n          // This is a large deletion.  Let it pass in one chunk.\r\n          patch.length1 += diff_text.length;\r\n          start1 += diff_text.length;\r\n          empty = false;\r\n          patch.diffs.push([diff_type, diff_text]);\r\n          bigpatch.diffs.shift();\r\n        } else {\r\n          // Deletion or equality.  Only take as much as we can stomach.\r\n          diff_text = diff_text.substring(0,\r\n              patch_size - patch.length1 - this.Patch_Margin);\r\n          patch.length1 += diff_text.length;\r\n          start1 += diff_text.length;\r\n          if (diff_type === DIFF_EQUAL) {\r\n            patch.length2 += diff_text.length;\r\n            start2 += diff_text.length;\r\n          } else {\r\n            empty = false;\r\n          }\r\n          patch.diffs.push([diff_type, diff_text]);\r\n          if (diff_text == bigpatch.diffs[0][1]) {\r\n            bigpatch.diffs.shift();\r\n          } else {\r\n            bigpatch.diffs[0][1] =\r\n                bigpatch.diffs[0][1].substring(diff_text.length);\r\n          }\r\n        }\r\n      }\r\n      // Compute the head context for the next patch.\r\n      precontext = this.diff_text2(patch.diffs);\r\n      precontext =\r\n          precontext.substring(precontext.length - this.Patch_Margin);\r\n      // Append the end context for this patch.\r\n      var postcontext = this.diff_text1(bigpatch.diffs)\r\n                            .substring(0, this.Patch_Margin);\r\n      if (postcontext !== '') {\r\n        patch.length1 += postcontext.length;\r\n        patch.length2 += postcontext.length;\r\n        if (patch.diffs.length !== 0 &&\r\n            patch.diffs[patch.diffs.length - 1][0] === DIFF_EQUAL) {\r\n          patch.diffs[patch.diffs.length - 1][1] += postcontext;\r\n        } else {\r\n          patch.diffs.push([DIFF_EQUAL, postcontext]);\r\n        }\r\n      }\r\n      if (!empty) {\r\n        patches.splice(++x, 0, patch);\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * Take a list of patches and return a textual representation.\r\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\r\n * @return {string} Text representation of patches.\r\n */\r\ndiff_match_patch.prototype.patch_toText = function(patches) {\r\n  var text = [];\r\n  for (var x = 0; x < patches.length; x++) {\r\n    text[x] = patches[x];\r\n  }\r\n  return text.join('');\r\n};\r\n\r\n\r\n/**\r\n * Parse a textual representation of patches and return a list of Patch objects.\r\n * @param {string} textline Text representation of patches.\r\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\r\n * @throws {!Error} If invalid input.\r\n */\r\ndiff_match_patch.prototype.patch_fromText = function(textline) {\r\n  var patches = [];\r\n  if (!textline) {\r\n    return patches;\r\n  }\r\n  var text = textline.split('\\n');\r\n  var textPointer = 0;\r\n  var patchHeader = /^@@ -(\\d+),?(\\d*) \\+(\\d+),?(\\d*) @@$/;\r\n  while (textPointer < text.length) {\r\n    var m = text[textPointer].match(patchHeader);\r\n    if (!m) {\r\n      throw new Error('Invalid patch string: ' + text[textPointer]);\r\n    }\r\n    var patch = new diff_match_patch.patch_obj();\r\n    patches.push(patch);\r\n    patch.start1 = parseInt(m[1], 10);\r\n    if (m[2] === '') {\r\n      patch.start1--;\r\n      patch.length1 = 1;\r\n    } else if (m[2] == '0') {\r\n      patch.length1 = 0;\r\n    } else {\r\n      patch.start1--;\r\n      patch.length1 = parseInt(m[2], 10);\r\n    }\r\n\r\n    patch.start2 = parseInt(m[3], 10);\r\n    if (m[4] === '') {\r\n      patch.start2--;\r\n      patch.length2 = 1;\r\n    } else if (m[4] == '0') {\r\n      patch.length2 = 0;\r\n    } else {\r\n      patch.start2--;\r\n      patch.length2 = parseInt(m[4], 10);\r\n    }\r\n    textPointer++;\r\n\r\n    while (textPointer < text.length) {\r\n      var sign = text[textPointer].charAt(0);\r\n      try {\r\n        var line = decodeURI(text[textPointer].substring(1));\r\n      } catch (ex) {\r\n        // Malformed URI sequence.\r\n        throw new Error('Illegal escape in patch_fromText: ' + line);\r\n      }\r\n      if (sign == '-') {\r\n        // Deletion.\r\n        patch.diffs.push([DIFF_DELETE, line]);\r\n      } else if (sign == '+') {\r\n        // Insertion.\r\n        patch.diffs.push([DIFF_INSERT, line]);\r\n      } else if (sign == ' ') {\r\n        // Minor equality.\r\n        patch.diffs.push([DIFF_EQUAL, line]);\r\n      } else if (sign == '@') {\r\n        // Start of next patch.\r\n        break;\r\n      } else if (sign === '') {\r\n        // Blank line?  Whatever.\r\n      } else {\r\n        // WTF?\r\n        throw new Error('Invalid patch mode \"' + sign + '\" in: ' + line);\r\n      }\r\n      textPointer++;\r\n    }\r\n  }\r\n  return patches;\r\n};\r\n\r\n\r\n/**\r\n * Class representing one patch operation.\r\n * @constructor\r\n */\r\ndiff_match_patch.patch_obj = function() {\r\n  /** @type {!Array.<!diff_match_patch.Diff>} */\r\n  this.diffs = [];\r\n  /** @type {?number} */\r\n  this.start1 = null;\r\n  /** @type {?number} */\r\n  this.start2 = null;\r\n  /** @type {number} */\r\n  this.length1 = 0;\r\n  /** @type {number} */\r\n  this.length2 = 0;\r\n};\r\n\r\n\r\n/**\r\n * Emmulate GNU diff's format.\r\n * Header: @@ -382,8 +481,9 @@\r\n * Indicies are printed as 1-based, not 0-based.\r\n * @return {string} The GNU diff string.\r\n */\r\ndiff_match_patch.patch_obj.prototype.toString = function() {\r\n  var coords1, coords2;\r\n  if (this.length1 === 0) {\r\n    coords1 = this.start1 + ',0';\r\n  } else if (this.length1 == 1) {\r\n    coords1 = this.start1 + 1;\r\n  } else {\r\n    coords1 = (this.start1 + 1) + ',' + this.length1;\r\n  }\r\n  if (this.length2 === 0) {\r\n    coords2 = this.start2 + ',0';\r\n  } else if (this.length2 == 1) {\r\n    coords2 = this.start2 + 1;\r\n  } else {\r\n    coords2 = (this.start2 + 1) + ',' + this.length2;\r\n  }\r\n  var text = ['@@ -' + coords1 + ' +' + coords2 + ' @@\\n'];\r\n  var op;\r\n  // Escape the body of the patch with %xx notation.\r\n  for (var x = 0; x < this.diffs.length; x++) {\r\n    switch (this.diffs[x][0]) {\r\n      case DIFF_INSERT:\r\n        op = '+';\r\n        break;\r\n      case DIFF_DELETE:\r\n        op = '-';\r\n        break;\r\n      case DIFF_EQUAL:\r\n        op = ' ';\r\n        break;\r\n    }\r\n    text[x + 1] = op + encodeURI(this.diffs[x][1]) + '\\n';\r\n  }\r\n  return text.join('').replace(/%20/g, ' ');\r\n};\r\n\r\n\r\n// The following export code was added by @ForbesLindesay\r\nmodule.exports = diff_match_patch;\r\nmodule.exports['diff_match_patch'] = diff_match_patch;\r\nmodule.exports['DIFF_DELETE'] = DIFF_DELETE;\r\nmodule.exports['DIFF_INSERT'] = DIFF_INSERT;\r\nmodule.exports['DIFF_EQUAL'] = DIFF_EQUAL;\n});\n\n/* global diff_match_patch */\nvar TEXT_DIFF = 2;\nvar DEFAULT_MIN_LENGTH = 60;\nvar cachedDiffPatch = null;\n\nvar getDiffMatchPatch = function getDiffMatchPatch(required) {\n  /* jshint camelcase: false */\n\n  if (!cachedDiffPatch) {\n    var instance = void 0;\n    /* eslint-disable camelcase, new-cap */\n    if (typeof diff_match_patch !== 'undefined') {\n      // already loaded, probably a browser\n      instance = typeof diff_match_patch === 'function' ? new diff_match_patch() : new diff_match_patch.diff_match_patch();\n    } else if (diffMatchPatch) {\n      try {\n        instance = diffMatchPatch && new diffMatchPatch();\n      } catch (err) {\n        instance = null;\n      }\n    }\n    /* eslint-enable camelcase, new-cap */\n    if (!instance) {\n      if (!required) {\n        return null;\n      }\n      var error = new Error('text diff_match_patch library not found');\n      // eslint-disable-next-line camelcase\n      error.diff_match_patch_not_found = true;\n      throw error;\n    }\n    cachedDiffPatch = {\n      diff: function diff(txt1, txt2) {\n        return instance.patch_toText(instance.patch_make(txt1, txt2));\n      },\n      patch: function patch(txt1, _patch) {\n        var results = instance.patch_apply(instance.patch_fromText(_patch), txt1);\n        for (var i = 0; i < results[1].length; i++) {\n          if (!results[1][i]) {\n            var _error = new Error('text patch failed');\n            _error.textPatchFailed = true;\n          }\n        }\n        return results[0];\n      }\n    };\n  }\n  return cachedDiffPatch;\n};\n\nvar diffFilter$3 = function textsDiffFilter(context) {\n  if (context.leftType !== 'string') {\n    return;\n  }\n  var minLength = context.options && context.options.textDiff && context.options.textDiff.minLength || DEFAULT_MIN_LENGTH;\n  if (context.left.length < minLength || context.right.length < minLength) {\n    context.setResult([context.left, context.right]).exit();\n    return;\n  }\n  // large text, try to use a text-diff algorithm\n  var diffMatchPatch$$1 = getDiffMatchPatch();\n  if (!diffMatchPatch$$1) {\n    // diff-match-patch library not available,\n    // fallback to regular string replace\n    context.setResult([context.left, context.right]).exit();\n    return;\n  }\n  var diff = diffMatchPatch$$1.diff;\n  context.setResult([diff(context.left, context.right), 0, TEXT_DIFF]).exit();\n};\ndiffFilter$3.filterName = 'texts';\n\nvar patchFilter$3 = function textsPatchFilter(context) {\n  if (context.nested) {\n    return;\n  }\n  if (context.delta[2] !== TEXT_DIFF) {\n    return;\n  }\n\n  // text-diff, use a text-patch algorithm\n  var patch = getDiffMatchPatch(true).patch;\n  context.setResult(patch(context.left, context.delta[0])).exit();\n};\npatchFilter$3.filterName = 'texts';\n\nvar textDeltaReverse = function textDeltaReverse(delta) {\n  var i = void 0;\n  var l = void 0;\n  var lines = void 0;\n  var line = void 0;\n  var lineTmp = void 0;\n  var header = null;\n  var headerRegex = /^@@ +-(\\d+),(\\d+) +\\+(\\d+),(\\d+) +@@$/;\n  var lineHeader = void 0;\n  lines = delta.split('\\n');\n  for (i = 0, l = lines.length; i < l; i++) {\n    line = lines[i];\n    var lineStart = line.slice(0, 1);\n    if (lineStart === '@') {\n      header = headerRegex.exec(line);\n      lineHeader = i;\n\n      // fix header\n      lines[lineHeader] = '@@ -' + header[3] + ',' + header[4] + ' +' + header[1] + ',' + header[2] + ' @@';\n    } else if (lineStart === '+') {\n      lines[i] = '-' + lines[i].slice(1);\n      if (lines[i - 1].slice(0, 1) === '+') {\n        // swap lines to keep default order (-+)\n        lineTmp = lines[i];\n        lines[i] = lines[i - 1];\n        lines[i - 1] = lineTmp;\n      }\n    } else if (lineStart === '-') {\n      lines[i] = '+' + lines[i].slice(1);\n    }\n  }\n  return lines.join('\\n');\n};\n\nvar reverseFilter$3 = function textsReverseFilter(context) {\n  if (context.nested) {\n    return;\n  }\n  if (context.delta[2] !== TEXT_DIFF) {\n    return;\n  }\n\n  // text-diff, use a text-diff algorithm\n  context.setResult([textDeltaReverse(context.delta[0]), 0, TEXT_DIFF]).exit();\n};\nreverseFilter$3.filterName = 'texts';\n\nvar DiffPatcher = function () {\n  function DiffPatcher(options) {\n    classCallCheck(this, DiffPatcher);\n\n    this.processor = new Processor(options);\n    this.processor.pipe(new Pipe('diff').append(collectChildrenDiffFilter, diffFilter, diffFilter$2, diffFilter$3, objectsDiffFilter, diffFilter$1).shouldHaveResult());\n    this.processor.pipe(new Pipe('patch').append(collectChildrenPatchFilter, collectChildrenPatchFilter$1, patchFilter, patchFilter$3, patchFilter$1, patchFilter$2).shouldHaveResult());\n    this.processor.pipe(new Pipe('reverse').append(collectChildrenReverseFilter, collectChildrenReverseFilter$1, reverseFilter, reverseFilter$3, reverseFilter$1, reverseFilter$2).shouldHaveResult());\n  }\n\n  createClass(DiffPatcher, [{\n    key: 'options',\n    value: function options() {\n      var _processor;\n\n      return (_processor = this.processor).options.apply(_processor, arguments);\n    }\n  }, {\n    key: 'diff',\n    value: function diff(left, right) {\n      return this.processor.process(new DiffContext(left, right));\n    }\n  }, {\n    key: 'patch',\n    value: function patch(left, delta) {\n      return this.processor.process(new PatchContext(left, delta));\n    }\n  }, {\n    key: 'reverse',\n    value: function reverse(delta) {\n      return this.processor.process(new ReverseContext(delta));\n    }\n  }, {\n    key: 'unpatch',\n    value: function unpatch(right, delta) {\n      return this.patch(right, this.reverse(delta));\n    }\n  }, {\n    key: 'clone',\n    value: function clone$$1(value) {\n      return clone(value);\n    }\n  }]);\n  return DiffPatcher;\n}();\n\nvar isArray$3 = typeof Array.isArray === 'function' ? Array.isArray : function (a) {\n  return a instanceof Array;\n};\n\nvar getObjectKeys = typeof Object.keys === 'function' ? function (obj) {\n  return Object.keys(obj);\n} : function (obj) {\n  var names = [];\n  for (var property in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, property)) {\n      names.push(property);\n    }\n  }\n  return names;\n};\n\nvar trimUnderscore = function trimUnderscore(str) {\n  if (str.substr(0, 1) === '_') {\n    return str.slice(1);\n  }\n  return str;\n};\n\nvar arrayKeyToSortNumber = function arrayKeyToSortNumber(key) {\n  if (key === '_t') {\n    return -1;\n  } else {\n    if (key.substr(0, 1) === '_') {\n      return parseInt(key.slice(1), 10);\n    } else {\n      return parseInt(key, 10) + 0.1;\n    }\n  }\n};\n\nvar arrayKeyComparer = function arrayKeyComparer(key1, key2) {\n  return arrayKeyToSortNumber(key1) - arrayKeyToSortNumber(key2);\n};\n\nvar BaseFormatter = function () {\n  function BaseFormatter() {\n    classCallCheck(this, BaseFormatter);\n  }\n\n  createClass(BaseFormatter, [{\n    key: 'format',\n    value: function format(delta, left) {\n      var context = {};\n      this.prepareContext(context);\n      this.recurse(context, delta, left);\n      return this.finalize(context);\n    }\n  }, {\n    key: 'prepareContext',\n    value: function prepareContext(context) {\n      context.buffer = [];\n      context.out = function () {\n        var _buffer;\n\n        (_buffer = this.buffer).push.apply(_buffer, arguments);\n      };\n    }\n  }, {\n    key: 'typeFormattterNotFound',\n    value: function typeFormattterNotFound(context, deltaType) {\n      throw new Error('cannot format delta type: ' + deltaType);\n    }\n  }, {\n    key: 'typeFormattterErrorFormatter',\n    value: function typeFormattterErrorFormatter(context, err) {\n      return err.toString();\n    }\n  }, {\n    key: 'finalize',\n    value: function finalize(_ref) {\n      var buffer = _ref.buffer;\n\n      if (isArray$3(buffer)) {\n        return buffer.join('');\n      }\n    }\n  }, {\n    key: 'recurse',\n    value: function recurse(context, delta, left, key, leftKey, movedFrom, isLast) {\n      var useMoveOriginHere = delta && movedFrom;\n      var leftValue = useMoveOriginHere ? movedFrom.value : left;\n\n      if (typeof delta === 'undefined' && typeof key === 'undefined') {\n        return undefined;\n      }\n\n      var type = this.getDeltaType(delta, movedFrom);\n      var nodeType = type === 'node' ? delta._t === 'a' ? 'array' : 'object' : '';\n\n      if (typeof key !== 'undefined') {\n        this.nodeBegin(context, key, leftKey, type, nodeType, isLast);\n      } else {\n        this.rootBegin(context, type, nodeType);\n      }\n\n      var typeFormattter = void 0;\n      try {\n        typeFormattter = this['format_' + type] || this.typeFormattterNotFound(context, type);\n        typeFormattter.call(this, context, delta, leftValue, key, leftKey, movedFrom);\n      } catch (err) {\n        this.typeFormattterErrorFormatter(context, err, delta, leftValue, key, leftKey, movedFrom);\n        if (typeof console !== 'undefined' && console.error) {\n          console.error(err.stack);\n        }\n      }\n\n      if (typeof key !== 'undefined') {\n        this.nodeEnd(context, key, leftKey, type, nodeType, isLast);\n      } else {\n        this.rootEnd(context, type, nodeType);\n      }\n    }\n  }, {\n    key: 'formatDeltaChildren',\n    value: function formatDeltaChildren(context, delta, left) {\n      var self = this;\n      this.forEachDeltaKey(delta, left, function (key, leftKey, movedFrom, isLast) {\n        self.recurse(context, delta[key], left ? left[leftKey] : undefined, key, leftKey, movedFrom, isLast);\n      });\n    }\n  }, {\n    key: 'forEachDeltaKey',\n    value: function forEachDeltaKey(delta, left, fn) {\n      var keys = getObjectKeys(delta);\n      var arrayKeys = delta._t === 'a';\n      var moveDestinations = {};\n      var name = void 0;\n      if (typeof left !== 'undefined') {\n        for (name in left) {\n          if (Object.prototype.hasOwnProperty.call(left, name)) {\n            if (typeof delta[name] === 'undefined' && (!arrayKeys || typeof delta['_' + name] === 'undefined')) {\n              keys.push(name);\n            }\n          }\n        }\n      }\n      // look for move destinations\n      for (name in delta) {\n        if (Object.prototype.hasOwnProperty.call(delta, name)) {\n          var value = delta[name];\n          if (isArray$3(value) && value[2] === 3) {\n            moveDestinations[value[1].toString()] = {\n              key: name,\n              value: left && left[parseInt(name.substr(1))]\n            };\n            if (this.includeMoveDestinations !== false) {\n              if (typeof left === 'undefined' && typeof delta[value[1]] === 'undefined') {\n                keys.push(value[1].toString());\n              }\n            }\n          }\n        }\n      }\n      if (arrayKeys) {\n        keys.sort(arrayKeyComparer);\n      } else {\n        keys.sort();\n      }\n      for (var index = 0, length = keys.length; index < length; index++) {\n        var key = keys[index];\n        if (arrayKeys && key === '_t') {\n          continue;\n        }\n        var leftKey = arrayKeys ? typeof key === 'number' ? key : parseInt(trimUnderscore(key), 10) : key;\n        var isLast = index === length - 1;\n        fn(key, leftKey, moveDestinations[leftKey], isLast);\n      }\n    }\n  }, {\n    key: 'getDeltaType',\n    value: function getDeltaType(delta, movedFrom) {\n      if (typeof delta === 'undefined') {\n        if (typeof movedFrom !== 'undefined') {\n          return 'movedestination';\n        }\n        return 'unchanged';\n      }\n      if (isArray$3(delta)) {\n        if (delta.length === 1) {\n          return 'added';\n        }\n        if (delta.length === 2) {\n          return 'modified';\n        }\n        if (delta.length === 3 && delta[2] === 0) {\n          return 'deleted';\n        }\n        if (delta.length === 3 && delta[2] === 2) {\n          return 'textdiff';\n        }\n        if (delta.length === 3 && delta[2] === 3) {\n          return 'moved';\n        }\n      } else if ((typeof delta === 'undefined' ? 'undefined' : _typeof(delta)) === 'object') {\n        return 'node';\n      }\n      return 'unknown';\n    }\n  }, {\n    key: 'parseTextDiff',\n    value: function parseTextDiff(value) {\n      var output = [];\n      var lines = value.split('\\n@@ ');\n      for (var i = 0, l = lines.length; i < l; i++) {\n        var line = lines[i];\n        var lineOutput = {\n          pieces: []\n        };\n        var location = /^(?:@@ )?[-+]?(\\d+),(\\d+)/.exec(line).slice(1);\n        lineOutput.location = {\n          line: location[0],\n          chr: location[1]\n        };\n        var pieces = line.split('\\n').slice(1);\n        for (var pieceIndex = 0, piecesLength = pieces.length; pieceIndex < piecesLength; pieceIndex++) {\n          var piece = pieces[pieceIndex];\n          if (!piece.length) {\n            continue;\n          }\n          var pieceOutput = {\n            type: 'context'\n          };\n          if (piece.substr(0, 1) === '+') {\n            pieceOutput.type = 'added';\n          } else if (piece.substr(0, 1) === '-') {\n            pieceOutput.type = 'deleted';\n          }\n          pieceOutput.text = piece.slice(1);\n          lineOutput.pieces.push(pieceOutput);\n        }\n        output.push(lineOutput);\n      }\n      return output;\n    }\n  }]);\n  return BaseFormatter;\n}();\n\n\n\nvar base = Object.freeze({\n\tdefault: BaseFormatter\n});\n\nvar HtmlFormatter = function (_BaseFormatter) {\n  inherits(HtmlFormatter, _BaseFormatter);\n\n  function HtmlFormatter() {\n    classCallCheck(this, HtmlFormatter);\n    return possibleConstructorReturn(this, (HtmlFormatter.__proto__ || Object.getPrototypeOf(HtmlFormatter)).apply(this, arguments));\n  }\n\n  createClass(HtmlFormatter, [{\n    key: 'typeFormattterErrorFormatter',\n    value: function typeFormattterErrorFormatter(context, err) {\n      context.out('<pre class=\"jsondiffpatch-error\">' + err + '</pre>');\n    }\n  }, {\n    key: 'formatValue',\n    value: function formatValue(context, value) {\n      context.out('<pre>' + htmlEscape(JSON.stringify(value, null, 2)) + '</pre>');\n    }\n  }, {\n    key: 'formatTextDiffString',\n    value: function formatTextDiffString(context, value) {\n      var lines = this.parseTextDiff(value);\n      context.out('<ul class=\"jsondiffpatch-textdiff\">');\n      for (var i = 0, l = lines.length; i < l; i++) {\n        var line = lines[i];\n        context.out('<li><div class=\"jsondiffpatch-textdiff-location\">' + ('<span class=\"jsondiffpatch-textdiff-line-number\">' + line.location.line + '</span><span class=\"jsondiffpatch-textdiff-char\">' + line.location.chr + '</span></div><div class=\"jsondiffpatch-textdiff-line\">'));\n        var pieces = line.pieces;\n        for (var pieceIndex = 0, piecesLength = pieces.length; pieceIndex < piecesLength; pieceIndex++) {\n          /* global decodeURI */\n          var piece = pieces[pieceIndex];\n          context.out('<span class=\"jsondiffpatch-textdiff-' + piece.type + '\">' + htmlEscape(decodeURI(piece.text)) + '</span>');\n        }\n        context.out('</div></li>');\n      }\n      context.out('</ul>');\n    }\n  }, {\n    key: 'rootBegin',\n    value: function rootBegin(context, type, nodeType) {\n      var nodeClass = 'jsondiffpatch-' + type + (nodeType ? ' jsondiffpatch-child-node-type-' + nodeType : '');\n      context.out('<div class=\"jsondiffpatch-delta ' + nodeClass + '\">');\n    }\n  }, {\n    key: 'rootEnd',\n    value: function rootEnd(context) {\n      context.out('</div>' + (context.hasArrows ? '<script type=\"text/javascript\">setTimeout(' + (adjustArrows.toString() + ',10);</script>') : ''));\n    }\n  }, {\n    key: 'nodeBegin',\n    value: function nodeBegin(context, key, leftKey, type, nodeType) {\n      var nodeClass = 'jsondiffpatch-' + type + (nodeType ? ' jsondiffpatch-child-node-type-' + nodeType : '');\n      context.out('<li class=\"' + nodeClass + '\" data-key=\"' + leftKey + '\">' + ('<div class=\"jsondiffpatch-property-name\">' + leftKey + '</div>'));\n    }\n  }, {\n    key: 'nodeEnd',\n    value: function nodeEnd(context) {\n      context.out('</li>');\n    }\n\n    /* jshint camelcase: false */\n    /* eslint-disable camelcase */\n\n  }, {\n    key: 'format_unchanged',\n    value: function format_unchanged(context, delta, left) {\n      if (typeof left === 'undefined') {\n        return;\n      }\n      context.out('<div class=\"jsondiffpatch-value\">');\n      this.formatValue(context, left);\n      context.out('</div>');\n    }\n  }, {\n    key: 'format_movedestination',\n    value: function format_movedestination(context, delta, left) {\n      if (typeof left === 'undefined') {\n        return;\n      }\n      context.out('<div class=\"jsondiffpatch-value\">');\n      this.formatValue(context, left);\n      context.out('</div>');\n    }\n  }, {\n    key: 'format_node',\n    value: function format_node(context, delta, left) {\n      // recurse\n      var nodeType = delta._t === 'a' ? 'array' : 'object';\n      context.out('<ul class=\"jsondiffpatch-node jsondiffpatch-node-type-' + nodeType + '\">');\n      this.formatDeltaChildren(context, delta, left);\n      context.out('</ul>');\n    }\n  }, {\n    key: 'format_added',\n    value: function format_added(context, delta) {\n      context.out('<div class=\"jsondiffpatch-value\">');\n      this.formatValue(context, delta[0]);\n      context.out('</div>');\n    }\n  }, {\n    key: 'format_modified',\n    value: function format_modified(context, delta) {\n      context.out('<div class=\"jsondiffpatch-value jsondiffpatch-left-value\">');\n      this.formatValue(context, delta[0]);\n      context.out('</div>' + '<div class=\"jsondiffpatch-value jsondiffpatch-right-value\">');\n      this.formatValue(context, delta[1]);\n      context.out('</div>');\n    }\n  }, {\n    key: 'format_deleted',\n    value: function format_deleted(context, delta) {\n      context.out('<div class=\"jsondiffpatch-value\">');\n      this.formatValue(context, delta[0]);\n      context.out('</div>');\n    }\n  }, {\n    key: 'format_moved',\n    value: function format_moved(context, delta) {\n      context.out('<div class=\"jsondiffpatch-value\">');\n      this.formatValue(context, delta[0]);\n      context.out('</div><div class=\"jsondiffpatch-moved-destination\">' + delta[1] + '</div>');\n\n      // draw an SVG arrow from here to move destination\n      context.out(\n      /* jshint multistr: true */\n      '<div class=\"jsondiffpatch-arrow\" ' + 'style=\"position: relative; left: -34px;\">\\n          <svg width=\"30\" height=\"60\" ' + 'style=\"position: absolute; display: none;\">\\n          <defs>\\n              <marker id=\"markerArrow\" markerWidth=\"8\" markerHeight=\"8\"\\n                 refx=\"2\" refy=\"4\"\\n                     orient=\"auto\" markerUnits=\"userSpaceOnUse\">\\n                  <path d=\"M1,1 L1,7 L7,4 L1,1\" style=\"fill: #339;\" />\\n              </marker>\\n          </defs>\\n          <path d=\"M30,0 Q-10,25 26,50\"\\n            style=\"stroke: #88f; stroke-width: 2px; fill: none; ' + 'stroke-opacity: 0.5; marker-end: url(#markerArrow);\"\\n          ></path>\\n          </svg>\\n      </div>');\n      context.hasArrows = true;\n    }\n  }, {\n    key: 'format_textdiff',\n    value: function format_textdiff(context, delta) {\n      context.out('<div class=\"jsondiffpatch-value\">');\n      this.formatTextDiffString(context, delta[0]);\n      context.out('</div>');\n    }\n  }]);\n  return HtmlFormatter;\n}(BaseFormatter);\n\nfunction htmlEscape(text) {\n  var html = text;\n  var replacements = [[/&/g, '&amp;'], [/</g, '&lt;'], [/>/g, '&gt;'], [/'/g, '&apos;'], [/\"/g, '&quot;']];\n  for (var i = 0; i < replacements.length; i++) {\n    html = html.replace(replacements[i][0], replacements[i][1]);\n  }\n  return html;\n}\n\nvar adjustArrows = function jsondiffpatchHtmlFormatterAdjustArrows(nodeArg) {\n  var node = nodeArg || document;\n  var getElementText = function getElementText(_ref) {\n    var textContent = _ref.textContent,\n        innerText = _ref.innerText;\n    return textContent || innerText;\n  };\n  var eachByQuery = function eachByQuery(el, query, fn) {\n    var elems = el.querySelectorAll(query);\n    for (var i = 0, l = elems.length; i < l; i++) {\n      fn(elems[i]);\n    }\n  };\n  var eachChildren = function eachChildren(_ref2, fn) {\n    var children = _ref2.children;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      fn(children[i], i);\n    }\n  };\n  eachByQuery(node, '.jsondiffpatch-arrow', function (_ref3) {\n    var parentNode = _ref3.parentNode,\n        children = _ref3.children,\n        style = _ref3.style;\n\n    var arrowParent = parentNode;\n    var svg = children[0];\n    var path = svg.children[1];\n    svg.style.display = 'none';\n    var destination = getElementText(arrowParent.querySelector('.jsondiffpatch-moved-destination'));\n    var container = arrowParent.parentNode;\n    var destinationElem = void 0;\n    eachChildren(container, function (child) {\n      if (child.getAttribute('data-key') === destination) {\n        destinationElem = child;\n      }\n    });\n    if (!destinationElem) {\n      return;\n    }\n    try {\n      var distance = destinationElem.offsetTop - arrowParent.offsetTop;\n      svg.setAttribute('height', Math.abs(distance) + 6);\n      style.top = -8 + (distance > 0 ? 0 : distance) + 'px';\n      var curve = distance > 0 ? 'M30,0 Q-10,' + Math.round(distance / 2) + ' 26,' + (distance - 4) : 'M30,' + -distance + ' Q-10,' + Math.round(-distance / 2) + ' 26,4';\n      path.setAttribute('d', curve);\n      svg.style.display = '';\n    } catch (err) {}\n  });\n};\n\n/* jshint camelcase: true */\n/* eslint-enable camelcase */\n\nvar showUnchanged = function showUnchanged(show, node, delay) {\n  var el = node || document.body;\n  var prefix = 'jsondiffpatch-unchanged-';\n  var classes = {\n    showing: prefix + 'showing',\n    hiding: prefix + 'hiding',\n    visible: prefix + 'visible',\n    hidden: prefix + 'hidden'\n  };\n  var list = el.classList;\n  if (!list) {\n    return;\n  }\n  if (!delay) {\n    list.remove(classes.showing);\n    list.remove(classes.hiding);\n    list.remove(classes.visible);\n    list.remove(classes.hidden);\n    if (show === false) {\n      list.add(classes.hidden);\n    }\n    return;\n  }\n  if (show === false) {\n    list.remove(classes.showing);\n    list.add(classes.visible);\n    setTimeout(function () {\n      list.add(classes.hiding);\n    }, 10);\n  } else {\n    list.remove(classes.hiding);\n    list.add(classes.showing);\n    list.remove(classes.hidden);\n  }\n  var intervalId = setInterval(function () {\n    adjustArrows(el);\n  }, 100);\n  setTimeout(function () {\n    list.remove(classes.showing);\n    list.remove(classes.hiding);\n    if (show === false) {\n      list.add(classes.hidden);\n      list.remove(classes.visible);\n    } else {\n      list.add(classes.visible);\n      list.remove(classes.hidden);\n    }\n    setTimeout(function () {\n      list.remove(classes.visible);\n      clearInterval(intervalId);\n    }, delay + 400);\n  }, delay);\n};\n\nvar hideUnchanged = function hideUnchanged(node, delay) {\n  return showUnchanged(false, node, delay);\n};\n\nvar defaultInstance = void 0;\n\nfunction format(delta, left) {\n  if (!defaultInstance) {\n    defaultInstance = new HtmlFormatter();\n  }\n  return defaultInstance.format(delta, left);\n}\n\n\n\nvar html = Object.freeze({\n\tshowUnchanged: showUnchanged,\n\thideUnchanged: hideUnchanged,\n\tdefault: HtmlFormatter,\n\tformat: format\n});\n\nvar AnnotatedFormatter = function (_BaseFormatter) {\n  inherits(AnnotatedFormatter, _BaseFormatter);\n\n  function AnnotatedFormatter() {\n    classCallCheck(this, AnnotatedFormatter);\n\n    var _this = possibleConstructorReturn(this, (AnnotatedFormatter.__proto__ || Object.getPrototypeOf(AnnotatedFormatter)).call(this));\n\n    _this.includeMoveDestinations = false;\n    return _this;\n  }\n\n  createClass(AnnotatedFormatter, [{\n    key: 'prepareContext',\n    value: function prepareContext(context) {\n      get(AnnotatedFormatter.prototype.__proto__ || Object.getPrototypeOf(AnnotatedFormatter.prototype), 'prepareContext', this).call(this, context);\n      context.indent = function (levels) {\n        this.indentLevel = (this.indentLevel || 0) + (typeof levels === 'undefined' ? 1 : levels);\n        this.indentPad = new Array(this.indentLevel + 1).join('&nbsp;&nbsp;');\n      };\n      context.row = function (json, htmlNote) {\n        context.out('<tr><td style=\"white-space: nowrap;\">' + '<pre class=\"jsondiffpatch-annotated-indent\"' + ' style=\"display: inline-block\">');\n        context.out(context.indentPad);\n        context.out('</pre><pre style=\"display: inline-block\">');\n        context.out(json);\n        context.out('</pre></td><td class=\"jsondiffpatch-delta-note\"><div>');\n        context.out(htmlNote);\n        context.out('</div></td></tr>');\n      };\n    }\n  }, {\n    key: 'typeFormattterErrorFormatter',\n    value: function typeFormattterErrorFormatter(context, err) {\n      context.row('', '<pre class=\"jsondiffpatch-error\">' + err + '</pre>');\n    }\n  }, {\n    key: 'formatTextDiffString',\n    value: function formatTextDiffString(context, value) {\n      var lines = this.parseTextDiff(value);\n      context.out('<ul class=\"jsondiffpatch-textdiff\">');\n      for (var i = 0, l = lines.length; i < l; i++) {\n        var line = lines[i];\n        context.out('<li><div class=\"jsondiffpatch-textdiff-location\">' + ('<span class=\"jsondiffpatch-textdiff-line-number\">' + line.location.line + '</span><span class=\"jsondiffpatch-textdiff-char\">' + line.location.chr + '</span></div><div class=\"jsondiffpatch-textdiff-line\">'));\n        var pieces = line.pieces;\n        for (var pieceIndex = 0, piecesLength = pieces.length; pieceIndex < piecesLength; pieceIndex++) {\n          var piece = pieces[pieceIndex];\n          context.out('<span class=\"jsondiffpatch-textdiff-' + piece.type + '\">' + piece.text + '</span>');\n        }\n        context.out('</div></li>');\n      }\n      context.out('</ul>');\n    }\n  }, {\n    key: 'rootBegin',\n    value: function rootBegin(context, type, nodeType) {\n      context.out('<table class=\"jsondiffpatch-annotated-delta\">');\n      if (type === 'node') {\n        context.row('{');\n        context.indent();\n      }\n      if (nodeType === 'array') {\n        context.row('\"_t\": \"a\",', 'Array delta (member names indicate array indices)');\n      }\n    }\n  }, {\n    key: 'rootEnd',\n    value: function rootEnd(context, type) {\n      if (type === 'node') {\n        context.indent(-1);\n        context.row('}');\n      }\n      context.out('</table>');\n    }\n  }, {\n    key: 'nodeBegin',\n    value: function nodeBegin(context, key, leftKey, type, nodeType) {\n      context.row('&quot;' + key + '&quot;: {');\n      if (type === 'node') {\n        context.indent();\n      }\n      if (nodeType === 'array') {\n        context.row('\"_t\": \"a\",', 'Array delta (member names indicate array indices)');\n      }\n    }\n  }, {\n    key: 'nodeEnd',\n    value: function nodeEnd(context, key, leftKey, type, nodeType, isLast) {\n      if (type === 'node') {\n        context.indent(-1);\n      }\n      context.row('}' + (isLast ? '' : ','));\n    }\n\n    /* jshint camelcase: false */\n\n    /* eslint-disable camelcase */\n\n  }, {\n    key: 'format_unchanged',\n    value: function format_unchanged() {}\n  }, {\n    key: 'format_movedestination',\n    value: function format_movedestination() {}\n  }, {\n    key: 'format_node',\n    value: function format_node(context, delta, left) {\n      // recurse\n      this.formatDeltaChildren(context, delta, left);\n    }\n  }]);\n  return AnnotatedFormatter;\n}(BaseFormatter);\n\n/* eslint-enable camelcase */\n\nvar wrapPropertyName = function wrapPropertyName(name) {\n  return '<pre style=\"display:inline-block\">&quot;' + name + '&quot;</pre>';\n};\n\nvar deltaAnnotations = {\n  added: function added(delta, left, key, leftKey) {\n    var formatLegend = ' <pre>([newValue])</pre>';\n    if (typeof leftKey === 'undefined') {\n      return 'new value' + formatLegend;\n    }\n    if (typeof leftKey === 'number') {\n      return 'insert at index ' + leftKey + formatLegend;\n    }\n    return 'add property ' + wrapPropertyName(leftKey) + formatLegend;\n  },\n  modified: function modified(delta, left, key, leftKey) {\n    var formatLegend = ' <pre>([previousValue, newValue])</pre>';\n    if (typeof leftKey === 'undefined') {\n      return 'modify value' + formatLegend;\n    }\n    if (typeof leftKey === 'number') {\n      return 'modify at index ' + leftKey + formatLegend;\n    }\n    return 'modify property ' + wrapPropertyName(leftKey) + formatLegend;\n  },\n  deleted: function deleted(delta, left, key, leftKey) {\n    var formatLegend = ' <pre>([previousValue, 0, 0])</pre>';\n    if (typeof leftKey === 'undefined') {\n      return 'delete value' + formatLegend;\n    }\n    if (typeof leftKey === 'number') {\n      return 'remove index ' + leftKey + formatLegend;\n    }\n    return 'delete property ' + wrapPropertyName(leftKey) + formatLegend;\n  },\n  moved: function moved(delta, left, key, leftKey) {\n    return 'move from <span title=\"(position to remove at original state)\">' + ('index ' + leftKey + '</span> to <span title=\"(position to insert at final') + (' state)\">index ' + delta[1] + '</span>');\n  },\n  textdiff: function textdiff(delta, left, key, leftKey) {\n    var location = typeof leftKey === 'undefined' ? '' : typeof leftKey === 'number' ? ' at index ' + leftKey : ' at property ' + wrapPropertyName(leftKey);\n    return 'text diff' + location + ', format is <a href=\"https://code.google.com/' + 'p/google-diff-match-patch/wiki/Unidiff\">a variation of Unidiff</a>';\n  }\n};\n\nvar formatAnyChange = function formatAnyChange(context, delta) {\n  var deltaType = this.getDeltaType(delta);\n  var annotator = deltaAnnotations[deltaType];\n  var htmlNote = annotator && annotator.apply(annotator, Array.prototype.slice.call(arguments, 1));\n  var json = JSON.stringify(delta, null, 2);\n  if (deltaType === 'textdiff') {\n    // split text diffs lines\n    json = json.split('\\\\n').join('\\\\n\"+\\n   \"');\n  }\n  context.indent();\n  context.row(json, htmlNote);\n  context.indent(-1);\n};\n\n/* eslint-disable camelcase */\nAnnotatedFormatter.prototype.format_added = formatAnyChange;\nAnnotatedFormatter.prototype.format_modified = formatAnyChange;\nAnnotatedFormatter.prototype.format_deleted = formatAnyChange;\nAnnotatedFormatter.prototype.format_moved = formatAnyChange;\nAnnotatedFormatter.prototype.format_textdiff = formatAnyChange;\nvar defaultInstance$1 = void 0;\n\nfunction format$1(delta, left) {\n  if (!defaultInstance$1) {\n    defaultInstance$1 = new AnnotatedFormatter();\n  }\n  return defaultInstance$1.format(delta, left);\n}\n\n\n\nvar annotated = Object.freeze({\n\tdefault: AnnotatedFormatter,\n\tformat: format$1\n});\n\nvar OPERATIONS = {\n  add: 'add',\n  remove: 'remove',\n  replace: 'replace',\n  move: 'move'\n};\n\nvar JSONFormatter = function (_BaseFormatter) {\n  inherits(JSONFormatter, _BaseFormatter);\n\n  function JSONFormatter() {\n    classCallCheck(this, JSONFormatter);\n\n    var _this = possibleConstructorReturn(this, (JSONFormatter.__proto__ || Object.getPrototypeOf(JSONFormatter)).call(this));\n\n    _this.includeMoveDestinations = true;\n    return _this;\n  }\n\n  createClass(JSONFormatter, [{\n    key: 'prepareContext',\n    value: function prepareContext(context) {\n      get(JSONFormatter.prototype.__proto__ || Object.getPrototypeOf(JSONFormatter.prototype), 'prepareContext', this).call(this, context);\n      context.result = [];\n      context.path = [];\n      context.pushCurrentOp = function (obj) {\n        var op = obj.op,\n            value = obj.value;\n\n        var val = {\n          op: op,\n          path: this.currentPath()\n        };\n        if (typeof value !== 'undefined') {\n          val.value = value;\n        }\n        this.result.push(val);\n      };\n\n      context.pushMoveOp = function (to) {\n        var from = this.currentPath();\n        this.result.push({\n          op: OPERATIONS.move,\n          from: from,\n          path: this.toPath(to)\n        });\n      };\n\n      context.currentPath = function () {\n        return '/' + this.path.join('/');\n      };\n\n      context.toPath = function (toPath) {\n        var to = this.path.slice();\n        to[to.length - 1] = toPath;\n        return '/' + to.join('/');\n      };\n    }\n  }, {\n    key: 'typeFormattterErrorFormatter',\n    value: function typeFormattterErrorFormatter(context, err) {\n      context.out('[ERROR] ' + err);\n    }\n  }, {\n    key: 'rootBegin',\n    value: function rootBegin() {}\n  }, {\n    key: 'rootEnd',\n    value: function rootEnd() {}\n  }, {\n    key: 'nodeBegin',\n    value: function nodeBegin(_ref, key, leftKey) {\n      var path = _ref.path;\n\n      path.push(leftKey);\n    }\n  }, {\n    key: 'nodeEnd',\n    value: function nodeEnd(_ref2) {\n      var path = _ref2.path;\n\n      path.pop();\n    }\n\n    /* jshint camelcase: false */\n    /* eslint-disable camelcase */\n\n  }, {\n    key: 'format_unchanged',\n    value: function format_unchanged() {}\n  }, {\n    key: 'format_movedestination',\n    value: function format_movedestination() {}\n  }, {\n    key: 'format_node',\n    value: function format_node(context, delta, left) {\n      this.formatDeltaChildren(context, delta, left);\n    }\n  }, {\n    key: 'format_added',\n    value: function format_added(context, delta) {\n      context.pushCurrentOp({ op: OPERATIONS.add, value: delta[0] });\n    }\n  }, {\n    key: 'format_modified',\n    value: function format_modified(context, delta) {\n      context.pushCurrentOp({ op: OPERATIONS.replace, value: delta[1] });\n    }\n  }, {\n    key: 'format_deleted',\n    value: function format_deleted(context) {\n      context.pushCurrentOp({ op: OPERATIONS.remove });\n    }\n  }, {\n    key: 'format_moved',\n    value: function format_moved(context, delta) {\n      var to = delta[1];\n      context.pushMoveOp(to);\n    }\n  }, {\n    key: 'format_textdiff',\n    value: function format_textdiff() {\n      throw new Error('Not implemented');\n    }\n  }, {\n    key: 'format',\n    value: function format(delta, left) {\n      var context = {};\n      this.prepareContext(context);\n      this.recurse(context, delta, left);\n      return context.result;\n    }\n  }]);\n  return JSONFormatter;\n}(BaseFormatter);\n\nvar last = function last(arr) {\n  return arr[arr.length - 1];\n};\n\nvar sortBy = function sortBy(arr, pred) {\n  arr.sort(pred);\n  return arr;\n};\n\nvar compareByIndexDesc = function compareByIndexDesc(indexA, indexB) {\n  var lastA = parseInt(indexA, 10);\n  var lastB = parseInt(indexB, 10);\n  if (!(isNaN(lastA) || isNaN(lastB))) {\n    return lastB - lastA;\n  } else {\n    return 0;\n  }\n};\n\nvar opsByDescendingOrder = function opsByDescendingOrder(removeOps) {\n  return sortBy(removeOps, function (a, b) {\n    var splitA = a.path.split('/');\n    var splitB = b.path.split('/');\n    if (splitA.length !== splitB.length) {\n      return splitA.length - splitB.length;\n    } else {\n      return compareByIndexDesc(last(splitA), last(splitB));\n    }\n  });\n};\n\nvar partitionOps = function partitionOps(arr, fns) {\n  var initArr = Array(fns.length + 1).fill().map(function () {\n    return [];\n  });\n  return arr.map(function (item) {\n    var position = fns.map(function (fn) {\n      return fn(item);\n    }).indexOf(true);\n    if (position < 0) {\n      position = fns.length;\n    }\n    return { item: item, position: position };\n  }).reduce(function (acc, item) {\n    acc[item.position].push(item.item);\n    return acc;\n  }, initArr);\n};\nvar isMoveOp = function isMoveOp(_ref3) {\n  var op = _ref3.op;\n  return op === 'move';\n};\nvar isRemoveOp = function isRemoveOp(_ref4) {\n  var op = _ref4.op;\n  return op === 'remove';\n};\n\nvar reorderOps = function reorderOps(diff) {\n  var _partitionOps = partitionOps(diff, [isMoveOp, isRemoveOp]),\n      _partitionOps2 = slicedToArray(_partitionOps, 3),\n      moveOps = _partitionOps2[0],\n      removedOps = _partitionOps2[1],\n      restOps = _partitionOps2[2];\n\n  var removeOpsReverse = opsByDescendingOrder(removedOps);\n  return [].concat(toConsumableArray(removeOpsReverse), toConsumableArray(moveOps), toConsumableArray(restOps));\n};\n\nvar defaultInstance$2 = void 0;\n\nvar format$2 = function format(delta, left) {\n  if (!defaultInstance$2) {\n    defaultInstance$2 = new JSONFormatter();\n  }\n  return reorderOps(defaultInstance$2.format(delta, left));\n};\n\nvar log = function log(delta, left) {\n  console.log(format$2(delta, left));\n};\n\n\n\nvar jsonpatch = Object.freeze({\n\tdefault: JSONFormatter,\n\tpartitionOps: partitionOps,\n\tformat: format$2,\n\tlog: log\n});\n\nfunction chalkColor(name) {\n  return chalk && chalk[name] || function () {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return args;\n  };\n}\n\nvar colors = {\n  added: chalkColor('green'),\n  deleted: chalkColor('red'),\n  movedestination: chalkColor('gray'),\n  moved: chalkColor('yellow'),\n  unchanged: chalkColor('gray'),\n  error: chalkColor('white.bgRed'),\n  textDiffLine: chalkColor('gray')\n};\n\nvar ConsoleFormatter = function (_BaseFormatter) {\n  inherits(ConsoleFormatter, _BaseFormatter);\n\n  function ConsoleFormatter() {\n    classCallCheck(this, ConsoleFormatter);\n\n    var _this = possibleConstructorReturn(this, (ConsoleFormatter.__proto__ || Object.getPrototypeOf(ConsoleFormatter)).call(this));\n\n    _this.includeMoveDestinations = false;\n    return _this;\n  }\n\n  createClass(ConsoleFormatter, [{\n    key: 'prepareContext',\n    value: function prepareContext(context) {\n      get(ConsoleFormatter.prototype.__proto__ || Object.getPrototypeOf(ConsoleFormatter.prototype), 'prepareContext', this).call(this, context);\n      context.indent = function (levels) {\n        this.indentLevel = (this.indentLevel || 0) + (typeof levels === 'undefined' ? 1 : levels);\n        this.indentPad = new Array(this.indentLevel + 1).join('  ');\n        this.outLine();\n      };\n      context.outLine = function () {\n        this.buffer.push('\\n' + (this.indentPad || ''));\n      };\n      context.out = function () {\n        for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          args[_key2] = arguments[_key2];\n        }\n\n        for (var i = 0, l = args.length; i < l; i++) {\n          var lines = args[i].split('\\n');\n          var text = lines.join('\\n' + (this.indentPad || ''));\n          if (this.color && this.color[0]) {\n            text = this.color[0](text);\n          }\n          this.buffer.push(text);\n        }\n      };\n      context.pushColor = function (color) {\n        this.color = this.color || [];\n        this.color.unshift(color);\n      };\n      context.popColor = function () {\n        this.color = this.color || [];\n        this.color.shift();\n      };\n    }\n  }, {\n    key: 'typeFormattterErrorFormatter',\n    value: function typeFormattterErrorFormatter(context, err) {\n      context.pushColor(colors.error);\n      context.out('[ERROR]' + err);\n      context.popColor();\n    }\n  }, {\n    key: 'formatValue',\n    value: function formatValue(context, value) {\n      context.out(JSON.stringify(value, null, 2));\n    }\n  }, {\n    key: 'formatTextDiffString',\n    value: function formatTextDiffString(context, value) {\n      var lines = this.parseTextDiff(value);\n      context.indent();\n      for (var i = 0, l = lines.length; i < l; i++) {\n        var line = lines[i];\n        context.pushColor(colors.textDiffLine);\n        context.out(line.location.line + ',' + line.location.chr + ' ');\n        context.popColor();\n        var pieces = line.pieces;\n        for (var pieceIndex = 0, piecesLength = pieces.length; pieceIndex < piecesLength; pieceIndex++) {\n          var piece = pieces[pieceIndex];\n          context.pushColor(colors[piece.type]);\n          context.out(piece.text);\n          context.popColor();\n        }\n        if (i < l - 1) {\n          context.outLine();\n        }\n      }\n      context.indent(-1);\n    }\n  }, {\n    key: 'rootBegin',\n    value: function rootBegin(context, type, nodeType) {\n      context.pushColor(colors[type]);\n      if (type === 'node') {\n        context.out(nodeType === 'array' ? '[' : '{');\n        context.indent();\n      }\n    }\n  }, {\n    key: 'rootEnd',\n    value: function rootEnd(context, type, nodeType) {\n      if (type === 'node') {\n        context.indent(-1);\n        context.out(nodeType === 'array' ? ']' : '}');\n      }\n      context.popColor();\n    }\n  }, {\n    key: 'nodeBegin',\n    value: function nodeBegin(context, key, leftKey, type, nodeType) {\n      context.pushColor(colors[type]);\n      context.out(leftKey + ': ');\n      if (type === 'node') {\n        context.out(nodeType === 'array' ? '[' : '{');\n        context.indent();\n      }\n    }\n  }, {\n    key: 'nodeEnd',\n    value: function nodeEnd(context, key, leftKey, type, nodeType, isLast) {\n      if (type === 'node') {\n        context.indent(-1);\n        context.out(nodeType === 'array' ? ']' : '}' + (isLast ? '' : ','));\n      }\n      if (!isLast) {\n        context.outLine();\n      }\n      context.popColor();\n    }\n\n    /* jshint camelcase: false */\n    /* eslint-disable camelcase */\n\n  }, {\n    key: 'format_unchanged',\n    value: function format_unchanged(context, delta, left) {\n      if (typeof left === 'undefined') {\n        return;\n      }\n      this.formatValue(context, left);\n    }\n  }, {\n    key: 'format_movedestination',\n    value: function format_movedestination(context, delta, left) {\n      if (typeof left === 'undefined') {\n        return;\n      }\n      this.formatValue(context, left);\n    }\n  }, {\n    key: 'format_node',\n    value: function format_node(context, delta, left) {\n      // recurse\n      this.formatDeltaChildren(context, delta, left);\n    }\n  }, {\n    key: 'format_added',\n    value: function format_added(context, delta) {\n      this.formatValue(context, delta[0]);\n    }\n  }, {\n    key: 'format_modified',\n    value: function format_modified(context, delta) {\n      context.pushColor(colors.deleted);\n      this.formatValue(context, delta[0]);\n      context.popColor();\n      context.out(' => ');\n      context.pushColor(colors.added);\n      this.formatValue(context, delta[1]);\n      context.popColor();\n    }\n  }, {\n    key: 'format_deleted',\n    value: function format_deleted(context, delta) {\n      this.formatValue(context, delta[0]);\n    }\n  }, {\n    key: 'format_moved',\n    value: function format_moved(context, delta) {\n      context.out('==> ' + delta[1]);\n    }\n  }, {\n    key: 'format_textdiff',\n    value: function format_textdiff(context, delta) {\n      this.formatTextDiffString(context, delta[0]);\n    }\n  }]);\n  return ConsoleFormatter;\n}(BaseFormatter);\n\nvar defaultInstance$3 = void 0;\n\nvar format$3 = function format(delta, left) {\n  if (!defaultInstance$3) {\n    defaultInstance$3 = new ConsoleFormatter();\n  }\n  return defaultInstance$3.format(delta, left);\n};\n\nfunction log$1(delta, left) {\n  console.log(format$3(delta, left));\n}\n\n\n\nvar console$1 = Object.freeze({\n\tdefault: ConsoleFormatter,\n\tformat: format$3,\n\tlog: log$1\n});\n\n\n\nvar index = Object.freeze({\n\tbase: base,\n\thtml: html,\n\tannotated: annotated,\n\tjsonpatch: jsonpatch,\n\tconsole: console$1\n});\n\n// use as 2nd parameter for JSON.parse to revive Date instances\nfunction dateReviver(key, value) {\n  var parts = void 0;\n  if (typeof value === 'string') {\n    // eslint-disable-next-line max-len\n    parts = /^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})(?:\\.(\\d*))?(Z|([+-])(\\d{2}):(\\d{2}))$/.exec(value);\n    if (parts) {\n      return new Date(Date.UTC(+parts[1], +parts[2] - 1, +parts[3], +parts[4], +parts[5], +parts[6], +(parts[7] || 0)));\n    }\n  }\n  return value;\n}\n\nfunction create(options) {\n  return new DiffPatcher(options);\n}\n\nvar defaultInstance$4 = void 0;\n\nfunction diff() {\n  if (!defaultInstance$4) {\n    defaultInstance$4 = new DiffPatcher();\n  }\n  return defaultInstance$4.diff.apply(defaultInstance$4, arguments);\n}\n\nfunction patch() {\n  if (!defaultInstance$4) {\n    defaultInstance$4 = new DiffPatcher();\n  }\n  return defaultInstance$4.patch.apply(defaultInstance$4, arguments);\n}\n\nfunction unpatch() {\n  if (!defaultInstance$4) {\n    defaultInstance$4 = new DiffPatcher();\n  }\n  return defaultInstance$4.unpatch.apply(defaultInstance$4, arguments);\n}\n\nfunction reverse() {\n  if (!defaultInstance$4) {\n    defaultInstance$4 = new DiffPatcher();\n  }\n  return defaultInstance$4.reverse.apply(defaultInstance$4, arguments);\n}\n\nfunction clone$1() {\n  if (!defaultInstance$4) {\n    defaultInstance$4 = new DiffPatcher();\n  }\n  return defaultInstance$4.clone.apply(defaultInstance$4, arguments);\n}\n\nexports.DiffPatcher = DiffPatcher;\nexports.formatters = index;\nexports.console = console$1;\nexports.create = create;\nexports.dateReviver = dateReviver;\nexports.diff = diff;\nexports.patch = patch;\nexports.unpatch = unpatch;\nexports.reverse = reverse;\nexports.clone = clone$1;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n","import \"./styles.css\";\n//import { left, right } from \"./jsons\";\nimport { left, right } from \"./json-ht\";\nimport formatter from \"./formatter.js\";\nimport textFormatter from \"./text-formatter.js\";\nimport jsonFormatter from \"./console.js\";\nlet jsondiffpatch = require(\"jsondiffpatch\");\n\ndocument.getElementById(\"app\").innerHTML = `\n<p><b>David Torroija</b> changes at Jul 24 21:05 hs (GMT -5)</p>\t\n<div>\n  <ul id=\"list\">\n  </ul>\n</div> \n`;\nwindow.json = left;\nconst delta = jsondiffpatch\n  .create({\n    arrays: {\n      // default true, detect items moved inside the array (otherwise they will be registered as remove+add)\n      detectMove: false,\n      // default false, the value of items moved is not included in deltas\n      includeValueOnMove: false\n    },\n    propertyFilter: function(name, context) {\n      /*\n       this optional function can be specified to ignore object properties (eg. volatile data)\n        name: property name, present in either context.left or context.right objects\n        context: the diff context (has context.left and context.right objects)\n      */\n      return ![\"linkedMedia\", \"imageSize\", \"sizes\"].includes(name);\n    }\n  })\n  .diff(left.data, right.data);\nwindow.f = formatter;\n\n//console.log(\"diffpatch\", delta, new formatter().format(delta));\n//console.log(\"text\", delta, new textFormatter().format(delta));\n//console.log(\"otro\", delta, jsondiffpatch.formatters.console.format(delta));\n//console.log(\"xxx\", delta, new jsonFormatter().format(delta));\nconsole.log(\"xxx12\", delta, new jsonFormatter().format(delta));\n//console.log(\"xxx12\", delta, eval(new jsonFormatter().format(delta)));\n//console.log(\"a\", eval(new jsonFormatter().format(delta)));\nconsole.log(\"a2\", eval(new jsonFormatter().format(delta)));\nconst resultArr = new textFormatter(delta).format(delta);\nconst select = document.getElementById(\"list\");\n\nfor (var i = 0; i < resultArr.length; i++) {\n  var li = document.createElement(\"li\");\n  var span = document.createElement(\"span\");\n  span.appendChild(document.createTextNode(i));\n  li.appendChild(span);\n  var text = document.createTextNode(resultArr[i]);\n  li.appendChild(text);\n  select.insertBefore(li, select.childNodes[i]);\n}\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else {\n        window.location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}